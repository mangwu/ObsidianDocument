# 13. 客户端检测（Client Detection）

本章内容

- [ ]  使用能力检测
- [ ]  用户代理检测的历史
- [ ]  软件和硬件检测
- [ ]  检测策略

问题：每家厂商的浏览器都有自己的实现和特点，支持不仅相同的接口和API（大部分一致）

导致：跨平台的浏览器总会存在不同的问题，这些差异迫使Web开发者面向最大公约数设计（Web应用程序），要么（更常见）使用各种方法来检测客户端，以避免或克服这些缺陷

客户端检测一直是Web开发过程中饱受争议的话题：

理想情况下，浏览器应该支持一系列公共特性，开发者可以使用这些公共特性进行开发

而现实中，浏览器之间的差异和莫名其妙的行为，让客户端检测变成一种补救措施，而且也成为了开发策略的重要一环

要检测当前浏览器有很多方法，每一种都都有各自的长处和不足，问题的关键在于知道**客户端检测应该是解决问题的最后一个举措**，任何时候有更普适的方案都不应该使用客户端检测

# 1. 能力检测（Capability Detection）

[1. 能力检测（Capability Detection）](13%20%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%A3%80%E6%B5%8B%EF%BC%88Client%20Detection%EF%BC%89/1%20%E8%83%BD%E5%8A%9B%E6%A3%80%E6%B5%8B%EF%BC%88Capability%20Detection%EF%BC%89.md)

# 2. 用户代理检测（User-Agent Detection）

[2. 用户代理检测（User-Agent Detection）](13%20%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%A3%80%E6%B5%8B%EF%BC%88Client%20Detection%EF%BC%89/2%20%E7%94%A8%E6%88%B7%E4%BB%A3%E7%90%86%E6%A3%80%E6%B5%8B%EF%BC%88User-Agent%20Detection%EF%BC%89.md)

# 3. 软件与硬件检测

[3. 软件与硬件检测](13%20%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%A3%80%E6%B5%8B%EF%BC%88Client%20Detection%EF%BC%89/3%20%E8%BD%AF%E4%BB%B6%E4%B8%8E%E7%A1%AC%E4%BB%B6%E6%A3%80%E6%B5%8B.md)

# 4. 小结

- 客户端检测是JavaScript争议最多的话题之一，因为不同浏览器之间存在差异，所以经常需要根据浏览器的能力来编写不同的代码，客户端检测有不少方式，但是以下两种用的最多
    - [ ]  **能力检测：**在使用之前先测试浏览器的特定能力，例如脚本在调用某个函数前先检查它是否存在。这种客户端检测方式可以让开发者不必考虑特定的浏览器或版本，而只需要关注某些能力是否存在。但是能力检测不能精确的反映特定的浏览器或版本
    - [ ]  **用户代理检测**：通过用户代理字符串确定浏览器。用户代理字符串包含浏览器的很多信息，通常包括浏览器、平台、操作系统和浏览器版本。用户代理字符串有相当长的发展史，很多浏览器都试图欺骗网站相信自己是别的浏览器。用户代理检测也比较麻烦，特别涉及到Opera会在代理字符串中隐藏自己信息的时候。即便如此，用户代理字符串也可以用来确定浏览器使用的渲染引擎及其平台，包括移动设备和游戏机
- 在选择客户端检测方法时，首选是使用能力检测，特殊能力检测要放到次要位置，作为决定代码逻辑的参考，用户代理检测是最后一个选择，因为过于依赖用户代理字符串
- 浏览器也提供了一些软件和硬件相关的信息。这些信息通过screen和navigator对象暴露出来，利用这些API，可以获取关于操作系统、浏览器、硬件、设备位置、电池状态相关方面的准确信息