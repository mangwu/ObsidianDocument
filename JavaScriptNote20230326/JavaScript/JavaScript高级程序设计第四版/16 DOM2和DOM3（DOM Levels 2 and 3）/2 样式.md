# 2. æ ·å¼

HTMLä¸­çš„æ ·å¼æœ‰ä¸‰ç§å®šä¹‰æ–¹å¼ï¼šå¤–éƒ¨æ ·å¼è¡¨ï¼ˆé€šè¿‡<link>å…ƒç´ ï¼‰ï¼Œæ–‡æ¡£æ ·å¼è¡¨ï¼ˆä½¿ç”¨<style>å…ƒç´ ï¼‰å’Œå…ƒç´ ç‰¹å®šæ ·å¼ï¼ˆä½¿ç”¨styleå±æ€§ï¼‰ã€‚DOM2 Styleä¸ºè¿™ä¸‰ç§åº”ç”¨æ ·å¼çš„æœºåˆ¶éƒ½æä¾›äº†API

# 2.1 å­˜å–å…ƒç´ æ ·å¼ï¼ˆAccessing Element Stylesï¼‰

- ä»»ä½•æ”¯æŒ`style`å±æ€§çš„HTMLå…ƒç´ éƒ½ä¼šåœ¨JavaScriptä¸­æœ‰ä¸€ä¸ªå¯¹åº”çš„`style`å±æ€§ï¼Œå…ƒç´ èŠ‚ç‚¹çš„`style` å±æ€§å¹¶ä¸æ˜¯ç›´æ¥å®šä¹‰åœ¨`Element` æ¥å£ï¼Œä¹Ÿä¸æ˜¯å®šä¹‰åœ¨`HTMLElement` æ¥å£ä¸­çš„ï¼Œè€Œæ˜¯å®šä¹‰åœ¨`ElementCSSInlineStyle` ä¸­ï¼Œå¹¶ç”±`HTMLElement` æ¥å£åŒ…å«ï¼ˆincludesï¼‰ï¼Œ[CSSOMè§„èŒƒ](https://w3c.github.io/csswg-drafts/cssom/#dom-elementcssinlinestyle-style)å¯¹æ­¤è¿›è¡Œäº†å®šä¹‰ï¼Œå¦‚ä¸‹
    
    ```jsx
    interface mixin ElementCSSInlineStyle {
      [SameObject, PutForwards=cssText] readonly attribute CSSStyleDeclaration style;
    };
    
    HTMLElement includes ElementCSSInlineStyle;
    SVGElement includes ElementCSSInlineStyle;
    MathMLElement includes ElementCSSInlineStyle;
    ```
    
    - [ ]  `style` ï¼Œè¯¥å±æ€§å®šä¹‰åœ¨`ElementCSSInlineStyle` ï¼ˆå…ƒç´ CSSå†…è”æ ·å¼ï¼‰ä¸­ï¼Œæ˜¯ä¸€ä¸ª`CSSStyleDeclaration` ç±»å‹çš„å®ä¾‹ï¼Œå…¶ä¸­åŒ…å«**é€šè¿‡HTML `style`** å±æ€§ä¸ºå…ƒç´ è®¾ç½®çš„æ‰€æœ‰æ ·å¼ä¿¡æ¯ï¼Œä½†**ä¸åŒ…æ‹¬**é€šè¿‡å±‚å æœºåˆ¶ä»æ–‡æ¡£æ ·å¼å’Œå¤–éƒ¨æ ·å¼ä¸­ç»§æ‰¿æ¥çš„æ ·å¼ï¼›`[CSSStyleDeclaration`](https://w3c.github.io/csswg-drafts/cssom/#cssstyledeclaration) æ¥å£å®šä¹‰å¦‚ä¸‹
        
        ```jsx
        [Exposed=Window]
        interface CSSStyleDeclaration {
          [CEReactions] attribute CSSOMString cssText;
          readonly attribute unsigned long length;
          getter CSSOMString item(unsigned long index);
          CSSOMString getPropertyValue(CSSOMString property);
          CSSOMString getPropertyPriority(CSSOMString property);
          [CEReactions] undefined setProperty(CSSOMString property, [LegacyNullToEmptyString] CSSOMString value, optional [LegacyNullToEmptyString] CSSOMString priority = "");
          [CEReactions] CSSOMString removeProperty(CSSOMString property);
          readonly attribute CSSRule? parentRule;
          [CEReactions] attribute [LegacyNullToEmptyString] CSSOMString cssFloat;
        };
        ```
        
        - è¿™ä¸ªæ¥å£å®šä¹‰ä¸­çš„å±æ€§ä¼šåœ¨ä¹‹åè¯¦ç»†è§£é‡Šï¼Œæ˜ç™½è¿™ä¸ªæ¥å£èƒ½è®©å¼€å‘è€…é€šè¿‡å…ƒç´ çš„`style` å±æ€§å†æ¬¡è®¿é—®åˆ°å…·ä½“çš„CSSæ ·å¼å±æ€§å³å¯
- HTML styleå±æ€§ä¸­çš„CSSå±æ€§åœ¨JavaScript styleå¯¹è±¡ä¸­éƒ½æœ‰å¯¹åº”çš„å±æ€§ï¼Œå› ä¸ºCSSå±æ€§åç§°ä½¿ç”¨è¿å­—ç¬¦è¡¨ç¤ºæ³•ï¼ˆç”¨è¿å­—ç¬¦`-` åˆ†éš”ä¸¤ä¸ªå•è¯ï¼Œå¦‚`background-image`ï¼‰ï¼Œæ‰€ä»¥åœ¨JavaScriptä¸­è¿™äº›å±æ€§å¿…é¡»è½¬æ¢æˆé©¼å³°å¤§å°å½¢å¼ï¼Œä¸‹è¡¨æ˜¯å‡ ä¸ªCSSå±æ€§ä¸styleå¯¹è±¡ä¸­çš„ç­‰ä»·å±æ€§çš„å¯¹æ¯”
    
    
    | CSSå±æ€§ | JavaScriptå±æ€§ |
    | --- | --- |
    | background-image | style.backgroundImage |
    | color | style.color |
    | display | style.display |
    | font-family | style.fontFamily |
    | border-block-start-style | style.borderBlockStartStyle |
- å¤§å¤šæ•°å±æ€§åéƒ½ä¼šè¿™æ ·ç›´æ¥è½¬æ¢ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªCSSå±æ€§åç§°ä¸èƒ½ç›´æ¥è½¬æ¢ï¼Œå®ƒå°±æ˜¯`float` ï¼Œå› ä¸º`float` æ˜¯JavaScriptçš„ä¿ç•™å­—ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨ä½œå±æ€§åï¼ŒDOM2 Styleè§„å®šå®ƒåœ¨styleå¯¹è±¡ä¸­å¯¹åº”çš„å±æ€§åº”è¯¥æ˜¯`cssFloat` ï¼ˆç›´æ¥ä½œä¸ºå±æ€§å®šä¹‰åœ¨`CSSStyleDeclaration` æ¥å£ä¸­  ï¼‰
    
    ```jsx
    <div>Hello, world</div>
    
    const div = document.querySelector("div");
    // è®¾ç½®èƒŒæ™¯é¢œè‰²
    div.style.backgroundColor = "red";
    // ä¿®æ”¹å¤§å°
    div.style.width = "200px";
    div.style.height = "100px";
    // è®¾ç½®è¾¹æ¡†
    div.style.border = "1px solid black";
    div.style.borderRadius = "5px";
    // è®¾ç½®æ–‡å­—æ ·å¼
    div.style.display = "inline-flex";
    div.style.alignItems = "center";
    div.style.justifyContent = "center";
    div.style.color = "rgb(255,255,255)";
    div.style.fontWeight = "700";
    // è®¾ç½®æŒ‡é’ˆè¦†ç›–æ ·å¼
    div.style.cursor = "pointer";
    ```
    
    ![inline styles.png](2%20%E6%A0%B7%E5%BC%8F/inline_styles.png)
    
    - é€šè¿‡HTMLå±æ€§ï¼ˆattributeï¼‰`style`è®¾ç½®çš„å€¼ä¹Ÿå¯ä»¥é€šè¿‡JavaScriptä¸­çš„å…ƒç´ `style`å¯¹è±¡è·å–
    - å¦‚æœå…ƒç´ ä¸Šæ²¡æœ‰`style` å±æ€§ï¼Œåˆ™`style` å¯¹è±¡åŒ…å«æ‰€æœ‰å¯èƒ½çš„CSSå±æ€§çš„**ç©ºå€¼**ï¼ˆå¤–éƒ¨æ ·å¼è¡¨ä¸ä¼šå½±å“`style` å¯¹è±¡ä¸­çš„å±æ€§å€¼ï¼‰

## 2.1.1 DOMæ ·å¼å±æ€§å’Œæ–¹æ³•ï¼ˆStyle Properties and Methodsï¼‰

- DOM2 Styleè§„èŒƒåœ¨`style`å¯¹è±¡ä¸Šå®šä¹‰äº†ä¸€äº›å±æ€§å’Œæ–¹æ³•ï¼Œè¿™äº›å±æ€§å’Œæ–¹æ³•æä¾›äº†å…ƒç´ `style` å±æ€§çš„ä¿¡æ¯å¹¶æ”¯æŒä¿®æ”¹
- `style` å±æ€§å®šä¹‰åœ¨`ElementCSSInlineStyle` æ¥å£ä¸Šï¼Œå®ƒæ˜¯ä¸€ä¸ª`[CSSStyleDeclaration](https://w3c.github.io/csswg-drafts/cssom/#cssstyledeclaration)` ç±»å‹çš„å±æ€§ï¼Œ`HTMLElement` æ¥å£å®ç°äº†`ElementCSSInlineStyle` ï¼ŒCSSOMè§„èŒƒä¸Šçš„**[TheÂ `ElementCSSInlineStyle`Â Mixin](https://w3c.github.io/csswg-drafts/cssom/#dom-elementcssinlinestyle-style)** å¦‚ä¸‹
    
    ```jsx
    interface mixin ElementCSSInlineStyle {
      [SameObject, PutForwards=cssText] readonly attribute CSSStyleDeclaration style;
    };
    
    HTMLElement includes ElementCSSInlineStyle;
    SVGElement includes ElementCSSInlineStyle;
    MathMLElement includes ElementCSSInlineStyle;
    ```
    
- CSSOMè§„èŒƒçš„`CSSStyleDeclaration` å¦‚ä¸‹
    
    ```jsx
    [Exposed=Window]
    interface CSSStyleDeclaration {
      [CEReactions] attribute CSSOMString cssText;
      readonly attribute unsigned long length;
      getter CSSOMString item(unsigned long index);
      CSSOMString getPropertyValue(CSSOMString property);
      CSSOMString getPropertyPriority(CSSOMString property);
      [CEReactions] undefined setProperty(CSSOMString property, [LegacyNullToEmptyString] CSSOMString value, optional [LegacyNullToEmptyString] CSSOMString priority = "");
      [CEReactions] CSSOMString removeProperty(CSSOMString property);
      readonly attribute CSSRule? parentRule;
      [CEReactions] attribute [LegacyNullToEmptyString] CSSOMString cssFloat;
    };
    ```
    
    - [ ]  `cssText`ï¼ŒåŒ…å«`style`å±æ€§ä¸­çš„cssä»£ç 
    - [ ]  `length` ,åº”ç”¨ç»™å…ƒç´ çš„CSSå±æ€§æ•°é‡
    - [ ]  `parentRule` ï¼Œè¡¨ç¤ºCSSä¿¡æ¯çš„`CSSRule`å¯¹è±¡ï¼ˆä¸‹ä¸€ç« è®¨è®ºï¼‰
    - [ ]  `cssFloat` ï¼Œ`float` CSSå±æ€§çš„ç‰¹æ®Šåˆ«å
    - [ ]  `getPropertyValue(property)` ï¼Œè¿”å›ç»™å®šCSSå±æ€§`property` çš„å€¼
    - [ ]  `getPropertyPriority(property)` ï¼Œè¿”å›ç»™å®šCSSå±æ€§çš„ä¼˜å…ˆçº§ï¼ŒCSSå±æ€§ä½¿ç”¨äº†â€œ!importantâ€å°±è¿”å›"importantâ€æœªä½¿ç”¨å°±è¿”å›ç©ºå­—ç¬¦ä¸²
    - [ ]  `item(index)` ï¼Œè¿”å›ç”¨`index`æ ‡è®°çš„å±æ€§åï¼Œå½“`index`è¶Šç•Œæ—¶è¿”å›ç©ºå­—ç¬¦ä¸²
    - [ ]  `removeProperty(propertyName)` ï¼Œä»æ ·å¼ä¸­åˆ é™¤CSSå±æ€§`propertyName`
    - [ ]  `setProperty(propertyName, value[, priority=""])` ï¼Œè®¾ç½®CSSå±æ€§`propertyName` çš„å€¼ä¸º`value` ï¼Œ`priority` æ˜¯â€importantâ€æˆ–ç©ºå­—ç¬¦ä¸²
- é€šè¿‡`cssText` å±æ€§å¯ä»¥å­˜å–æ ·å¼çš„CSSä»£ç 
    - è¯»æ¨¡å¼ä¸‹ï¼ŒcssTextè¿”å›styleå±æ€§CSSä»£ç åœ¨æµè§ˆå™¨å†…éƒ¨çš„è¡¨ç¤º
    - å†™æ¨¡å¼ä¸‹ï¼ŒcssTextèµ‹å€¼ä¼šé‡å†™æ•´ä¸ª`style` å±æ€§çš„å€¼ï¼Œæ„å‘³ç€ä¹‹å‰é€šè¿‡`style` å±æ€§è®¾ç½®çš„å±æ€§éƒ½ä¼šä¸¢å¤±ï¼ˆé€šè¿‡å…¶ä»–æ–¹å¼è®¾ç½®çš„ä¸ä¼šæ¶ˆå¤±ï¼‰
    
    ```jsx
    <style>
      p {
        background-color: bisque;
      }
    </style>
    <body>
      <p style="color: blueviolet; font-size: 22px">Hello, mangwu</p>
      <script>
        const p = document.querySelector("p");
        p.setAttribute("style", "color: black; border: 1px solid gray");
        p.style.cssText = "color: blue;";
      </script>
    </body>
    ```
    
    ![cssText.png](2%20%E6%A0%B7%E5%BC%8F/cssText.png)
    
    - ä½¿ç”¨`setAttribute` å’Œèµ‹å€¼`cssText` æœ¬è´¨æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯å¯¹å…ƒç´ ä¸Šçš„`style` å±æ€§ï¼ˆattributeï¼‰è¿›è¡Œä¿®æ”¹
    - è€Œä½¿ç”¨<style>æ ‡ç­¾å¯¹å…ƒç´ åº”ç”¨CSSæ˜¯ç‹¬ç«‹çš„ï¼Œä¸å—ä¿®æ”¹`style` å±æ€§çš„å½±å“
- é€šè¿‡`length` å’Œ`item()` æ–¹æ³•å¯ä»¥è¿­ä»£CSSå±æ€§ï¼Œæ­¤æ—¶`style` å¯¹è±¡å®é™…ä¸Šå˜æˆäº†ä¸€ä¸ªé›†åˆï¼Œä¹Ÿå¯ä»¥ç”¨ä¸­æ‹¬å·ä»£æ›¿`item()` å–å¾—ç›¸åº”çš„CSSå±æ€§åï¼Œè¿™ä¸ªå±æ€§åå¯ä»¥ä¼ é€’ç»™`getPropertyValue()` ä»¥å–å¾—å±æ€§çš„å€¼
    
    ```jsx
    <style>
      p {
        background-color: bisque;
      }
    </style>
    <p style="color: blueviolet; font-size: 22px">Hello, mangwu</p>
    <script>
      const p = document.querySelector("p");
      for (let i = 0; i < p.style.length; i++) {
        console.log(p.style[i], ":", p.style.getPropertyValue(p.style[i]));
      }
    </script>
    // color : blueviolet
    // font-size : 22px
    ```
    
    - å’Œ`cssText` å±æ€§ä¸€æ ·ï¼Œåªä¼šè¿­ä»£å…ƒç´ ä¸Šçš„`style` å±æ€§
    - `p.style[i]` å¯ä»¥æ›¿æ¢æˆ`p.style.item(i)` ï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„
- `setProperty()` ç”¨äºè®¾ç½®å…ƒç´ çš„CSSå±æ€§ï¼Œå¦‚æœå…ƒç´ ä¸Šæ²¡æœ‰è¿™ä¸ªCSSå±æ€§ï¼Œå°±ä¼šæ·»åŠ åˆ°è¿™ä¸ªå…ƒç´ ä¸Šï¼Œæœ‰å°±ä¼šä¿®æ”¹è¿™ä¸ªCSSå±æ€§çš„å€¼ä¸ºç»™å®šå€¼ï¼ŒåŒæ—¶é…åˆ`getPropertyPriority()` ï¼Œå¯ä»¥è®¾ç½®CSSå±æ€§çš„ä¼˜å…ˆçº§ï¼Œç›®å‰åªæœ‰ä¸¤ç§ä¼˜å…ˆçº§ï¼Œä¸€ç§å°±æ˜¯ä¼˜å…ˆåº”ç”¨çš„â€œimportantâ€œï¼Œå¦ä¸€ç§å°±æ˜¯æŒ‰ç…§é¡ºåºåº”ç”¨çš„ç©ºå­—ç¬¦ä¸²
    
    ```jsx
    <style>
      p {
        background-color: bisque !important;
    		font-size: 16px !important;
      }
    </style>
    <p style="color: blueviolet; font-size: 22px">Hello, mangwu</p>
    <script>
      const p = document.querySelector("p");
      p.style.setProperty("background", "aqua", "important");
      p.style.getPropertyPriority("background");
      for (let i = 0; i < p.style.length; i++) {
        console.log(
          p.style[i],
          ":",
          p.style.getPropertyValue(p.style[i]),
          p.style.getPropertyPriority(p.style[i])
        );
      }
    </script>
    // 
    // color : blueviolet 
    // font-size : 22px
    // background-image : initial important
    // background-position-x : initial important
    // background-position-y : initial important
    // background-size : initial important
    // background-repeat-x : initial important
    // background-repeat-y : initial important
    // background-attachment : initial important
    // background-origin : initial important
    // background-clip : initial important
    // background-color : aqua important
    ```
    
    - å†…è”æ ·å¼ä¼˜å…ˆçº§é«˜äºå¤–éƒ¨æ ·å¼
    - ä½¿ç”¨importantçš„å¤–éƒ¨æ ·å¼ä¼˜å…ˆçº§é«˜äºæ™®é€šçš„å†…è”æ ·å¼ï¼ˆå¦‚ä¸Šä¾‹ä¸­çš„font-sizeï¼‰
- `removeProperty()` ç”¨äºä»å…ƒç´ æ ·å¼ä¸­åˆ é™¤æŒ‡å®šçš„CSSå±æ€§ï¼Œä½¿ç”¨è¿™ä¸ªæ–¹æ³•åˆ é™¤å±æ€§æ„å‘³ç€ä¼šåº”ç”¨å±æ€§çš„é»˜è®¤ï¼ˆä»å…¶å®ƒæ ·å¼è¡¨å±‚å ç»§æ‰¿çš„ï¼‰æ ·å¼ï¼Œåœ¨ä¸ç¡®å®šç»™å®šCSSå±æ€§çš„é»˜è®¤å€¼æ˜¯ä»€ä¹ˆçš„æ—¶å€™å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œæ¯”å¦‚ä¸Šé¢çš„ä¾‹å­åˆ é™¤`background` CSSå±æ€§å
    
    ```jsx
    p.style.removeProperty("background");
    ```
    
    - `p` å…ƒç´ çš„èƒŒæ™¯å°±å˜æˆ`bisque` è‰²ï¼Œè¿™æ˜¯ä»å…¶å®ƒæ ·å¼è¡¨å±‚å ç»§æ‰¿è€Œæ¥çš„

## 2.1.2 è®¡ç®—æ ·å¼ï¼ˆComputed Stylesï¼‰

- **è®¡ç®—æ ·å¼**å°±æ˜¯ä¸€ä¸ªå…ƒç´ æˆ–ä¼ªå…ƒç´ åœ¨åº”ç”¨**æ´»åŠ¨æ ·å¼è¡¨ï¼ˆactive stylesheetsï¼‰**å¹¶è§£æè¿™äº›å€¼å¯èƒ½åŒ…å«çš„ä»»ä½•åŸºæœ¬è®¡ç®—åæŠ¥å‘Šå…ƒç´ çš„**æ‰€æœ‰** CSS å±æ€§çš„å€¼
- [MDN](https://developer.mozilla.org/zh-CN/docs/Web/CSS/resolved_value)å’Œ[CSS2.2](https://drafts.csswg.org/cssom/#resolved-values)æœ‰å…³äº**è§£æå€¼ï¼ˆComputed Valueï¼‰**çš„è§£é‡Š
    
    > CSS å±æ€§çš„**è§£æå€¼**ï¼ˆ**resolved value**ï¼‰æ˜¯Â `[getComputedStyle()](https://developer.mozilla.org/zh-CN/docs/Web/API/Window/getComputedStyle)`è¿”å›çš„å€¼ã€‚å¯¹äºå¤§å¤šæ•°å±æ€§ï¼Œå®ƒæ˜¯**è®¡ç®—å€¼**`[computed value](https://developer.mozilla.org/zh-CN/docs/Web/CSS/computed_value)`ï¼Œä½†å¯¹äºä¸€äº›æ—§å±æ€§ï¼ˆåŒ…æ‹¬å®½åº¦å’Œé«˜åº¦ï¼‰ï¼Œå®ƒæ˜¯**åº”ç”¨å€¼**`[used value](https://developer.mozilla.org/zh-CN/docs/Web/CSS/used_value)`ã€‚ â€”â€”MDN
    > 
    
    > ä¸€ä¸ª CSS å±æ€§çš„**è®¡ç®—å€¼**æ˜¯æŒ‡è¿™ä¸ªå±æ€§åœ¨ç”±çˆ¶ç±»è½¬å‘å­ç±»çš„ç»§æ‰¿ä¸­çš„å€¼ã€‚å®ƒé€šè¿‡æŒ‡å®šå€¼è®¡ç®—å‡ºæ¥ï¼š
    > 
    > - å¤„ç†ç‰¹æ®Šçš„å€¼Â `[inherit](https://developer.mozilla.org/zh-CN/docs/Web/CSS/inherit)`ï¼Œ`[initial](https://developer.mozilla.org/zh-CN/docs/Web/CSS/initial)`ï¼ŒÂ `[unset](https://developer.mozilla.org/zh-CN/docs/Web/CSS/unset)`å’ŒÂ `[revert`Â (en-US)](https://developer.mozilla.org/en-US/docs/Web/CSS/revert)ã€‚
    > - è¿›è¡Œè®¡ç®—ï¼Œä»¥è¾¾åˆ°å±æ€§æ‘˜è¦ä¸­â€œè®¡ç®—å€¼â€è¡Œä¸­æè¿°çš„å€¼ã€‚  â€”â€”MDN
    
    > CSS å±æ€§çš„**åº”ç”¨å€¼ï¼ˆused valueï¼‰**æ˜¯å®Œæˆæ‰€æœ‰è®¡ç®—åæœ€ç»ˆä½¿ç”¨çš„å€¼
    > 
    > 
    > â€¦
    > 
    > è®¡ç®—å‡º CSS å±æ€§çš„æœ€ç»ˆå€¼æœ‰ä¸‰ä¸ªæ­¥éª¤ã€‚é¦–å…ˆï¼Œ[æŒ‡å®šå€¼ specified value](https://developer.mozilla.org/zh-CN/docs/Web/CSS/specified_value)Â å–è‡ªæ ·å¼å±‚å  (é€‰å–æ ·å¼è¡¨é‡Œæƒé‡æœ€é«˜çš„è§„åˆ™),Â [ç»§æ‰¿](https://developer.mozilla.org/zh-CN/docs/Web/CSS/inheritance)Â (å¦‚æœå±æ€§å¯ä»¥ç»§æ‰¿åˆ™å–çˆ¶å…ƒç´ çš„å€¼)ï¼Œæˆ–è€…é»˜è®¤å€¼ã€‚ç„¶åï¼ŒæŒ‰è§„èŒƒç®—å‡ºÂ [è®¡ç®—å€¼ computed valueÂ (en-US)](https://developer.mozilla.org/en-US/docs/Web/CSS/computed_value)Â (ä¾‹å¦‚ï¼ŒÂ `span`Â æŒ‡å®šÂ `position: absolute`Â å`display`Â å˜ä¸ºÂ `block`)ã€‚æœ€åï¼Œè®¡ç®—å¸ƒå±€ (å°ºå¯¸æ¯”å¦‚Â `auto`Â æˆ– ç™¾åˆ†æ•° æ¢ç®—ä¸ºåƒç´ å€¼ )ï¼Œç»“æœå³Â **åº”ç”¨å€¼ used value**ã€‚è¿™äº›æ­¥éª¤æ˜¯åœ¨å†…éƒ¨å®Œæˆçš„ï¼Œè„šæœ¬åªèƒ½ç”¨Â [window.getComputedStyleÂ (en-US)](https://developer.mozilla.org/en-US/docs/Web/API/Window/getComputedStyle)Â è·å¾—æœ€ç»ˆçš„åº”ç”¨å€¼ã€‚ 
    > 
    > â€¦
    > 
    > CSS 2.0 åªå®šä¹‰äº†Â [è®¡ç®—å€¼ computed valueÂ (en-US)](https://developer.mozilla.org/en-US/docs/Web/CSS/computed_value)Â ä½œä¸ºå±æ€§è®¡ç®—çš„æœ€åä¸€æ­¥ã€‚CSS 2.1 å¼•è¿›äº†å®šä¹‰æ˜æ˜¾ä¸åŒçš„çš„åº”ç”¨å€¼ï¼Œè¿™æ ·å½“çˆ¶å…ƒç´ çš„**è®¡ç®—å€¼ä¸ºç™¾åˆ†æ•°**æ—¶å­å…ƒç´ å¯ä»¥æ˜¾å¼åœ°ç»§æ‰¿å…¶é«˜å®½ã€‚å¯¹äºä¸ä¾èµ–äºå¸ƒå±€çš„ CSS å±æ€§ (ä¾‹å¦‚display, font-size, line-height) è®¡ç®—å€¼ä¸åº”ç”¨å€¼ä¸€æ ·ï¼Œå¦åˆ™å°±ä¼šä¸ä¸€æ ·  â€”â€”MDN
    > 
    
    > å·²ç”¨å€¼åŸåˆ™ä¸Šæ˜¯ç”¨äºå‘ˆç°çš„å€¼ï¼Œä½†ç”¨æˆ·ä»£ç†å¯èƒ½æ— æ³•åœ¨ç»™å®šç¯å¢ƒä¸­ä½¿ç”¨è¯¥å€¼ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·ä»£ç†å¯èƒ½åªèƒ½å‘ˆç°æ•´æ•°åƒç´ å®½åº¦çš„è¾¹ç•Œï¼Œå› æ­¤å¯èƒ½å¿…é¡»ä½¿ç”¨è¿‘ä¼¼è®¡ç®—å‡ºçš„å®½åº¦ï¼Œæˆ–è€…ç”¨æˆ·ä»£ç†å¯èƒ½è¢«è¿«åªä½¿ç”¨é»‘ç™½é˜´å½±è€Œä¸æ˜¯å…¨è‰²ã€‚**å®é™…å€¼ï¼ˆactual valueï¼‰**æ˜¯å¯¹**åº”ç”¨å€¼**ä½¿ç”¨ä»»ä½•**è¿‘ä¼¼**åä½¿ç”¨çš„å€¼ã€‚â€”â€”[CSS22](https://www.w3.org/TR/CSS22/cascade.html#actual-value)
    > 
    
    ![CSS Value.png](2%20%E6%A0%B7%E5%BC%8F/CSS_Value.png)
    
    - å…³äºCSS Valueçš„ä¾‹å­çš„å…·ä½“ä¾‹å­ï¼Œå¯ä»¥æŸ¥çœ‹[css-cascade-stages-examples](https://www.w3.org/TR/css-cascade/#stages-examples)
- `style` å¯¹è±¡ä¸­åŒ…å«æ”¯æŒ`style` å±æ€§çš„å…ƒç´ ä¸ºè¿™ä¸ªå±æ€§è®¾ç½®çš„æ ·å¼ä¿¡æ¯ï¼Œä½†æ˜¯ä¸åŒ…æ‹¬ä»å…¶å®ƒæ ·å¼è¡¨å±‚å ç»§æ‰¿çš„åŒæ ·å½±å“è¯¥å…ƒç´ çš„æ ·å¼ä¿¡æ¯
    - DOM2 Styleåœ¨`document.defaultView` ï¼ˆæ˜¯windowå¯¹è±¡çš„ä»£ç†ï¼‰ä¸Šå¢åŠ äº†`getComputedStyle()` æ–¹æ³•ï¼Œåœ¨[CSSOMè§„èŒƒ](https://drafts.csswg.org/cssom/#dom-window-getcomputedstyle)ä¸­IDLå®šä¹‰å¦‚ä¸‹
        
        ```jsx
        partial interface Window {
          [NewObject] CSSStyleDeclaration getComputedStyle(Element elt, optional CSSOMString? pseudoElt);
        };
        ```
        
        - `elt` å°±æ˜¯è¦å–å¾—çš„è®¡ç®—æ ·å¼ï¼ˆç§°ä¸ºè§£ææ ·å¼æ›´å¥½ï¼‰çš„å…ƒç´ 
        - `pseudoElt` å¯é€‰å‚æ•°ï¼Œä¼ªå…ƒç´ å­—ç¬¦ä¸²ï¼Œå¦‚æœä¸éœ€è¦æŸ¥è¯¢ä¼ªå…ƒç´ ï¼Œç¬¬äºŒä¸ªå‚æ•°å¯ä»¥ä¼ `null`
        - è¿”å›å€¼ï¼šä¸€ä¸ª`CSSStyleDeclaration`å¯¹è±¡ï¼ŒåŒ…å«å…ƒç´ çš„è§£ææ ·å¼ï¼Œæ³¨æ„å®ƒæ˜¯ä¸€ä¸ª**åªè¯»çš„å®æ—¶çš„**`CSSStyleDeclaration`å¯¹è±¡ï¼Œå½“å…ƒç´ æ ·å¼æ›´æ”¹æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨æ›´æ–°æœ¬èº«
    - è¯¥æ–¹æ³•è¿”å›çš„è§£ææ ·å¼çš„å±æ€§å€¼ï¼ˆproperty valueï¼‰è¦ä¹ˆæ˜¯è®¡ç®—å€¼ï¼Œè¦ä¹ˆæ˜¯åº”ç”¨å€¼ï¼Œå®ƒä»¬éƒ½éµå®ˆå„è‡ªåœ¨[css-cascade](https://www.w3.org/TR/css-cascade/)è§„èŒƒä¸­CSSå±æ€§å®šä¹‰è¡¨ä¸­çš„*[Computed value](https://www.w3.org/TR/css-cascade/#computed)* è¡Œçš„æè¿°
        - ä½†æ˜¯å®é™…ä¸Šä¸åŒçš„æµè§ˆå™¨è¿”å›çš„è§£ææ ·å¼çš„å€¼ä¼šæœ‰äº›è®¸åŒºåˆ«ï¼Œæ¯”å¦‚ç«ç‹å’ŒSafariä¼šæŠŠæ‰€æœ‰é¢œè‰²å€¼éƒ½è½¬æ¢ä¼ªRGBæ ¼å¼ï¼Œè€ŒOperaä¼šæŠŠæ‰€æœ‰é¢œè‰²å€¼éƒ½è½¬æ¢ä¸ºåå…­è¿›åˆ¶è¡¨ç¤ºæ³•
        - è§£ææ ·å¼è¿˜åŒ…å«æµè§ˆå™¨å†…éƒ¨æ ·å¼è¡¨ä¸­çš„ä¿¡æ¯ï¼Œå› æ­¤æœ‰é»˜è®¤å€¼çš„CSSå±æ€§ä¼šå‡ºç°åœ¨è§£ææ ·å¼é‡Œï¼Œä¾‹å¦‚`visibility`å±æ€§åœ¨æ‰€æœ‰æµè§ˆå™¨éƒ½æœ‰é»˜è®¤å€¼ï¼Œä½†ä¸åŒæµè§ˆå™¨è®¾ç½®çš„å€¼ä¸ä¸€æ ·ï¼Œæœ‰äº›æ˜¯â€visibleâ€ï¼Œæœ‰äº›æ˜¯â€œinheritâ€
        - ä¸èƒ½å‡å®šCSSçš„å±æ€§çš„é»˜è®¤å€¼åœ¨æ‰€æœ‰æµè§ˆå™¨ä¸­éƒ½ä¸€æ ·ï¼Œéœ€è¦å…ƒç´ å…·æœ‰é»˜è®¤å€¼ï¼Œä¸€å®šè¦åœ¨æ ·å¼è¡¨ä¸­æ‰‹åŠ¨æŒ‡å®š
    
    <aside>
    ğŸ’¡ æ³¨æ„åœ¨è®¸å¤šåœ¨çº¿çš„æ¼”ç¤ºä»£ç ä¸­ï¼Œ`getComputedStyle`æ˜¯é€šè¿‡Â `document.defaultView`Â å¯¹è±¡æ¥è°ƒç”¨çš„ã€‚å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œè¿™æ˜¯ä¸éœ€è¦çš„ï¼Œå› ä¸ºå¯ä»¥ç›´æ¥é€šè¿‡`window`å¯¹è±¡è°ƒç”¨ã€‚ä½†æœ‰ä¸€ç§æƒ…å†µï¼Œä½ å¿…éœ€è¦ä½¿ç”¨Â `defaultView`, é‚£æ˜¯åœ¨ firefox3.6 ä¸Šè®¿é—®å­æ¡†æ¶å†…çš„æ ·å¼ã€‚
    
    </aside>
    
- ä¾‹å­
    
    ```jsx
    <style>
      #custom {
        color: antiquewhite;
      }
    </style>
      <body>
        <p
          style="
            background-color: black;
            border: 0.5rem solid seagreen;
            width: auto;
          "
          id="custom"
        >
          Hello, mangwu
        </p>
        <p id="default">Hello, mangwu</p>
        <div>Hello, mangwu</div>
        <script>
          const custom = document.querySelector("#custom");
          const div = document.querySelector("div");
          const defaultP = document.querySelector("#default");
    
          const customCssStyle = getComputedStyle(custom);
          const divCssStyle = getComputedStyle(div);
          const defaultPCssStyle = getComputedStyle(defaultP);
    
          for (const item of defaultPCssStyle) {
            if (defaultPCssStyle[item] !== divCssStyle[item]) {
              console.log(item, ":", defaultPCssStyle[item]);
            }
          }
    			// margin-block-end : 16px
    			// margin-block-start : 16px
    			// margin-bottom : 16px
    			// margin-top : 16px
          console.log(customCssStyle.backgroundColor); // rgb(0, 0, 0)
          console.log(customCssStyle.border); // 8px solid rgb(46, 139, 87)
          console.log(customCssStyle.color); // rgb(250, 235, 215)
          console.log(customCssStyle.width); // 1888px
          console.log(custom.style.width); // auto
        </script>
      </body>
    ```
    
    - på…ƒç´ ä½œä¸ºå—çº§å…ƒç´ æœ‰è‡ªå·±çš„ä¸€äº›å¯¹é½æ ·å¼ï¼ˆmarginç›¸å…³ï¼‰ï¼Œå±äº***user agent stylesheet***ï¼ˆç”¨æˆ·ä»£ç†æ ·å¼ï¼‰
    - ä½¿ç”¨`getComputedStyle` è·å–åˆ°çš„è§£ææ ·å¼é•¿åº¦ä¸º346ï¼ˆè°·æ­Œæµè§ˆå™¨109.0.5414.75ï¼Œç«ç‹æµè§ˆå™¨108.0.2ä¸º354ï¼‰ï¼Œå¤§éƒ¨åˆ†å€¼éƒ½æ˜¯é»˜è®¤åˆå§‹å€¼ï¼Œå¯ä»¥é€šè¿‡æ‰“å°è§‚å¯Ÿåˆ°é¢œè‰²å€¼éƒ½è§£ææˆäº†`rgb()` å½¢å¼ï¼Œé•¿åº¦å€¼éƒ½è§£ææˆäº†`px` å•ä½å½¢å¼

# 2.2 æ“ä½œæ ·å¼è¡¨ï¼ˆWorking with Style Sheetsï¼‰

- ä¸Šé¢ä¸€èŠ‚ç®€è¿°äº†å…ƒç´ çš„`style` å±æ€§ï¼Œå®ƒæ§åˆ¶ç€å…ƒç´ çš„å†…è”CSSæ ·å¼
- è€Œé€šè¿‡<link>å’Œ<style>è¿™ä¸¤ä¸ªå…ƒç´ å¼•å…¥çš„æ ·å¼è¡¨ï¼Œéœ€è¦å…¶å®ƒæ¥å£è¿›è¡Œè¡¨ç¤ºï¼Œå®ƒä»¬è¡¨ç¤ºçš„æ ·å¼è¡¨ä½¿ç”¨é€šç”¨æ ·å¼è¡¨ç±»å‹ï¼Œå³`CSSStyleSheet` ï¼Œè€Œè®¿é—®è¿™äº›é€šç”¨æ ·å¼è¡¨ç±»å‹å¯¹è±¡çš„å±æ€§å®šä¹‰åœ¨`Document` ä¸Šï¼Œæ˜¯ä¸€ä¸ª`[StyleSheetList](https://w3c.github.io/csswg-drafts/cssom/#stylesheetlist)` ç±»å‹çš„`styleSheets` å±æ€§ï¼Œåœ¨[CSSOMè§„èŒƒ](https://w3c.github.io/csswg-drafts/cssom/#dom-documentorshadowroot-stylesheets)ä¸­å®šä¹‰å¦‚ä¸‹
    
    ```jsx
    partial interface mixin DocumentOrShadowRoot {
      [SameObject] readonly attribute StyleSheetList styleSheets;
      attribute ObservableArray<CSSStyleSheet> adoptedStyleSheets;
    };
    ```
    
    - åœ¨15.DOMæ‰©å±•çš„[åœ¨DOMè§„èŒƒä¸­ï¼Œç¡®å®æœ‰ä¸€ä¸ª**æ··å…¥**ï¼ˆ**mixin**ï¼‰æ¥å£****`[DocumentOrShadowRoot](https://dom.spec.whatwg.org/#documentorshadowroot)`** ,å®ƒçš„å®šä¹‰å¦‚ä¸‹](../15%20DOM%E6%89%A9%E5%B1%95/3%20HTML5.md) ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“â€œ`Document`å’Œ`ShadowRoot` å…±äº«`DocumentOrShadowRoot` å®šä¹‰çš„å±æ€§å’Œæ–¹æ³•ï¼Œä½†æ˜¯HTMLè§„èŒƒå¹¶æœªç»™å‡ºå…·ä½“çš„å±æ€§å’Œæ–¹æ³•â€
    - è¿™é‡ŒCSSOMè§„èŒƒåœ¨è¿™ä¸ªæ¥å£ä¸­å®šä¹‰äº†ä¸€ä¸ª`styleSheets` åªè¯»å±æ€§å’Œ`adoptedStyleSheets` å±æ€§
        - å‰è€…æ˜¯æœ¬èŠ‚äº†è§£é€šç”¨æ ·å¼è¡¨ç±»å‹çš„é‡è¦å±æ€§ï¼Œè¿™ä¸ªå¯¹è±¡å¯¹åº”çš„æ˜¯é€šè¿‡å¼•å…¥æˆ–è€…åµŒå…¥æ–‡æ¡£ä¸­çš„æ ·å¼è¡¨ï¼Œå®ƒæ˜¯ä¸€ä¸ª`StyleSheetList` ç±»å‹
        - åè€…ç”¨äºè®¾ç½®æ–‡æ¡£ä½¿ç”¨çš„æ„é€ æ ·å¼è¡¨æ•°ç»„ï¼Œæ„é€ æ ·å¼è¡¨å°±æ˜¯ä½¿ç”¨`CSSStyleSheet()` æ„é€ å‡½æ•°åˆ›å»ºçš„å®ä¾‹ï¼Œæ²¡æœ‰è¿›è¡Œåˆ›å»ºè®¾ç½®ï¼Œ`adoptedStyleSheets` é€šå¸¸éƒ½æ˜¯ç©ºæ•°ç»„ï¼Œæ‰€è°“çš„`[ObservableArray](https://webidl.spec.whatwg.org/#idl-observable-array)` æ˜¯å¯è§‚å¯Ÿæ•°ç»„ç±»å‹æ˜¯ä¸€ç§å‚æ•°åŒ–ç±»å‹ï¼Œå…¶å€¼æ˜¯å¯¹Tç±»å‹ï¼ˆæœ¬IDLä¸­æ˜¯`CSSStyleSheet`ï¼‰å¯¹è±¡çš„å¯å˜åˆ—è¡¨ç»„åˆçš„å¼•ç”¨ï¼Œä»¥åŠå¼€å‘è€…ä»£ç ä¿®æ”¹åˆ—è¡¨å†…å®¹æ—¶æ‰§è¡Œçš„è¡Œä¸º
    - `StyleSheetList` æ¥å£çš„å®šä¹‰åœ¨[CSSOMä¸­çš„IDL](https://w3c.github.io/csswg-drafts/cssom/#stylesheetlist)ä¸­å®šä¹‰å¦‚ä¸‹
        
        ```jsx
        [Exposed=Window]
        interface StyleSheetList {
          getter CSSStyleSheet? item(unsigned long index);
          readonly attribute unsigned long length;
        };
        ```
        
        - å¯ä»¥çœ‹å‡ºå°±æ˜¯ä¸€ä¸ªåªè¯»çš„ç±»æ•°ç»„åˆ—è¡¨ï¼Œæœ‰ä¸€ä¸ª`length` å±æ€§è¡¨ç¤ºé•¿åº¦
        - ä½¿ç”¨ä¸­æ‹¬å·è¯­æ³•å’Œ`item(index)` ç­‰ä»·è°ƒç”¨æŒ‡å®š`CSSStyleSheet` å¯¹è±¡
    - `CSSStyleSheet` æ¥å£åœ¨[CSSOMè§„èŒƒ](https://w3c.github.io/csswg-drafts/cssom/#cssstylesheet)ä¸­çš„æ˜ç¡®å®šä¹‰å¦‚ä¸‹
        
        ```jsx
        [Exposed=Window]
        interface CSSStyleSheet : StyleSheet {
          constructor(optional CSSStyleSheetInit options = {});
        
          readonly attribute CSSRule? ownerRule;
          [SameObject] readonly attribute CSSRuleList cssRules;
          unsigned long insertRule(CSSOMString rule, optional unsigned long index = 0);
          undefined deleteRule(unsigned long index);
        
          Promise<CSSStyleSheet> replace(USVString text);
          undefined replaceSync(USVString text);
        };
        
        dictionary CSSStyleSheetInit {
          DOMString baseURL = null;
          (MediaList or DOMString) media = "";
          boolean disabled = false;
        };
        ```
        
        - `CSSStyleSheet` æ¥å£æœ¬èº«ç»§æ‰¿äº`StyleSheet` ï¼Œ`StyleSheet` æœ¬èº«å¯ä»¥ä½œä¸ºä¸€ä¸ªéCSSæ ·å¼è¡¨çš„åŸºç±»ï¼ˆå¦‚lessï¼Œsassç­‰æ ·å¼è¡¨ä¹Ÿä»¥æ­¤ä¸ºåŸºç±»ï¼‰
        - `CSSRule` å’Œ`CSSRuleList` å°†åœ¨åæ–‡è®¨è®º
    - `StyleSheet` æ¥å£åœ¨CSSOMè§„èŒƒä¸­çš„æ˜ç¡®å®šä¹‰å¦‚ä¸‹
        
        ```jsx
        [Exposed=Window]
        interface StyleSheet {
          readonly attribute CSSOMString type;
          readonly attribute USVString? href;
          readonly attribute (Element or ProcessingInstruction)? ownerNode;
          readonly attribute CSSStyleSheet? parentStyleSheet;
          readonly attribute DOMString? title;
          [SameObject, PutForwards=mediaText] readonly attribute MediaList media;
          attribute boolean disabled;
        };
        ```
        
        - [å®ç°MediaListæ¥å£çš„å¯¹è±¡æœ‰ä¸€ä¸ªç›¸å…³çš„åª’ä½“æŸ¥è¯¢é›†åˆ](https://w3c.github.io/csswg-drafts/cssom/#medialist)
- `CSSStyleSheet` ä»`StyleSheet` æ¥å£ç»§æ‰¿çš„å±æ€§å¦‚ä¸‹
    - [ ]  `disabled`ï¼Œå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ ·å¼è¡¨æ˜¯å¦è¢«ç¦ç”¨äº†ï¼ˆè¿™ä¸ªå±æ€§å€¼æ˜¯å¯è¯»å†™çš„ï¼Œå› æ­¤å°†å…¶è®¾ç½®ä¸º`true` ä¼šç¦ç”¨æ ·å¼è¡¨ï¼‰
    - [ ]  `href`ï¼Œå¦‚æœä½¿ç”¨<link>åŒ…å«çš„æ ·å¼è¡¨ï¼Œåˆ™è¿”å›æ ·å¼è¡¨çš„URLï¼Œå¦åˆ™è¿”å›`null`
    - [ ]  `media` ï¼Œæ ·å¼è¡¨æ”¯æŒçš„åª’ä½“ç±»å‹é›†åˆï¼Œè¿™ä¸ªé›†åˆæœ‰ä¸€ä¸ª`length`å±æ€§å’Œä¸€ä¸ª`item()` æ–¹æ³•ï¼Œè·Ÿæ‰€æœ‰DOMé›†åˆä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨ä¸­æ‹¬å·è¯­æ³•è®¿é—®é›†åˆä¸­çš„ç‰¹å®šé¡¹ï¼Œå¦‚æœæ ·å¼è¡¨å¯ä»¥ç”¨äºæ‰€æœ‰åª’ä½“ï¼Œåˆ™è¿”å›ç©ºåˆ—è¡¨
    - [ ]  `ownerNode` ï¼ŒæŒ‡å‘æ‹¥æœ‰å½“å‰æ ·å¼è¡¨çš„èŠ‚ç‚¹ï¼Œåœ¨HTMLä¸­è¦ä¹ˆæ˜¯<link>å…ƒç´ è¦ä¹ˆæ˜¯<style>å…ƒç´ ï¼ˆåœ¨XMLä¸­å¯ä»¥æ˜¯å¤„ç†æŒ‡ä»¤ï¼‰ï¼Œå¦‚æœå½“å‰æ ·å¼è¡¨ç¤ºæ˜¯é€šè¿‡@importè¢«åŒ…å«åœ¨å¦ä¸€ä¸ªæ ·å¼è¡¨ä¸­çš„ï¼Œåˆ™è¿™ä¸ªå±æ€§å€¼ä¸º`null`
    - [ ]  `parentStyleSheet` ï¼Œå¦‚æœå½“å‰æ ·å¼è¡¨æ˜¯é€šè¿‡@importè¢«åŒ…å«åœ¨å¦ä¸€ä¸ªæ ·å¼è¡¨ä¸­ï¼Œåˆ™è¿™ä¸ªå±æ€§æŒ‡å‘å¯¼å…¥å®ƒçš„æ ·å¼è¡¨
    - [ ]  `title` ï¼Œ`ownerNode` çš„`title` å±æ€§ï¼Œæ²¡æœ‰å®šä¹‰å°±æ˜¯`null`
    - [ ]  `type` ï¼Œå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæ ·å¼è¡¨çš„ç±»å‹ï¼Œå¯¹CSSæ ·å¼è¡¨è€Œè¨€å°±æ˜¯â€text/cssâ€
    - ä¸Šé¢çš„å±æ€§é™¤äº†`disabled` å…¶å®ƒéƒ½æ˜¯åªè¯»çš„
- `CSSStyleSheet` æ¥å£æœ¬èº«å®šä¹‰çš„å±æ€§å’Œæ–¹æ³•å¦‚ä¸‹
    - [ ]  `cssRules` ,å½“å‰æ ·å¼è¡¨åŒ…å«çš„æ ·å¼è§„åˆ™çš„é›†åˆ
    - [ ]  `ownerRule` ,å¦‚æœæ ·å¼è¡¨ç¤ºæ˜¯é€šè¿‡@importå¯¼å…¥çš„ï¼Œåˆ™æŒ‡å‘å¯¼å…¥è§„åˆ™ï¼Œå¦åˆ™ä¸º`null`
    - [ ]  `deleteRule(index)` ï¼Œåœ¨æŒ‡å®šä½ç½®åˆ é™¤`cssRules` ä¸­çš„è§„åˆ™
    - [ ]  `insertRule(rule, index)` ï¼Œåœ¨æŒ‡å®šä½ç½®å‘`cssRules` ä¸­æ’å…¥è§„åˆ™
    - [ ]  `replace(text)` ï¼Œä»¥ä¼ å…¥çš„å†…å®¹å¼‚æ­¥æ›¿æ¢æ ·å¼è¡¨çš„å†…å®¹ï¼Œè¯¥æ–¹æ³•è¿”å›ç”¨CSSStyleSheetå¯¹è±¡è§£æçš„æ‰¿è¯º
    - [ ]  `replaceSync(text)` ï¼Œä»¥ä¼ å…¥çš„å†…å®¹åŒæ­¥æ›¿æ¢æ ·å¼è¡¨çš„å†…å®¹
- é€šè¿‡<link>å’Œ<style>å…ƒç´ ä¹Ÿèƒ½ç›´æ¥è·å–CSSStyleSheetå¯¹è±¡ï¼ŒDOMåœ¨è¿™ä¸¤ä¸ªå…ƒç´ ä¸Šæš´éœ²äº†`sheet` å±æ€§ï¼ŒåŒ…å«å¯¹åº”çš„`CSSStyleSheet` å¯¹è±¡ï¼ŒCSSOMå®šä¹‰äº†ä¸€ä¸ªæ··åˆæ¥å£`[LinkStyle](https://drafts.csswg.org/cssom/#the-linkstyle-interface)` ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ··åˆæ¥å£ï¼Œ`HTMLStyleElement` å’Œ`HTMLLinkElement` éƒ½åŒ…å«å®ƒ
    
    ```jsx
    interface mixin LinkStyle {
      readonly attribute CSSStyleSheet? sheet;
    };
    
    HTMLLinkElement includes LinkStyle;
    HTMLStyleElement includes LinkStyle;
    
    ```
    
- `document.styleSheets` è¿”å›çš„æ ·å¼è¡¨åˆ—è¡¨ä¸­ä¼šåŒ…å«æ‰€æœ‰`<style>` å…ƒç´ ï¼Œä»¥åŠ`rel` å±æ€§è®¾ç½®ä¸ºâ€stylesheetâ€çš„<link>å…ƒç´ 
    
    ```jsx
    <link rel="stylesheet" href="style.css" />
    <style>
      p {
        color: aqua;
      }
    </style>
    <body>
      <p style="background-color: gray">Hello, mangwu</p>
      <script>
        const link = document.querySelector("link");
        const style = document.querySelector("style");
        console.log(link.sheet);
        console.log(style.sheet);
        console.log(document.styleSheets);
        console.log(document.styleSheets[0] === link.sheet);
        console.log(document.styleSheets[1] === style.sheet);
      </script>
    </body>
    // æ‰“å°ç»“æœ
    CSSStyleSheet {}
    CSSStyleSheet {}
    StyleSheetListÂ {0: CSSStyleSheet, 1: CSSStyleSheet, length: 2}
    true
    true
    ```
    

## 2.2.1 CSSè§„åˆ™

- åœ¨ä¸Šé¢çš„IDLå®šä¹‰ä¸­æ—¶å¸¸çœ‹åˆ°`CSSRule`å’Œ`CSSRuleList` æ¥å£ï¼Œå‰è€…å°±æ˜¯CSSè§„åˆ™ï¼Œåè€…æ˜¯CSSè§„åˆ™åˆ—è¡¨
- åœ¨[CSSOM](https://drafts.csswg.org/cssom/#the-cssrule-interface)è§„èŒƒä¸‹ï¼Œ`CSSRule` ç±»å‹è¡¨ç¤ºæ ·å¼è¡¨ä¸­çš„**ä¸€æ¡è§„åˆ™**ï¼Œè¿™ä¸ªç±»å‹ä¹Ÿæ˜¯ä¸€ä¸ªé€šç”¨åŸºç±»ï¼Œå¾ˆå¤šç±»å‹éƒ½ç»§æ‰¿å®ƒï¼Œå…¶IDLå®šä¹‰å¦‚ä¸‹
    
    ```jsx
    [Exposed=Window]
    interface CSSRule {
      attribute CSSOMString cssText;
      readonly attribute CSSRule? parentRule;
      readonly attribute CSSStyleSheet? parentStyleSheet;
    
      // the following attribute and constants are historical
      readonly attribute unsigned short type;
      const unsigned short STYLE_RULE = 1;
      const unsigned short CHARSET_RULE = 2;
      const unsigned short IMPORT_RULE = 3;
      const unsigned short MEDIA_RULE = 4;
      const unsigned short FONT_FACE_RULE = 5;
      const unsigned short PAGE_RULE = 6;
      const unsigned short MARGIN_RULE = 9;
      const unsigned short NAMESPACE_RULE = 10;
    };
    ```
    
- CSSè§„åˆ™ä¹Ÿéä¸ºå‡ ç§ï¼Œå…¶ä¸­æœ€å¸¸è§çš„å°±æ˜¯è¡¨ç¤ºæ ·å¼ä¿¡æ¯çš„è§„åˆ™`CSSStyleRule` ï¼ˆå…¶å®ƒCSSè§„åˆ™å¦‚@importï¼Œ@pageç­‰ï¼‰ï¼Œå®ƒç»§æ‰¿`CSSRule` ï¼Œå¦‚ä¸‹
    
    ```jsx
    [Exposed=Window]
    interface CSSStyleRule : CSSRule {
      attribute CSSOMString selectorText;
      [SameObject, PutForwards=cssText] readonly attribute CSSStyleDeclaration style;
    };
    ```
    
    - [ ]  `cssText` è¿”å›æ•´æ¡è§„åˆ™çš„æ–‡æœ¬ï¼Œè¿™é‡Œçš„æ–‡æœ¬å¯èƒ½ä¸æ ·å¼è¡¨ä¸­å®é™…çš„æ–‡æœ¬ä¸ä¸€æ ·ï¼Œå› ä¸ºæµè§ˆå™¨å†…éƒ¨å¤„ç†æ ·å¼è¡¨çš„æ–¹å¼ä¹Ÿä¸ä¸€æ ·ï¼ŒSafariå§‹ç»ˆä¼šæŠŠæ‰€æœ‰å­—æ¯éƒ½è½¬æ¢æˆå°å†™
    - [ ]  `parentRule` å¦‚æœè¿™æ¡è§„åˆ™è¢«å…¶å®ƒè§„åˆ™ï¼ˆå¦‚@mediaï¼‰åŒ…å«ï¼Œåˆ™æŒ‡å‘åŒ…å«è§„åˆ™ï¼Œå¦åˆ™å°±æ˜¯`null`
    - [ ]  `parentStyleSheet` åŒ…å«å½“å‰è§„åˆ™çš„æ ·å¼è¡¨
    - [ ]  `selectorText` è¿”å›è§„åˆ™çš„é€‰æ‹©ç¬¦æ–‡æœ¬ï¼Œè¿™é‡Œçš„æ–‡æœ¬å¯èƒ½ä¸æ ·å¼è¡¨ä¸­å®é™…çš„æ–‡æœ¬ä¸ä¸€æ ·ï¼Œå› ä¸ºæµè§ˆå™¨å†…éƒ¨å¤„ç†æ ·å¼è¡¨çš„æ–¹å¼ä¹Ÿä¸ä¸€æ ·
    - [ ]  `style` è¿”å›`CSSStyleDeclaration` å¯¹è±¡ï¼Œå¯ä»¥è®¾ç½®å’Œè·å–å½“å‰è§„åˆ™ä¸­çš„æ ·å¼
    - [ ]  `type` æ•°å€¼å¸¸é‡ï¼Œè¡¨ç¤ºè§„åˆ™ç±»å‹ï¼Œå¯¹äºæ ·å¼è§„åˆ™ï¼Œå®ƒå§‹ç»ˆä¸º1
- åœ¨æ‰€æœ‰è¿™äº›å±æ€§ä¸­ï¼Œä½¿ç”¨æœ€å¤šçš„æ˜¯`cssText`ã€`selectorText` å’Œ`style`
    - CSSè§„åˆ™çš„`cssText` å±æ€§ä¸`style.cssText` ä¸åŒï¼Œå‰è€…åŒ…å«**é€‰æ‹©ç¬¦æ–‡æœ¬**å’Œ**ç¯ç»•æ ·å¼å£°æ˜çš„å¤§æ‹¬å·**ï¼Œåè€…**åªåŒ…å«æ ·å¼å£°æ˜**
    - `cssRule`çš„`cssText`æ˜¯åªè¯»çš„ï¼Œè€Œ`style.cssText` å¯ä»¥è¢«é‡å†™
- `StyleSheetList` ç±»å‹çš„`styleSheets` åˆ—è¡¨ä¸­çš„æ ·å¼è¡¨ï¼ˆ`CSSStyleSheet` ï¼‰å¯¹è±¡æ‹¥æœ‰ä¸€ä¸ª`cssRules` å±æ€§ï¼Œå…¶ä¸­åŒ…å«è¯¥æ ·å¼è¡¨æ‰€æœ‰çš„CSSè§„åˆ™ï¼Œå¦‚ä¸Šæ‰€è¿°ï¼Œä¸€ä¸ªCSSè§„åˆ™æ—¢å¯ä»¥é€šè¿‡`style` å±æ€§è·å–å¯¹åº”è§„åˆ™çš„`CSSStyleDeclaration` å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥é€šè¿‡`cssText` ç›´æ¥è·å¾—å®ƒæ‰€è¡¨ç¤ºçš„è§„åˆ™ï¼Œå¦‚ä¸‹
    
    ```jsx
    <style>
      p {
        color: antiquewhite;
        width: 80%;
        background-color: black;
      }
      div {
        margin: 0;
      }
    </style>
    <p>Hello, mangwu</p>
    <script>
      const rules = document.styleSheets[0].cssRules;
      for (const rule of rules) {
        console.log(rule.selectorText); // p div
        console.log(rule.cssText); // p { color: antiquewhite; width: 80%; background-color: black; }
    															 // div { margin: 0px; }
        console.log(rule.style.cssText); // color: antiquewhite; width: 80%; background-color: black;
    																		// margin: 0px;
        console.log(rule.style.color); // antiquewhite
        console.log(rule.style.width); // 80%
        console.log(rule.style.backgroundColor); // black
      }
    </script>
    ```
    
    - å¯ä»¥ç¡®å®šä¸€æ¡CSSè§„åˆ™å°±æ˜¯ä¸€ä¸ª**é€‰æ‹©ç¬¦æ–‡æœ¬ï¼ˆselector textï¼‰**åŠå…¶**ç¯ç»•æ ·å¼å£°æ˜çš„å¤§æ‹¬å·**ï¼Œä½¿ç”¨`CSSStyleRule` å¯¹è±¡çš„`cssText` å±æ€§ä¼šç›´æ¥å¾—åˆ°CSSè§„åˆ™çš„å†…å®¹
    - ä½¿ç”¨CSSè§„åˆ™çš„`style` å°±åƒä½¿ç”¨å…ƒç´ çš„`style` ä¸€æ ·ï¼Œå®ƒçš„`cssText` å±æ€§**åªåŒ…å«æ ·å¼å£°æ˜**ï¼Œæ¯”è¾ƒæ˜¾è‘—çš„åŒºåˆ«åœ¨äºï¼Œä¿®æ”¹CSSè§„åˆ™çš„`style` å¯¹è±¡ä¸Šçš„CSSå±æ€§å€¼ï¼Œä¼šå¯¼è‡´CSSè§„åˆ™çš„é€‰æ‹©ç¬¦æ–‡æœ¬åŒ¹é…çš„å…ƒç´ çš„æ ·å¼éƒ½å—åˆ°å½±å“ï¼Œè€Œå…ƒç´ çš„`style` å±æ€§åªä¼šä½œç”¨åˆ°å…ƒç´ æœ¬èº«

## 2.2.2 åˆ›å»ºè§„åˆ™ åˆ é™¤è§„åˆ™

- å¦‚ä¸Šæ‰€æï¼Œ[`CSSStyleSheet` æ¥å£æœ¬èº«å®šä¹‰çš„å±æ€§å’Œæ–¹æ³•å¦‚ä¸‹](2%20%E6%A0%B7%E5%BC%8F.md) ï¼Œ`CSSStylesheet` æ¥å£å®šä¹‰äº†`CSSRule` å¯¹è±¡çš„æ’å…¥å’Œåˆ é™¤æ–¹æ³•
    - ä½¿ç”¨`insertRule()` æ–¹æ³•å‘æ ·å¼è¡¨ï¼ˆcssRulesï¼‰ä¸­æ·»åŠ æ–°è§„åˆ™ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè§„åˆ™çš„æ–‡æœ¬ï¼›ç¬¬äºŒä¸ªå‚æ•°ä¸ºæ’å…¥çš„ä½ç½®
    - ä½¿ç”¨`deleteRule()` æ–¹æ³•åˆ é™¤æ ·å¼è¡¨ï¼ˆcssRulesï¼‰ä¸­çš„è§„åˆ™ï¼Œæ¥æ”¶è¦åˆ é™¤è§„åˆ™çš„ç´¢å¼•
    
    ---
    
    - ä½¿ç”¨è¿™ä¸¤ä¸ªæ–¹æ³•æ’å…¥å’Œåˆ é™¤CSSè§„åˆ™å¹¶ä¸æ˜¯åœ¨Webå¼€å‘ä¸­å¸¸è§çš„åšæ³•ï¼Œéšç€ç»´æŠ¤çš„CSSè§„åˆ™å˜å¤šï¼Œä½¿ç”¨å®ƒä»¬ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œè¿™ä¸ªæ—¶å€™æ›´å¥½çš„æ–¹å¼å°±æ˜¯ç¬¬14ç« å·²ç»ä»‹ç»è¿‡çš„åŠ¨æ€æ ·å¼åŠ è½½æŠ€æœ¯[2.2 åŠ¨æ€æ ·å¼](../14%20DOM/2%20DOM%E7%BC%96%E7%A8%8B.md)
    
    ```jsx
    <style>
      p {
        color: antiquewhite;
      }
      #myP {
        background-color: blueviolet;
      }
    </style>
    <p id="myP">Hello, mangwu</p>
    <script>
      const styleSheet = document.styleSheets[0];
      styleSheet.insertRule("body { background-color: silver }", 1); // ä½¿ç”¨DOMæ–¹æ³•
      styleSheet.deleteRule(2);
    </script>
    ```
    
    - æœ€ç»ˆç»“æœå°±æ˜¯æ–‡æ¡£æœ‰ä¸€ä¸ªæ ·å¼è¡¨ï¼Œè¿™ä¸ªæ ·å¼è¡¨ä¸­æœ‰ä¸¤ä¸ªCSSè§„åˆ™ï¼Œåˆ†åˆ«æ˜¯æœ¬æ¥å­˜åœ¨çš„`p { color: antiquewhite; }` å’Œåæ¥æ’å…¥çš„`body { background-color: silver }` ,  è€Œ`#myP { background-color: blueviolet;  }` ä½¿ç”¨`deleteRule` æ–¹æ³•è¢«åˆ é™¤

# 2.3 å…ƒç´ å°ºå¯¸ï¼ˆElement Dimensionsï¼‰

- DOMä¸€ç›´ç¼ºä¹é¡µé¢ä¸­å…ƒç´ å®é™…å°ºå¯¸çš„è§„å®šï¼ŒIEç‡å…ˆå¢åŠ äº†ä¸€äº›å±æ€§ï¼Œåæ¥ä¸HTMLå…ƒç´ çš„æ ·å¼æœ‰å…³çš„å…ƒç´ å°ºå¯¸å±æ€§è¢«è§„èŒƒäº†èµ·æ¥ï¼Œå¯ä»¥åœ¨[CSSOM View Module](https://w3c.github.io/csswg-drafts/cssom-view/#dom-htmlelement-offsetheight) è§„èŒƒä¸Šæ‰¾åˆ°å…·ä½“çš„å±æ€§
- ä¹‹å‰äº†è§£è¿‡[1.4 çª—å£å¤§å°ï¼ˆWindow Sizeï¼‰](../12%20%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B%EF%BC%88The%20Brower%20Object%20Model%EF%BC%89/1%20window%E5%AF%B9%E8%B1%A1%EF%BC%88The%20window%E5%AF%B9%E8%B1%A1%EF%BC%89.md) çš„çª—å£å¤§å°ï¼ˆ`inner/outer/Height/Width`ï¼‰ï¼Œ[4.0 è§„èŒƒä¸­çš„Screen æ¥å£](../12%20%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B%EF%BC%88The%20Brower%20Object%20Model%EF%BC%89/4%20screen%E5%AF%B9%E8%B1%A1.md) çš„å±å¹•åƒç´ å°ºå¯¸ï¼ˆ`width/height`ï¼‰ï¼Œä»¥åŠ[1.4.2 documentè¡¨ç¤ºå°ºå¯¸çš„å±æ€§](../12%20%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B%EF%BC%88The%20Brower%20Object%20Model%EF%BC%89/1%20window%E5%AF%B9%E8%B1%A1%EF%BC%88The%20window%E5%AF%B9%E8%B1%A1%EF%BC%89.md) ä¸­é¢å¤–æåˆ°çš„`document.documentElement` å¯¹è±¡çš„`clientWidth/Height`
    - è¿™äº›éƒ½æ˜¯åœ¨çª—å£å°ºå¯¸ï¼Œè§†å£å°ºå¯¸å’Œå±å¹•å°ºå¯¸çš„è§’åº¦è§£è¯»å°ºå¯¸
    - è€Œæœ¬èŠ‚å°†è§£æå…ƒç´ å°ºå¯¸ï¼ŒåŒ…æ‹¬æåˆ°è¿‡çš„è¢«ç”¨ä½œè§†å£å°ºå¯¸çš„`clientWidth/Height`
- ä¸‹é¢æ‰€æœ‰çš„å±æ€§éƒ½åœ¨[CSSOMè§„èŒƒçš„`Element` æ¥å£](https://w3c.github.io/csswg-drafts/cssom-view/#extension-to-the-element-interface)å’Œ[HTMLElementæ¥å£](https://w3c.github.io/csswg-drafts/cssom-view/#extensions-to-the-htmlelement-interface)ä¸Šæœ‰å¯¹åº”çš„å®šä¹‰å¦‚ä¸‹
    
    ```jsx
    enum ScrollLogicalPosition { "start", "center", "end", "nearest" };
    dictionary ScrollIntoViewOptions : ScrollOptions {
      ScrollLogicalPosition block = "start";
      ScrollLogicalPosition inline = "nearest";
    };
    
    dictionary CheckVisibilityOptions {
        boolean checkOpacity = false;
        boolean checkVisibilityCSS = false;
    };
    
    partial interface Element {
      DOMRectList getClientRects();
      [NewObject] DOMRect getBoundingClientRect();
    
      boolean checkVisibility(optional CheckVisibilityOptions options = {});
    
      undefined scrollIntoView(optional (boolean or ScrollIntoViewOptions) arg = {});
      undefined scroll(optional ScrollToOptions options = {});
      undefined scroll(unrestricted double x, unrestricted double y);
      undefined scrollTo(optional ScrollToOptions options = {});
      undefined scrollTo(unrestricted double x, unrestricted double y);
      undefined scrollBy(optional ScrollToOptions options = {});
      undefined scrollBy(unrestricted double x, unrestricted double y);
      **attribute unrestricted double scrollTop;
      attribute unrestricted double scrollLeft;
      readonly attribute long scrollWidth;
      readonly attribute long scrollHeight;
      readonly attribute long clientTop;
      readonly attribute long clientLeft;
      readonly attribute long clientWidth;
      readonly attribute long clientHeight;**
    };
    
    partial interface HTMLElement {
      **readonly attribute Element? offsetParent;
      readonly attribute long offsetTop;
      readonly attribute long offsetLeft;
      readonly attribute long offsetWidth;
      readonly attribute long offsetHeight;**
    };
    ```
    

## 2.3.1 åç§»å°ºå¯¸ï¼ˆoffset dimensionsï¼‰

- ç¬¬ä¸€ç»„å±æ€§è®¾è®¡**åç§»å°ºå¯¸ï¼ˆoffset dimensionsï¼‰ï¼Œ***~~åŒ…å«å…ƒç´ åœ¨å±å¹•ä¸Šå ç”¨çš„æ‰€æœ‰è§†è§‰ç©ºé—´~~*ï¼Œå…ƒç´ åœ¨é¡µé¢ä¸Šçš„è§†è§‰ç©ºé—´ç”±å…¶é«˜åº¦å’Œå®½åº¦å†³å®š
    - **å†…è¾¹è·**
    - **æ»šåŠ¨æ¡**
    - **è¾¹æ¡†**ï¼ˆä¸åŒ…å«å¤–è¾¹è·ï¼‰
    
    ---
    
    - **è¡¥å……ï¼šã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ï¼ˆç¬¬4ç‰ˆï¼‰ã€‹**æ‰€è¯´çš„å±å¹•ä¸Šå ç”¨çš„è§†è§‰ç©ºé—´**æœ‰æ­§ä¹‰**ï¼Œå¯ä»¥ä¸ç”¨ä½¿ç”¨è¿™ç§å®šä¹‰ï¼Œä½¿ç”¨MDNçš„å®šä¹‰ï¼š`HTMLElement.offsetWidth/Height` åªè¯»å±æ€§ä»¥æ•´æ•°å½¢å¼è¿”å›å…ƒç´ çš„**å¸ƒå±€å®½åº¦/é«˜åº¦**ï¼Œå¸ƒå±€è§†å£ç›¸å…³çŸ¥è¯†æŸ¥çœ‹[é¦–å…ˆè¦ææ¸…æ¥š**å¯è§è§†å£ï¼ˆvisual viewportï¼‰**ï¼Œ**å¸ƒå±€è§†å£ï¼ˆlayout viewportï¼‰**æŒ‡çš„æ˜¯ä»€ä¹ˆï¼Œä¸ç„¶ä¹Ÿæ— æ³•çŸ¥æ™“é€šè¿‡`clientWidth`å’Œ`clientHeigt` è·å¾—çš„é•¿åº¦æœ‰ä»€ä¹ˆæ„ä¹‰](../12%20%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B%EF%BC%88The%20Brower%20Object%20Model%EF%BC%89/1%20window%E5%AF%B9%E8%B1%A1%EF%BC%88The%20window%E5%AF%B9%E8%B1%A1%EF%BC%89.md)
- ä»¥ä¸‹4ä¸ªå±æ€§ç”¨äºå–å¾—å…ƒç´ çš„åç§»å°ºå¯¸
    - [ ]  `offsetHeight` ï¼Œå…ƒç´ åœ¨å‚ç›´æ–¹å‘ä¸Šå ç”¨çš„åƒç´ å°ºå¯¸ï¼ŒåŒ…å«å®ƒçš„é«˜åº¦ï¼Œæ°´å¹³æ»šåŠ¨æ¡é«˜åº¦ï¼ˆå¦‚æœå¯è§ï¼‰å’Œä¸Šä¸‹è¾¹æ¡†çš„é«˜åº¦
    - [ ]  `offsetLeft` ï¼Œå…ƒç´ å·¦è¾¹æ¡†å¤–ä¾§è·ç¦»åŒ…å«å…ƒç´ å·¦è¾¹æ¡†å†…ä¾§çš„åƒç´ æ•°
    - [ ]  `offsetTop` ï¼Œå…ƒç´ ä¸Šè¾¹æ¡†å¤–ä¾§è·ç¦»åŒ…å«å…ƒç´ ä¸Šè¾¹æ¡†å†…ä¾§çš„åƒç´ æ•°
    - [ ]  `offsetWidth` ï¼Œå…ƒç´ åœ¨æ°´å¹³æ–¹å‘ä¸Šå ç”¨çš„åƒç´ å°ºå¯¸ï¼ŒåŒ…æ‹¬å®ƒçš„å®½åº¦ã€å‚ç›´æ»šåŠ¨æ¡å®½åº¦ï¼ˆå¦‚æœå¯è§ï¼‰å’Œå·¦ï¼Œå³è¾¹æ¡†çš„å®½åº¦
    - [ ]  `offsetParent` ï¼ŒåŒ…å«å…ƒç´ ï¼Œ`offsetLeft`å’Œ`offsetTop` éƒ½æ˜¯ç›¸å¯¹äºåŒ…å«å…ƒç´ çš„ï¼Œ`offsetParent` ä¸ä¸€å®šæ˜¯`parentNode` ï¼Œæ¯”å¦‚<td>å…ƒç´ çš„`offsetParent` æ˜¯ä½œä¸ºå…¶ç¥–å…ˆçš„<table>å…ƒç´ ï¼Œå› ä¸º<table>æ˜¯èŠ‚ç‚¹å±‚çº§ä¸­ç¬¬ä¸€ä¸ªæä¾›å°ºå¯¸çš„å…ƒç´ 
        - å…³äº`offsetParent` å…ƒç´ çš„ç¡®å®šï¼Œå¯ä»¥å‚è€ƒ[MDN-offsetParent](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetParent)
            - å¯¹ä½ç½®æœ€è¿‘(åŒ…å«å±‚æ¬¡ç»“æ„ä¸­æœ€è¿‘)çš„ç¥–å…ˆå…ƒç´ çš„å¼•ç”¨
            - ç¬¬ä¸€ä¸ªéé™æ€ï¼ˆnon-staticï¼‰ä½ç½®å…ƒç´ 
            - æˆ–è€…å…ƒç´ æœ¬èº«æ˜¯é™æ€å®šä½çš„ï¼Œæ‰¾æ‰“ç¬¬ä¸€ä¸ª<td> <th> <table>å…ƒç´ 
            - å¦‚æœéƒ½æ²¡æœ‰æ‰¾åˆ°ï¼Œé‚£å°±æ˜¯<body>å…ƒç´ 
        - é™¤æ­¤ä¹‹å¤–`offsetParent` å¯èƒ½ä¸º`null`
            - å…ƒç´ æœ¬èº«æˆ–å…ƒç´ çš„ç¥–å…ˆ`display`ä¸º`none`
            - å…ƒç´ çš„`position` è¢«è®¾ç½®ä¸º`fixed` ï¼ˆç«ç‹æµè§ˆå™¨ä»ç„¶è¿”å›<body>å…ƒç´ ï¼‰
            - å…ƒç´ æœ¬èº«æ˜¯<body>æˆ–<html>å…ƒç´ 
- ä¸‹å›¾æ˜¯ä¸€ä¸ªè¡¨ç¤ºåç§»å°ºå¯¸çš„å½¢è±¡å›¾
    
    ![åç§»å°ºå¯¸.png](2%20%E6%A0%B7%E5%BC%8F/%25E5%2581%258F%25E7%25A7%25BB%25E5%25B0%25BA%25E5%25AF%25B8.png)
    
    - ä¸Šè¿°å›¾å½¢å‚è€ƒã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ï¼ˆç¬¬4ç‰ˆï¼‰ã€‹ä¸­çš„å›¾16-1
    - å®é™…ä¸Šæœ‰*æ˜æ˜¾çš„é”™è¯¯*ï¼Œå³`offsetTop` å’Œ`offsetLeft` å¯èƒ½ä¸æ˜¯å›¾å½¢è¡¨ç¤ºçš„é‚£æ ·ç®€å•è®¡ç®—çš„ï¼Œå› ä¸º`offsetParent` å…ƒç´ å†…å¯èƒ½åŒ…å«**å¯æ»šåŠ¨çš„åŒºåŸŸ**ï¼Œå®é™…çš„`offsetTop/Left` åº”è¯¥æ˜¯å›¾ç¤ºçš„é•¿åº¦å„è‡ªåŠ ä¸Š`offsetParent`å…ƒç´ çš„æ»šåŠ¨åç§»é‡ï¼ˆscrollTopå’ŒscrollLeftï¼‰
    - ä¸€ä¸ªç®€å•çš„ä¾‹å­å°±æ˜¯åœ¨`offsetParent` å’Œ`element` ä¹‹é—´æ·»åŠ ä¸€ä¸ªå—çº§å…ƒç´ ï¼Œå®ƒçš„åŒºåŸŸæ¯”`offsetParent` å…ƒç´ æ›´å¤§ï¼Œé‚£ä¹ˆå°±ä¼šæœ‰å½¢æˆæ»šåŠ¨ï¼Œå¦‚ä¸‹
        
        ```jsx
        // html
        <div id="wrapper">
          <div id="container">
            <div id="box"></div>
          </div>
        </div>
        
        // css
        #wrapper {
          width: 700px;
          height: 700px;
          position: relative;
          margin: 80px auto;
          background-color: antiquewhite;
          border: 1px solid gray;
          padding: 9px;
          overflow: auto;
        }
        
        #container {
          width: 1000px;
          height: 1000px;
        }
        
        #box {
          width: 300px;
          height: 300px;
          margin: 350px auto;
          background-color: red;
          border: 1px solid rgb(117, 107, 211);
          padding: 9px;
        }
        
        // javascript
        const box = document.querySelector("#box");
        const wrapper = document.querySelector("#wrapper");
        
        /**
         * @description è·å–å…ƒç´ åç§»é‡
         * @param {HTMLElement} ele å…ƒç´ 
         */
        function getBoxOffsetDimensions(ele) {
          console.log(wrapper.scrollLeft);
          ele.textContent = `offsetHeight:${ele.offsetHeight}\noffsetWidth:${ele.offsetWidth}\noffsetLeft:${ele.offsetLeft}\noffsetTop:${ele.offsetTop}`;
        }
        getBoxOffsetDimensions(box);
        
        function debounce(func, delay = 100) {
          let timer = null;
          return function (...args) {
            if (timer) clearTimeout(timer);
            timer = setTimeout(() => {
              func.apply(this, args);
            }, delay);
          };
        }
        let debounceFunc = debounce(() => getBoxOffsetDimensions(box));
        wrapper.addEventListener("scroll", () => {
          debounceFunc();
        });
        ```
        
        ![offset dimensions.gif](2%20%E6%A0%B7%E5%BC%8F/offset_dimensions.gif)
        
        - å¯ä»¥å‘ç°`offsetLeft` å’Œ`offsetTop` æ˜¯å›ºå®šçš„ï¼Œå› ä¸ºboxåœ¨containerä¸­çš„ä½ç½®æ˜¯å›ºå®šçš„ï¼Œboxè·ç¦»wrapperçš„åç§»é‡å§‹ç»ˆæ˜¯å®ƒä»¬ä¹‹é—´çš„containerçš„â€œç©ºç™½â€è·ç¦»
- è¦ç¡®å®šä¸€ä¸ªå…ƒç´ **åœ¨é¡µé¢ä¸­çš„ï¼ˆå³ç›¸å¯¹äºè§†å£ï¼‰**åç§»é‡ï¼Œå¯ä»¥æŠŠå®ƒçš„`offsetLeft`å’Œ`offsetTop` å±æ€§åˆ†åˆ«ä¸offsetParentçš„ç›¸åŒå±æ€§ç›¸åŠ ï¼Œä¸€ç›´åŠ åˆ°æ ¹å…ƒç´ ï¼ˆhtmlï¼‰ï¼Œå¦‚ä¸‹
    
    ```jsx
    /**
     * @description è·å–å…ƒç´ ç›¸å¯¹äºè§†å£çš„åç§»é‡
     * @param {HTMLElement} ele å…ƒç´ 
     */
    function getElementLeft(ele) {
      let actualLeft = ele.offsetLeft;
      let cur = ele.offsetParent;
      while (cur) {
        actualLeft += cur.offsetLeft;
        cur = cur.offsetParent;
      }
      return actualLeft;
    }
    /**
     * @description è·å–å…ƒç´ ç›¸å¯¹äºè§†å£çš„åç§»é‡
     * @param {HTMLElement} ele å…ƒç´ 
     */
    function getElementTop(ele) {
      let actualTop = ele.offsetTop;
      let cur = ele.offsetParent;
      while (cur) {
        actualTop += cur.offsetTop;
        cur = cur.offsetParent;
      }
      return actualTop;
    }
    /**
     * @description è·å–å…ƒç´ ç›¸å¯¹äºè§†å£çš„åç§»é‡
     * @param {HTMLElement} ele å…ƒç´ 
     */
    function getElementOffset(ele) {
      return [getElementLeft(ele), getElementTop(ele)];
    }
    ```
    
    - åº”ç”¨åˆ°[ä¸Šé¢](2%20%E6%A0%B7%E5%BC%8F.md)çš„ä¾‹å­ï¼Œå¦‚ä¸‹
        
        ```jsx
        console.log(getElementOffset(box)); // [969, 439] 349 + 610, 349 + 80
        ```
        
    - å¯¹äºä½¿ç”¨CSSå¸ƒå±€çš„ç®€å•é¡µé¢ï¼Œè¿™å‡ ä¸ªè®¡ç®—å…ƒç´ åç§»é‡çš„å‡½æ•°æ˜¯å‡†ç¡®çš„ï¼Œä½†æ˜¯ä½¿ç”¨äº†è¡¨æ ¼å’Œå†…åµŒçª—å£çš„é¡µé¢å¸ƒå±€ï¼Œå®ƒä»¬çš„è¿”å›å€¼ä¼šå› æµè§ˆå™¨ä¸åŒè€Œæœ‰æ‰€å·®å¼‚

<aside>
ğŸ’¡ æ³¨æ„ï¼šæ‰€æœ‰è¿™äº›åç§»é‡å°ºå¯¸éƒ½æ˜¯åªè¯»çš„ï¼Œæ¯æ¬¡è®¿é—®éƒ½ä¼š**é‡æ–°è®¡ç®—**ã€‚å› æ­¤ï¼Œåº”è¯¥å°½å¯èƒ½å‡å°‘æŸ¥è¯¢å®ƒä»¬çš„æ¬¡æ•°ï¼Œæ¯”å¦‚æŠŠæŸ¥è¯¢çš„å€¼ä¿å­˜åœ¨å±€éƒ¨å˜é‡ä¸­ï¼Œå°±å¯ä»¥é¿å…å½±å“æ€§èƒ½

</aside>

## 2.3.2 å®¢æˆ·ç«¯å°ºå¯¸ï¼ˆclient dimensionsï¼‰

- å…ƒç´ çš„å®¢æˆ·ç«¯å°ºå¯¸åŒ…å«**å…ƒç´ å†…å®¹**åŠå…¶**å†…è¾¹è·**æ‰€å ç”¨çš„ç©ºé—´ï¼Œå®ƒåªæœ‰ä¸¤ä¸ªç›¸å…³å±æ€§
    - `clientWidth` ï¼šå†…å®¹åŒºå®½åº¦åŠ å·¦å³å†…è¾¹è·é•¿åº¦
    - `clientHeight` ï¼šå†…å®¹åŒºé«˜åº¦åŠ ä¸Šä¸‹å†…è¾¹è·é•¿åº¦
- å®¢æˆ·ç«¯å°ºå¯¸å®é™…ä¸Šå°±æ˜¯å…ƒç´ å†…éƒ¨çš„ç©ºé—´ï¼Œä½†æ˜¯å®ƒ**ä¸åŒ…æ‹¬è¾¹æ¡†**ï¼Œ**å¤–è¾¹è·**å’Œ**æ»šåŠ¨æ¡**ï¼ˆåç§»å°ºå¯¸åŒ…æ‹¬æ»šåŠ¨æ¡ï¼‰ï¼Œç”¨å›¾å½¢å½¢è±¡è¡¨ç¤ºå¦‚ä¸‹ï¼ˆå¼•å…¥çš„MDNçš„å›¾ï¼‰
    
    ![dimensions-client.png](2%20%E6%A0%B7%E5%BC%8F/dimensions-client.png)
    
- å®¢æˆ·ç«¯å°ºå¯¸å¸¸ç”¨äºç¡®å®šæµè§ˆå™¨è§†å£å°ºå¯¸ï¼Œå³`document.documentElement` å’Œ`document.body` çš„å®¢æˆ·ç«¯å°ºå¯¸ï¼Œå‚è€ƒ[ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ï¼ˆç¬¬4ç‰ˆï¼‰ã€‹ä¸¾äº†å¦‚ä¸‹çš„ä¾‹å­ç”¨äºç¡®å®šé¡µé¢è§†å£](../12%20%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B%EF%BC%88The%20Brower%20Object%20Model%EF%BC%89/1%20window%E5%AF%B9%E8%B1%A1%EF%BC%88The%20window%E5%AF%B9%E8%B1%A1%EF%BC%89.md)

---

**MDNè¡¥å……**

- å…³äºå®¢æˆ·ç«¯å°ºå¯¸ï¼Œåœ¨windowå¯¹è±¡ä¸­è®¨è®º`innerWidth` ç­‰çª—å£å°ºå¯¸æ—¶å°±è¿å¸¦è®¨è®ºè¿‡ï¼Œå®ƒä»¬ä¸»è¦ç”¨äºè·å–æµè§ˆå™¨çš„**è§†å£å°ºå¯¸**
- ä½†æ˜¯æ ¹æ®å®šä¹‰ï¼Œå…ƒç´ çš„å®¢æˆ·ç«¯å°ºå¯¸åº”è¯¥åŒ…å«**å…ƒç´ å†…å®¹**åŠå…¶**å†…è¾¹è·**æ‰€å ç”¨çš„ç©ºé—´ï¼Œå¦‚æœæ˜¯ç©ºé¡µé¢ï¼Œ<html>å’Œ<body>çš„`clientHeight`åº”è¯¥æ˜¯0ï¼Œä½†æ˜¯å®é™…æƒ…å†µä¸æ˜¯è¿™æ ·è€Œä¸”è¿˜ä¼šå› ä¸ºæ–‡æ¡£æ¨¡å¼ä¸åŒè¿”å›ä¸åŒçš„å€¼ï¼Œå› ä¸º**[è¿™æ˜¯å®¢æˆ·ç«¯å°ºå¯¸çš„ç‰¹æ®Šæ¡ˆä¾‹](https://www.w3.org/TR/2016/WD-cssom-view-1-20160317/#dom-element-clientheight)ï¼ˆCSSOMè§„èŒƒæŒ‡å‡ºçš„ï¼‰**ï¼Œä»¥ä¸‹éƒ½æ˜¯åœ¨ä¸€ä¸ªç®€å•çš„ç©ºæ–‡æ¡£åŸºç¡€ä¸Šè¿›è¡Œè®¨è®º
    - å¦‚æœæ–‡æ¡£æ˜¯æ ‡å‡†æ¨¡å¼
        - <html>å…ƒç´ çš„**å®é™…å®½åº¦**å’Œ**é«˜åº¦**åˆ†åˆ«ä¸º**100%è§†å£å®½åº¦**å’Œ**8px**
            
            ![actual width and height.png](2%20%E6%A0%B7%E5%BC%8F/actual_width_and_height.png)
            
            ![html width height.png](2%20%E6%A0%B7%E5%BC%8F/html_width_height.png)
            
        - ä½†æ˜¯<html>å…ƒç´ çš„å®¢æˆ·ç«¯é«˜åº¦å´æ˜¯æµè§ˆå™¨çš„**100%è§†å£é«˜åº¦**
            
            ![html æ ‡å‡†æ¨¡å¼ å®¢æˆ·ç«¯é«˜åº¦.png](2%20%E6%A0%B7%E5%BC%8F/html_%25E6%25A0%2587%25E5%2587%2586%25E6%25A8%25A1%25E5%25BC%258F_%25E5%25AE%25A2%25E6%2588%25B7%25E7%25AB%25AF%25E9%25AB%2598%25E5%25BA%25A6.png)
            
        - <body>å…ƒç´ å› ä¸ºé»˜è®¤å¸¦æœ‰`margin: 8px` çš„æ ·å¼ï¼Œæ‰€ä»¥å®ƒçš„**å®é™…å®½åº¦**å’Œ**é«˜åº¦**åˆ†åˆ«ä¸º**calc(100%è§†å£å®½åº¦-16px)**å’Œ0
            
            ![actual body width height.png](2%20%E6%A0%B7%E5%BC%8F/actual_body_width_height.png)
            
            ![body width and height.png](2%20%E6%A0%B7%E5%BC%8F/body_width_and_height.png)
            
        - æ ‡å‡†æ¨¡å¼ä¸‹ï¼Œ`body` ä½œä¸ºä¸€ä¸ªå—çº§å…ƒç´ æ²¡æœ‰ç‰¹æ®Šæƒ…å†µï¼Œå®ƒçš„å®¢æˆ·ç«¯å®½åº¦å’Œé«˜åº¦å’Œå®é™…å®½åº¦é«˜åº¦æ˜¯**ä¸€è‡´çš„**ï¼ˆå†…å®¹å¢å¤šï¼Œbodyçš„é«˜åº¦ä¹Ÿå¢é«˜ï¼Œ`clientHeight` ä¹Ÿä¼šå˜å¤§ç”šè‡³è¶…è¿‡è§†å£ï¼‰
            
            ![body å®¢æˆ·ç«¯å°ºå¯¸.png](2%20%E6%A0%B7%E5%BC%8F/body_%25E5%25AE%25A2%25E6%2588%25B7%25E7%25AB%25AF%25E5%25B0%25BA%25E5%25AF%25B8.png)
            
    - å¦‚æœæ–‡æ¡£æ˜¯æ··æ‚æ¨¡å¼
        - <html>å…ƒç´ çš„**å®é™…å®½åº¦**å’Œ**é«˜åº¦**åˆ†åˆ«æ˜¯**100%è§†å£å®½åº¦**å’Œ**100%è§†å£é«˜åº¦**
        - æ‰€ä»¥<html>å…ƒç´ çš„`clientHeight` å’Œ`clientWidth` å€¼å°±æ˜¯å®ƒçš„å®é™…é«˜å®½ï¼Œä½†æ˜¯
        - <body>å…ƒç´ åœ¨æ··æ‚æ¨¡å¼ä¸‹çš„é»˜è®¤æ ·å¼ä»ç„¶å¸¦æœ‰`margin: 8px` ï¼Œæ‰€ä»¥å®ƒçš„**å®é™…å®½åº¦**å’Œ**é«˜åº¦**åˆ†åˆ«ä¸º**calc(100%è§†å£å®½åº¦-16px)**å’Œ**calc(100%è§†å£é«˜åº¦-16px)**
        - ä½†æ˜¯<body>å…ƒç´ çš„å®¢æˆ·ç«¯å°ºå¯¸å¹¶éå…¶å®é™…é«˜å®½ï¼Œè€Œæ˜¯è§†å£é«˜åº¦å’Œè§†å£å®½åº¦ï¼ˆå³å’Œ<html>ä¸€æ ·ï¼‰

<aside>
â„¹ï¸ æ³¨æ„ï¼šä¸åç§»å°ºå¯¸ä¸€æ ·ï¼Œå®¢æˆ·ç«¯å°ºå¯¸ä¹Ÿæ˜¯åªè¯»çš„ï¼Œæ¯æ¬¡è®¿é—®éƒ½ä¼šé‡æ–°è®¡ç®—è·å–

</aside>

## 2.3.3 æ»šåŠ¨å°ºå¯¸ï¼ˆscroll dimensionsï¼‰

- æ»šåŠ¨å°ºå¯¸æä¾›äº†å…ƒç´ å†…å®¹æ»šåŠ¨è·ç¦»çš„ä¿¡æ¯
    - æœ‰äº›å…ƒç´ ï¼Œå¦‚<html>æ— æ•ˆä»»ä½•ä»£ç å°±å¯ä»¥è‡ªåŠ¨æ»šåŠ¨
    - è€Œå…¶ä»–å…ƒç´ åˆ™éœ€è¦CSSçš„overflowå±æ€§ä»¤å…¶æ»šåŠ¨
- æ»šåŠ¨å°ºå¯¸ç›¸å…³å±æ€§å®šä¹‰åœ¨`Element` æ¥å£ä¸­ï¼Œå¦‚ä¸‹
    - [ ]  `scrollHeight`ï¼Œæ²¡æœ‰æ»šåŠ¨æ¡å‡ºç°æ—¶ï¼Œå…ƒç´ å†…å®¹çš„æ€»é«˜åº¦
    - [ ]  `scrollLeft`ï¼Œå†…å®¹åŒºå·¦ä¾§éšè—çš„åƒç´ æ•°ï¼Œè®¾ç½®è¿™ä¸ªå±æ€§å¯ä»¥æ”¹å˜å…ƒç´ çš„æ»šåŠ¨ä½ç½®
    - [ ]  `scrollTop` ï¼Œå†…å®¹åŒºé¡¶éƒ¨éšè—çš„åƒç´ æ•°ï¼Œè®¾ç½®è¿™ä¸ªå±æ€§å¯ä»¥æ”¹å˜å…ƒç´ çš„æ»šåŠ¨ä½ç½®
    - [ ]  `scrollWidth` ï¼Œæ²¡æœ‰æ»šåŠ¨æ¡å‡ºç°æ—¶ï¼Œå…ƒç´ å†…å®¹çš„æ€»å®½åº¦
- `scrollHeight` å’Œ`scrollWidth` éƒ½æ˜¯å¯¹å…ƒç´ å†…å®¹çš„æµ‹é‡ï¼ŒåŒ…æ‹¬ç”±äºæº¢å‡ºè€Œåœ¨å±å¹•ä¸Šä¸å¯è§çš„å†…å®¹ï¼ˆå³ä½¿è®¾ç½®ä¸ºhiddenä»ç„¶ä¼šè®¡ç®—ï¼‰
- æ»šåŠ¨å°ºå¯¸åŒ…æ‹¬**å†…è¾¹è·ï¼Œæ»šåŠ¨æ¡ï¼Œè¾¹æ¡†**ï¼ˆä¸åŒ…å«å¤–è¾¹è·ï¼‰ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªå½¢è±¡å›¾
    
    ![æ»šåŠ¨å°ºå¯¸.png](2%20%E6%A0%B7%E5%BC%8F/%25E6%25BB%259A%25E5%258A%25A8%25E5%25B0%25BA%25E5%25AF%25B8.png)
    
- `scrollHeight/Width` å¯ä»¥ç”¨æ¥ç¡®å®šç»™å®šå…ƒç´ å†…å®¹çš„å®é™…å°ºå¯¸ï¼Œä¾‹å¦‚<html>å…ƒç´ æ˜¯æµè§ˆå™¨æ»šåŠ¨è§†å£çš„å…ƒç´ ï¼Œå› æ­¤`document.documentElement.scrollHeight` å°±æ˜¯æ•´ä¸ªé¡µé¢å‚ç›´æ–¹å‘çš„æ€»é«˜åº¦
- `scrollHeight/Width` å’Œ`clientHeight/Width` åœ¨**ä¸éœ€è¦æ»šåŠ¨**çš„æ–‡æ¡£ä¸Šæ˜¯åˆ†ä¸æ¸…çš„ï¼Œä½†æ˜¯å¯¹äºå®¢æˆ·ç«¯å°ºå¯¸ä¸æ˜¯åŒ…æ‹¬è¾¹æ¡†çš„ï¼Œæ»šåŠ¨å°ºå¯¸æ˜¯åŒ…æ‹¬è¾¹æ¡†çš„
    - å¯¹äºæ•´ä¸ªæ–‡æ¡£è€Œè¨€ï¼Œ`scrollHeight/Width` å°±æ˜¯æ–‡æ¡£å°ºå¯¸ï¼Œ`clientHeight/Width` å°±æ˜¯è§†å£å°ºå¯¸
    - å¦‚æœæ–‡æ¡£å°ºå¯¸è¶…è¿‡ä¹è§†å£å°ºå¯¸ï¼Œé‚£ä¹ˆåœ¨å“ªä¸ªæµè§ˆå™¨éƒ½ä¼šæ˜¯è¿™ä¸ªç»“æœ
- `scrollLeft/Top` ç”¨äºè®¾ç½®å®ƒä»¬çš„æ»šåŠ¨ä½ç½®ï¼Œå…ƒç´ æœªæ»šåŠ¨å®ƒä»¬ä¸¤ä¸ªçš„å€¼éƒ½æ˜¯0ï¼Œè¿™ä¸¤ä¸ªå€¼ä¹Ÿæ˜¯å¯å†™çš„ï¼ˆä¸`scrollHeight/Width` ä¸åŒï¼‰ï¼Œä¸‹é¢è¿™ä¸ªå‡½æ•°å¯ä»¥æ£€æµ‹å…ƒç´ æ˜¯ä¸æ˜¯ä½äºé¡¶éƒ¨ï¼Œä¸æ˜¯å°±æ»šå›é¡¶éƒ¨
    
    ```jsx
    function scrollToTop(ele) {
      if (ele.scrollTop) {
        ele.scrollTop = 0;
      }
    }
    ```
    
- ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„æ»šåŠ¨å°ºå¯¸ä¾‹å­
    
    ```jsx
    // HTML
    <link rel="stylesheet" href="style3.css" />
    <div id="container">
      <div id="box"></div>
    </div>
    <script src="./main3.js"></script>
    
    // style3.css
    body {
      margin: 0;
    }
    * {
      box-sizing: border-box;
    }
    #container {
      margin: 90px auto;
      width: 500px;
      height: 500px;
      border: 1px solid gray;
      overflow: auto;
    }
    
    #box {
      width: 800px;
      height: 800px;
      padding: 9px;
      border: 1px solid gray;
      background-color: antiquewhite;
      text-align: center;
      /* line-height: 1000px; */
      word-wrap: normal;
    }
    
    // javascript
    const box = document.querySelector("#box");
    const container = document.querySelector("#container");
    console.log(container);
    /**
     * @description è·å–å…ƒç´ æ»šåŠ¨é‡
     * @param {HTMLElement} ele å…ƒç´ 
     */
    function getBoxScrollDimensions(ele, target) {
      ele.textContent = `scrollHeight:${target.scrollHeight}
      \nscrollWidth:${target.scrollWidth}
      \nscrollLeft:${target.scrollLeft}
      \nscrollTop:${target.scrollTop}`;
    }
    getBoxScrollDimensions(box, container);
    
    function debounce(func, delay = 100) {
      let timer = null;
      return function (...args) {
        if (timer) clearTimeout(timer);
        timer = setTimeout(() => {
          func.apply(this, args);
        }, delay);
      };
    }
    let debounceFunc = debounce(() => getBoxScrollDimensions(box, container));
    container.addEventListener("scroll", () => {
      debounceFunc();
    });
    ```
    

## 2.3.4 ç¡®å®šå…ƒç´ å°ºå¯¸

- å…ƒç´ çš„å„ç§å°ºå¯¸ä¸ä»…å¯ä»¥é€šè¿‡ä¸Šé¢çš„å±æ€§è·å–ï¼Œä¹Ÿèƒ½é€šè¿‡`getBoundingClientRect()`æ–¹æ³•è·å–ï¼Œå®ƒæ˜¯[CSSOMè§„èŒƒ](https://w3c.github.io/csswg-drafts/cssom-view/#dom-element-getboundingclientrect)çš„å®šä¹‰åœ¨`Element` æ¥å£çš„æ–¹æ³•ï¼Œå®ƒè¿”å›ä¸€ä¸ª`DOMRect` å¯¹è±¡ï¼ŒåŒ…å«6ä¸ªï¼ˆ8ä¸ªï¼Œå…¶ä¸­ä¸¤å¯¹æ˜¯ç›¸åŒçš„ï¼‰å±æ€§
    - `left` `x` ï¼Œå…ƒç´ å·¦è¾¹ç›¸å¯¹äºè§†å£å·¦è¾¹çš„è·ç¦»
    - `top` `y` ï¼Œå…ƒç´ é¡¶éƒ¨ç›¸å¯¹äºè§†å£é¡¶éƒ¨çš„è·ç¦»
    - `right` ï¼Œå…ƒç´ å³è¾¹ç›¸å¯¹äºè§†å£å·¦è¾¹çš„è·ç¦»
    - `bottom` ï¼Œå…ƒç´ åº•éƒ¨ç›¸å¯¹äºè§†å£é¡¶éƒ¨çš„è·ç¦»
    - `width`ï¼Œå…ƒç´ å®½åº¦
    - `height` ï¼Œå…ƒç´ é«˜åº¦
    
    ---
    
    - æ³¨æ„ï¼Œæ‰€æœ‰è·ç¦»è®¡ç®—æ—¶ï¼Œå…ƒç´ å°ºå¯¸åŒ…æ‹¬**å†…è¾¹è·ï¼Œæ»šåŠ¨æ¡ï¼Œè¾¹æ¡†**ï¼ˆä¸åŒ…å«å¤–è¾¹è·ï¼‰
    
    ![element-box-diagram.png](2%20%E6%A0%B7%E5%BC%8F/element-box-diagram.png)
    

```jsx
<body>
  <style>
    body {
      margin: 0;
      height: 110vh;
    }
    div {
      box-sizing: border-box;
      height: 300px;
      width: 300px;
      margin-left: 200px;
      margin-top: 100px;
      background-color: red;
      border: 8px solid green;
      padding: 15px;
    }
    p {
      margin-left: 100px;
    }
  </style>
  <div></div>
  <p></p>
  <script>
    const container = document.querySelector("p");
    function update() {
      const elem = document.querySelector("div");
      const rect = elem.getBoundingClientRect();

      container.innerHTML = "";
      for (const key in rect) {
        if (typeof rect[key] !== "function") {
          let para = document.createElement("p");
          para.textContent = `${key} : ${rect[key]}`;
          container.appendChild(para);
        }
      }
    }

    document.addEventListener("scroll", update);
    update();
  </script>
</body>
```

![getBoundingRect.gif](2%20%E6%A0%B7%E5%BC%8F/getBoundingRect.gif)