# 2. åˆ›å»ºå¯¹è±¡

ä¸åŒäºåœ¨[ç†è§£å¯¹è±¡](1%20%E7%90%86%E8%A7%A3%E5%AF%B9%E8%B1%A1.md)ä¸­è¯´æ˜çš„ä¸¤ç§ç®€å•çš„åˆ›å»ºå¯¹è±¡çš„æ–¹å¼ï¼Œå³Objectæ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡å’Œå¯¹è±¡å­—é¢é‡åˆ›å»ºå¯¹è±¡ï¼šè¿™äº›æ–¹æ³•åœ¨éœ€è¦åˆ›å»ºå¤šä¸ªå…·æœ‰ç›¸åŒæ¥å£çš„å¯¹è±¡æ—¶éœ€è¦é‡å¤ç¼–ç å¾ˆå¤šæ¬¡

æœ¬èŠ‚åˆ›å»ºå¯¹è±¡çš„æ–¹å¼å’ŒECMScript6å¼•å…¥çš„ç±»æœ‰å…³ï¼Œç±»çš„å¼•å…¥è®©åˆ›å»ºå¤šä¸ªå…·æœ‰ç›¸åŒæ¥å£çš„å¯¹è±¡æ›´åŠ çš„å®¹æ˜“äº†

# 2.1 æ¦‚è¿°

- ECMAScript5.1 æ²¡æœ‰æ­£å¼æ”¯æŒé¢å‘å¯¹è±¡çš„ç»“æ„ï¼Œæ¯”å¦‚ç±»æˆ–ç»§æ‰¿ï¼Œä½†æ˜¯å·§å¦™åœ°åˆ©ç”¨**åŸå‹å¼ç»§æ‰¿**å¯ä»¥æˆåŠŸåœ°æ¨¡æ‹ŸåŒæ ·çš„è¡Œä¸º
- ECMAScript6 å¼€å§‹æ­£å¼æ”¯æŒ**ç±»å’Œç»§æ‰¿** ES6çš„ç±»æ—¨åœ¨**å®Œå…¨è¦†ç›–**ä¹‹å‰è§„èŒƒè®¾è®¡çš„åŸºäºåŸå‹çš„ç»§æ‰¿æ¨¡å¼ï¼Œä¸è¿‡ä»åº•å±‚å®ç°æ¥çœ‹ï¼ŒES6çš„ç±»ä»…ä»…æ˜¯**å°è£…äº†ES5.1æ„é€ å‡½æ•°åŠ åŸå‹ç»§æ‰¿çš„è¯­æ³•ç³–**
- **æ³¨æ„**
    - ç†è§£ES6ç±»å‡ºç°å‰çš„ç»§æ‰¿æ¨¡å¼æ˜¯æœ‰å¥½å¤„çš„ï¼Œç‰¹åˆ«æ˜¯ES6çš„ç±»å®šä¹‰æœ¬èº«å°±ç›¸å½“äºå¯¹åŸæœ‰ç»“æ„çš„å°è£…
    - åœ¨ES6ç±»ä¹‹å‰ï¼Œæœ¬ç« ä¼šå¾ªåºæ¸è¿›åœ°ä»‹ç»è¢«ç±»å–ä»£çš„åº•å±‚æ¦‚å¿µ
    - ä½†æ˜¯ä¸ç”¨è¯¯è§£ï¼šé‡‡ç”¨**é¢å‘å¯¹è±¡ç¼–ç¨‹æ¨¡å¼**çš„JavaScriptä»£ç è¿˜æ˜¯åº”è¯¥ä½¿ç”¨ECMAScript6çš„ç±»ï¼ˆä½¿ç”¨ES6ä¹‹å‰çš„ç»§æ‰¿è¯­æ³•æ˜¯å…¼å®¹çš„ï¼Œä½†æ˜¯ä¸æ¨èï¼‰

# 2.2 å·¥å‚æ¨¡å¼

- å·¥å‚æ¨¡å¼æ˜¯ä¸€ç§å¹¿æ³›åº”ç”¨äºè½¯ä»¶å·¥ç¨‹é¢†åŸŸçš„è®¾è®¡æ¨¡å¼ï¼Œç”¨äº**æŠ½è±¡åˆ›å»ºç‰¹å®šå¯¹è±¡**çš„è¿‡ç¨‹
- JavaScripté«˜çº§ç¨‹åºè®¾è®¡ï¼ˆç¬¬4ç‰ˆï¼‰æ²¡æœ‰è¿‡å¤šè§£è¯»ï¼Œå¦‚ä¸‹é¡µæ˜¯åœ¨ç½‘ä¸ŠæŸ¥æ‰¾çš„èµ„æ–™
    
    [JavaScriptè®¾è®¡æ¨¡å¼ï¼šå·¥å‚æ¨¡å¼](2%20%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1/JavaScript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F.md)
    
- ä¸‹é¢çš„ä¸€ä¸ªä¾‹å­æ˜¯ä¸€ç§æŒ‰ç…§ç‰¹å®šæ¥å£åˆ›å»ºå¯¹è±¡çš„æ–¹å¼
    
    ```jsx
    function createPerson(age, name, job) {
      let o = new Object();
      o.name = name;
      o.age = age;
      o.job = job;
      o.sayHello = function () {
        console.log(`Hello, I'm ${this.name}`);
      };
      return o;
    }
    const p = createPerson(23, "mangwu", "software engineer");
    console.log(p);
    p.sayHello();
    // æ‰“å°
    {
      name: 'mangwu',
      age: 23,
      job: 'software engineer',
      sayHello: [Function (anonymous)]
    }
    Hello, I'm mangwu
    ```
    
- è¿™ä¸ª`createPerson` æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œç”¨è¿™å‡ ä¸ªå‚æ•°æ„é€ ä¸€ä¸ªåŒ…å«`Person` ä¿¡æ¯çš„å¯¹è±¡
- è™½ç„¶è¿™ä¸ªæ–¹æ³•èƒ½è§£å†³åˆ›å»ºå¤šä¸ªç±»ä¼¼å¯¹è±¡çš„é—®é¢˜ï¼ˆé‡å¤ä»£ç ï¼‰ï¼Œä½†æ˜¯æ²¡æœ‰è§£å†³**å¯¹è±¡æ ‡è¯†**çš„é—®é¢˜ï¼ˆå³æ–°åˆ›å»ºçš„å¯¹è±¡æ˜¯ä»€ä¹ˆç±»å‹ï¼‰

# 2.3 æ„é€ å‡½æ•°æ¨¡å¼

## 2.3.1 æ„é€ å‡½æ•°è¯­æ³•

- ECMAScriptä¸­çš„æ„é€ å‡½æ•°æ˜¯ç”¨æ¥åˆ›å»ºç‰¹å®šç±»å‹å¯¹è±¡çš„ï¼Œå¦‚JavaScriptå†…ç½®çš„`Obejct`å’Œ`Array`è¿™æ ·çš„åŸç”Ÿæ„é€ å‡½æ•°
- æ„é€ å‡½æ•°ä¸ä»…å¯ä»¥ä½¿ç”¨åŸç”Ÿçš„ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰æ„é€ å‡½æ•°ï¼ŒJavaScriptä¸­ä»¥å‡½æ•°çš„å½¢å¼ä¸ºè‡ªå·±çš„å¯¹è±¡ç±»å‹å®šä¹‰å±æ€§å’Œæ–¹æ³•ï¼Œå¦‚ä¸‹
    
    ```jsx
    function ObjectName(prop1, prop2, ... ,propn) {
    	this.prop1 = prop1;
    	this.prop2 = prop2;
    	...
    	this.propn = propn;
    	// è‡ªå®šä¹‰è‡ªæœ‰æ–¹æ³•
    	this.method1 = function() {
    		...
    	}
    	...
    	this.methodn = function() {
    
    	}
    }
    // è‡ªå®šä¹‰å®ä¾‹æ–¹æ³•
    ObjectName.prototype.methodx = function() {
    	...
    }
    // è‡ªå®šä¹‰é™æ€æ–¹æ³•
    ObjectName.methods = function() {
    	...
    }
    ```
    
    - ä¸å·¥å‚æ¨¡å¼çš„åŒºåˆ«åœ¨äº
        - æ²¡æœ‰æ˜¾å¼çš„åˆ›å»ºå¯¹è±¡
        - å±æ€§å’Œæ–¹æ³•ç›´æ¥èµ‹å€¼ç»™`this`
        - æ²¡æœ‰`return`
    - é€šè¿‡èµ‹å€¼ç»™`this`  çš„æ–¹æ³•`this.methodi`å±äº**è‡ªæœ‰**(**own**)æ–¹æ³•
    - é€šè¿‡åŸå‹é“¾åˆ›å»ºçš„æ–¹æ³•`ObjectName.proptotype.methodx` å±äº**åŸé¡¹é“¾**ä¸Šçš„å®ä¾‹æ–¹æ³•
    - é€šè¿‡èµ‹å€¼ç»™å‡½æ•°çš„æ–¹æ³•(`ObjectName.methods`)å±äº**é™æ€**(**static**)æ–¹æ³•
    - å¦å¤–è¦æ³¨æ„æ„é€ å‡½æ•°çš„é¦–å­—æ¯è¦å¤§å†™ï¼Œè€Œéæ„é€ å‡½æ•°çš„è¦å°å†™ï¼Œè¿™æ˜¯ä»é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€å“ªé‡Œå€Ÿé‰´çš„ï¼Œæœ‰åŠ©äºåŒºåˆ†æ„é€ å‡½æ•°å’Œæ™®é€šå‡½æ•°
- ä¾‹å­
    
    ```jsx
    function Person(age, name, job) {
      this.age = age;
      this.name = name;
      this.job = job;
      this.sayName = function () {
        console.log(this.name);
      };
    }
    Person.prototype.sayHello = function () {
      console.log(`Hello, I'm ${this.name}`);
    };
    ```
    

### 2.3.1.1 æ„é€ å‡½æ•°å®ä¾‹åŒ–è¯­æ³•

- é€šè¿‡æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªå¯¹è±¡å®ä¾‹ï¼Œéœ€è¦ä½¿ç”¨`new`æ“ä½œç¬¦
    
    ```jsx
    const n = new ObjectName(arguments);
    ```
    
    - `arguments` æ˜¯éœ€è¦ä¼ é€’ç»™æ„é€ å‡½æ•°çš„å®ä¾‹åŒ–çš„å‚æ•°
- ä½¿ç”¨`new`æ“ä½œç¬¦è°ƒç”¨æ„é€ å‡½æ•°ä¼šæ‰§è¡Œä¸€ä¸‹æ“ä½œ
    1. åœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡
    2. **è¿™ä¸ªæ–°å¯¹è±¡çš„å†…éƒ¨çš„[[Prototype]]ç‰¹æ€§è¢«èµ‹å€¼ä¸ºæ„é€ å‡½æ•°çš„prototypeå±æ€§**
    3. æ„é€ å‡½æ•°å†…éƒ¨çš„`this`è¢«èµ‹å€¼ä¸ºè¿™ä¸ªæ–°å¯¹è±¡ å³`this`æŒ‡å‘æ–°å¯¹è±¡
    4. æ‰§è¡Œæ„é€ å‡½æ•°å†…éƒ¨çš„ä»£ç ï¼ˆç»™æ–°å¯¹è±¡æ·»åŠ å±æ€§ï¼‰
    5. å¦‚æœæ„é€ å‡½æ•°è¿”å›éç©ºå¯¹è±¡ï¼Œåˆ™è¿”å›è¯¥å¯¹è±¡ï¼›å¦åˆ™è¿”å›åˆšåˆ›å»ºçš„æ–°å¯¹è±¡
- ä¾‹å­ ä½¿ç”¨ä¸Šé¢æ„å»ºçš„`Person`æ„é€ å‡½æ•°
    
    ```jsx
    const person1 = new Person(23, "mangwu", "Software Engineer");
    const person2 = new Person(22, "wumang", "Software Engineer");
    ```
    
- è¿™ä¸ªä¾‹å­ä¸­`person1` `person2` åˆ†åˆ«ä¿å­˜ç€`Person`çš„ä¸åŒå®ä¾‹ï¼Œä¸¤ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ª`constructor`å±æ€§æŒ‡å‘`Person`
    
    ```jsx
    console.log(person1.constructor === Person); // true
    console.log(person2.constructor === Person); // true
    ```
    
    - å®é™…ä¸Š`person` å®ä¾‹ä¸Šçš„`constructor`å±æ€§å°±æ˜¯ä»`Person` çš„`proptotype` å±æ€§ä¸Šâ€*ç»§æ‰¿â€*çš„,å¦‚ä¸‹æ˜¯`Person`çš„`prototype`å±æ€§
        
        ![Untitled](2%20%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1/Untitled.png)
        
        - å¯ä»¥çœ‹åˆ°`sayHello` æ˜¯è‡ªå®šä¹‰çš„å®ä¾‹æ–¹æ³•
        - `constructor` å±æ€§å£°æ˜æ—¶å°±å­˜åœ¨ï¼ŒæŒ‡å‘æ„é€ æ–¹æ³•æœ¬èº«
        - æ„é€ æ–¹æ³•çš„[[Prototype]]ç‰¹æ€§è¢«èµ‹å€¼ä¸º`Object` çš„`proptotype` è¿™æ ·ä»ä¾§é¢è¯´æ˜`Object` æ—¶æ‰€æœ‰å¯¹è±¡çš„åŸºç±»
    - `person1` å®ä¾‹æ‰“å°å¦‚ä¸‹
        
        ![Untitled](2%20%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1/Untitled%201.png)
        
        - `person1` å®ä¾‹çš„[[Prototype]]ç‰¹æ€§ç¡®å®è¢«èµ‹å€¼ä¸ºäº†`Person` çš„`prototype` å±æ€§
        - `sayName` æ˜¯å®ä¾‹çš„è‡ªæœ‰(**own**)æ–¹æ³•ï¼Œå› ä¸ºå®ƒä¸åœ¨åŸå‹é“¾ä¸Š
        - `sayHello` æ˜¯å®šä¹‰åœ¨`Person`çš„`prototype`å±æ€§ä¸Šçš„æ–¹æ³•ï¼Œå±äºå®ä¾‹ç»§æ‰¿ä¸åŸå‹é“¾çš„æ–¹æ³•
- `constructor`æœ¬æ¥æ˜¯ç”¨æ¥æ ‡è¯†å¯¹è±¡ç±»å‹çš„ï¼Œä¸è¿‡ä¸€èˆ¬è®¤ä¸º`instanceof`æ“ä½œç¬¦æ˜¯å¯¹ç¡®å®šå¯¹è±¡ç±»å‹æ›´å¯é çš„æ–¹å¼(~~å®é™…ä¸Šinstanceofä¹Ÿæ˜¯åœ¨å¯¹è±¡çš„åŸå‹é“¾ä¸ŠæŸ¥æ‰¾`constructor` å±æ€§åˆ¤æ–­æ˜¯å¦æ˜¯è¯¥æ„é€ å‡½æ•°çš„å®ä¾‹~~)
    
    ```jsx
    console.log(person1 instanceof Person); // true
    console.log(person1 instanceof Object); // true
    ```
    

### 2.3.1.2 æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡çš„å¥½å¤„

- ç›¸æ¯”äºå·¥å‚æ¨¡å¼ï¼Œæ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡å¯ä»¥ç¡®ä¿å®ä¾‹è¢«**æ ‡è¯†**ä¸ºç‰¹å®šç±»å‹
- æ‰€æœ‰è‡ªå®šä¹‰å¯¹è±¡éƒ½ç»§æ‰¿è‡ª`Object` ï¼Œè‡ªå®šä¹‰å¯¹è±¡å¯ä»¥ä½¿ç”¨`Object` å®šä¹‰çš„å®ä¾‹æ–¹æ³•

### 2.3.1.3 æ„é€ å‡½æ•°å…¶å®ƒå£°æ˜æ–¹å¼

- æ„é€ å‡½æ•°ä¸ä¸€å®šè¦å†™æˆå‡½æ•°å£°æ˜çš„æ¨¡å¼ï¼Œèµ‹å€¼ç»™å˜é‡çš„**å‡½æ•°è¡¨è¾¾å¼**ä¹Ÿå¯ä»¥è¡¨ç¤ºæ„é€ å‡½æ•°
    
    ```jsx
    let ObejctName = function(prop1, prop2, ... ,propn) {
    	this.prop1 = prop1;
    	this.prop2 = prop2;
    	...
    	this.propn = propn;
    	// è‡ªå®šä¹‰è‡ªæœ‰æ–¹æ³•
    	this.method1 = function() {
    		...
    	}
    	...
    	this.methodn = function() {
    
    	}
    }
    // è‡ªå®šä¹‰å®ä¾‹æ–¹æ³•
    ObjectName.prototype.methodx = function() {
    	...
    }
    // è‡ªå®šä¹‰é™æ€æ–¹æ³•
    ObjectName.methods = function() {
    	...
    }
    ```
    
- åœ¨å®ä¾‹åŒ–æ—¶ï¼Œå¦‚æœä¸æƒ³ä¼ é€’å‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨å‚æ•°é»˜è®¤å€¼ï¼Œæˆ–è€…ç›´æ¥ä¸å®šä¹‰å‚æ•°ï¼Œå±æ€§ç›´æ¥èµ‹ä¸Šå›ºå®šå€¼
    
    ```jsx
    let ObejctName = function(prop1=defaultVal) {
    	this.prop1 = prop1;
    	this.prop2 = FixValue2;
    	...
    	this.propn = FixValue;
    	// è‡ªå®šä¹‰è‡ªæœ‰æ–¹æ³•
    	this.method1 = function() {
    		...
    	}
    	...
    	this.methodn = function() {
    
    	}
    }
    // è‡ªå®šä¹‰å®ä¾‹æ–¹æ³•
    ObjectName.prototype.methodx = function() {
    	...
    }
    // è‡ªå®šä¹‰é™æ€æ–¹æ³•
    ObjectName.methods = function() {
    	...
    }
    ```
    
- åœ¨ä¸ä¼ é€’å‚æ•°æ—¶ï¼Œå¯ä»¥çœç•¥æ„é€ å‡½æ•°çš„æ‹¬å·ï¼ˆä¸æ¨èè¿™ç§å†™æ³•ï¼‰
- ä¾‹å­
    
    ```jsx
    let Cat = function (name = "cat") {
      this.name = name;
      this.age = 2;
      this.sayMiao = function () {
        console.log("å–µå–µï¼Œå–µï¼");
      };
    };
    const cat = new Cat;
    console.log(cat); // Cat { name: 'cat', age: 2, sayMiao: [Function (anonymous)] }
    cat.sayMiao() // å–µå–µï¼Œå–µï¼
    ```
    

## 2.3.2 æ„é€ å‡½æ•°ä¹Ÿæ˜¯å‡½æ•°

- æ„é€ å‡½æ•°å¹¶æ²¡æœ‰æŠŠæŸä¸ªå‡½æ•°å®šä¹‰ä¸ºæ„é€ å‡½æ•°çš„ç‰¹æ®Šè¯­æ³•
- æ„é€ å‡½æ•°ä¹Ÿæ˜¯å‡½æ•°ï¼Œä¸æ™®é€šå‡½æ•°çš„å”¯ä¸€åŒºåˆ«åœ¨äºè°ƒç”¨æ–¹å¼ä¸åŒ
- ä»»ä½•å‡½æ•°åªæœ‰ä½¿ç”¨`new`æ“ä½œç¬¦è°ƒç”¨å°±æ˜¯æ„é€ å‡½æ•°ï¼Œè€Œä¸ä½¿ç”¨`new`æ“ä½œç¬¦è°ƒç”¨çš„å‡½æ•°å°±æ˜¯æ™®é€šå‡½æ•°
- ä¾‹å¦‚
    
    ```jsx
    function Person(age, name) {
      this.age = age;
      this.name = name;
      this.sayName = function () {
        console.log(this.name);
      };
    }
    const person = new Person(22, "mangwu");
    Person(22, "mangwu");
    console.log(global);
    global.sayName();
    ```
    
    - `person` å®ä¾‹åˆ›å»ºä½¿ç”¨`new` æ“ä½œç¬¦æ­¤æ—¶`Person` å°±æ˜¯æ„é€ å‡½æ•°
    - ç„¶åæ˜¯ç›´æ¥çš„`Person()`è°ƒç”¨,æ­¤æ—¶å®ƒå°±æ˜¯æ™®é€šå‡½æ•°ï¼Œ`this` å°±æ˜¯å½“å‰ä¸Šä¸‹æ–‡ä¸­çš„`this`
    - ä¾‹å¦‚åœ¨å…¨å±€ä¸Šè°ƒç”¨`Person()` `this` æŒ‡é’ˆå°±æ˜¯Globalå¯¹è±¡ï¼Œåœ¨nodeç¯å¢ƒä¸‹æ˜¯`global`ï¼Œæµè§ˆå™¨ç¯å¢ƒä¸‹æ˜¯`window`
    - æ‰€ä»¥globalæ‹¥æœ‰äº†`age`å’Œ`name`ä»¥åŠ`sayName` å±æ€§æˆ–æ–¹æ³•ï¼Œå¦‚ä¸‹
        
        ![Untitled](2%20%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1/Untitled%202.png)
        
- æ™®é€šå‡½æ•°åœ¨è°ƒç”¨æ—¶å¯ä»¥ä½¿ç”¨`call()`å’Œ`apply()` æŒ‡å®š`this` (å…³äº[apply](../../JavaScript%E5%B0%8F%E8%AE%A1/concat%E5%92%8Capply.md))ï¼Œæ‰€ä»¥æŠŠå½¢å¼æ„é€ å‡½æ•°çš„å‡½æ•°é€šè¿‡`call()`ï¼Œ`apply()` ç­‰æ–¹æ³•åˆ¶å®š`this` ï¼Œå¯ä»¥ä¸ºå¯¹è±¡**å¢åŠ **å±æ€§æˆ–æ–¹æ³•ï¼Œå¦‚ä¸‹
    
    ```jsx
    const obj = {};
    Person.call(obj, 24, "wumang");
    console.log(obj); // { age: 24, name: 'wumang', sayName: [Function (anonymous)] }
    obj.sayName() // wumang
    ```
    
    - åªæœ‰åªä¼šå¢åŠ **è‡ªæœ‰å±æ€§å’Œæ–¹æ³•**ï¼Œä¸ä¼šå¯¹åŸå‹é“¾æœ‰ä»»ä½•å½±å“

## 2.3.3 æ„é€ å‡½æ•°çš„é—®é¢˜

- **ç›¸åŒé€»è¾‘çš„è‡ªæœ‰æ–¹æ³•é‡å¤å£°æ˜è€—è´¹æ€§èƒ½**
- æ„é€ å‡½æ•°å®šä¹‰çš„æ–¹æ³•åœ¨æ¯ä¸ªå®ä¾‹ä¸Šéƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œä½†æ˜¯åŒä¸€ä¸ªæ„é€ å‡½æ•°ä¸­å®šä¹‰çš„æ–¹æ³•çš„é€»è¾‘å…¶å®æ˜¯ä¸€æ ·çš„
    
    ```jsx
    // æ„é€ å‡½æ•°çš„é—®é¢˜
    function Person(age, name) {
      this.age = age;
      this.name = name;
      **this.sayName = new Function("console.log(this.name)");**
    }
    const person = new Person(23, "mangwu");
    console.log(person); // Person { age: 23, name: 'mangwu', sayName: [Function: anonymous] }
    person.sayName(); // mangwu
    ```
    
    - `this.sayName()` æ–¹æ³•ä½¿ç”¨`Function`æ„é€ å‡½æ•°å®ä¾‹åŒ–ä¸€ä¸ªæ–¹æ³•å’Œä¹‹å‰çš„å‡½æ•°è¡¨è¾¾å¼æ„é€ æ–¹å¼æ˜¯**é€»è¾‘ç­‰ä»·**çš„
    - å¯ä»¥æ¸…æ¥šåœ°å¾—çŸ¥ï¼Œæ¯ä¸ª`Person` å®ä¾‹éƒ½æœ‰è‡ªå·±çš„`Function`å®ä¾‹ç”¨äºæ˜¾ç¤º`name`å±æ€§
    - ä»¥è¿™ç§æ–¹å¼åˆ›å»ºå‡½æ•°ä¼šå¸¦æ¥ä¸åŒçš„**ä½œç”¨åŸŸé“¾**å’Œ**æ ‡è¯†ç¬¦è§£æ**ï¼Œä½†æ˜¯æ–°å»º`Function`å®ä¾‹çš„æœºåˆ¶æ˜¯ä¸€æ ·çš„
- å› ä¸º`sayName` éƒ½åšåŒæ ·çš„äº‹æƒ…ï¼Œæ‰€ä»¥æ²¡å¿…è¦å®šä¹‰ä¸¤ä¸ªä¸åŒçš„`Function`å®ä¾‹,å†µä¸”`**this` å¯¹è±¡å¯ä»¥æŠŠå‡½æ•°ä¸å¯¹è±¡çš„ç»‘å®šæ¨è¿Ÿåˆ°è¿è¡Œæ—¶ï¼Œ**è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥æŠŠå‡½æ•°å®šè½¬ç§»åˆ°æ„é€ å‡½æ•°å¤–éƒ¨
    
    ```jsx
    function sayName() {
      console.log(this.name);
    }
    function Person(age, name) {
      this.age = age;
      this.name = name;
      this.sayName = sayName;
    }
    const p2 = new Person(23, "mangwu");
    const p3 = new Person(22, "wumang");
    console.log(p2.sayName === p3.sayName); // true
    
    p2.sayName(); // mangwu
    p3.sayName(); // wumang
    ```
    
    - `sayName` è¢«å®šä¹‰åœ¨æ„é€ å‡½æ•°å¤–éƒ¨
    - åœ¨æ„é€ å‡½æ•°å†…éƒ¨ï¼Œ`sayName`å±æ€§ç­‰äºå…¨å±€`sayName()`å‡½æ•°ï¼Œ æ‰€ä»¥ä¸¤ä¸ªå®ä¾‹æŒ‡å‘çš„éƒ½æ˜¯ä¸€ä¸ªå¤–éƒ¨å‡½æ•°çš„æŒ‡é’ˆï¼ŒäºŒè€…å…±äº«å®šä¹‰åœ¨å…¨å±€ä½œç”¨åŸŸä¸Šçš„`sayName()`å‡½æ•°
    - å› ä¸º`**this` å¯¹è±¡å¯ä»¥æŠŠå‡½æ•°ä¸å¯¹è±¡çš„ç»‘å®šæ¨è¿Ÿåˆ°è¿è¡Œæ—¶ï¼Œ**æ‰€ä»¥å®ä¾‹è°ƒç”¨æ—¶æ‰“å°çš„æ˜¯å¯¹åº”å®ä¾‹çš„`name`
- ä½¿ç”¨è¿™ç§æ–¹æ³•è™½ç„¶è§£å†³äº†å‡½æ•°é‡å¤å®šä¹‰çš„é—®é¢˜ï¼Œä½†æ˜¯ä¹Ÿå¸¦æ¥äº†æ–°çš„é—®é¢˜
    - å…¨å±€ä½œç”¨åŸŸè¢«æä¹±äº†ï¼Œå› ä¸ºå‡½æ•°å®é™…ä¸Šåªèƒ½åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šè°ƒç”¨è€Œä¸èƒ½åœ¨å…¨å±€ä½œç”¨åŸŸä¸Šè°ƒç”¨
    - å¦‚æœå¯¹è±¡éœ€è¦å¤šä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆå…¨å±€ä½œç”¨åŸŸä¼šå®šä¹‰å¤šä¸ªå‡½æ•°ï¼Œå¯¼è‡´è‡ªå®šä¹‰ç±»å‹å¼•ç”¨çš„ä»£ç ä¸èƒ½å¾ˆå¥½çš„èšé›†åœ¨ä¸€èµ·
- ä¸‹é¢ä»‹ç»çš„åŸå‹æ¨¡å¼å¯ä»¥å®Œç¾çš„è§£å†³é—®é¢˜ï¼Œæ—¢ä¸é‡å¤å‡½æ•°å®šä¹‰ï¼Œä¹Ÿä¸æä¹±å…¨å±€ä½œç”¨åŸŸ

# 2.4 åŸå‹æ¨¡å¼

## 2.4.1 åŸºæœ¬æ€æƒ³

- **æ¯ä¸ªå‡½æ•°éƒ½ä¼šåˆ›å»ºä¸€ä¸ª `prototype` å±æ€§ï¼Œ**è¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«åº”è¯¥ç”±ç‰¹å®šå¼•ç”¨ç±»å‹çš„å®ä¾‹å…±äº«çš„å±æ€§å’Œæ–¹æ³•
    
    ![Untitled](2%20%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1/Untitled%203.png)
    
    - `Test`æ˜¯ä¸€ä¸ªç©ºçš„å‡½æ•°
    - å®ƒçš„`prototype`å±æ€§å¯¹è±¡é»˜è®¤åŒ…å«ä¸¤ä¸ªå†…å®¹
        - `constructor`å±æ€§ï¼Œå±æ€§å€¼ä¸º`Test` å‡½æ•°å¯¹è±¡æœ¬èº«
        - [[Prototype]]ç‰¹æ€§ï¼Œè¢«èµ‹äºˆ`Object`æ„é€ å‡½æ•°çš„`prototype`å±æ€§,å³`Object`çš„åŸå‹é“¾
- å®é™…ä¸Šå‡½æ•°çš„`prototype`å±æ€§å°±æ˜¯é€šè¿‡è°ƒç”¨æ„é€ å‡½æ•°åˆ›å»ºçš„**å¯¹è±¡çš„åŸå‹ï¼Œ** å¦‚ä¸‹æ˜¯æ„é€ å‡½æ•°æ—¶åº•å±‚åšçš„ä¸€æ­¥
    
    [**è¿™ä¸ªæ–°å¯¹è±¡çš„å†…éƒ¨çš„[[Prototype]]ç‰¹æ€§è¢«èµ‹å€¼ä¸ºæ„é€ å‡½æ•°çš„prototypeå±æ€§**](2%20%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1.md) 
    
- ä½¿ç”¨**åŸå‹å¯¹è±¡ï¼ˆprototype objectï¼‰**çš„å¥½å¤„åœ¨äºï¼Œåœ¨å®ƒå£°æ˜å®šä¹‰çš„å±æ€§å’Œæ–¹æ³•å¯ä»¥è¢«**å¯¹è±¡å®ä¾‹å…±äº«**ï¼ŒåŸæ¥åœ¨æ„é€ å‡½æ•°ä¸­ç›´æ¥èµ‹å€¼ç»™å¯¹è±¡å®ä¾‹çš„å€¼ï¼Œå¯ä»¥ç›´æ¥èµ‹å€¼ç»™å®ƒä»¬çš„**åŸå‹ï¼Œ**ä¾‹å¦‚
    
    ```jsx
    function Person() {}
    Person.prototype.age = 22;
    Person.prototype.name = "mangwu";
    Person.prototype.sayName = function () {
      console.log(this.name);
    };
    const p = new Person();
    console.log(p, p.__proto__); // Person {} { age: 22, name: 'mangwu', sayName: [Function (anonymous)] }
    p.sayName() // mangwu
    ```
    
    - æ‰“å°å®ä¾‹`p` å®ƒæ˜¯ç©ºçš„ï¼Œå› ä¸ºæ‰€æœ‰çš„å±æ€§å’Œæ–¹æ³•éƒ½å®šä¹‰åœ¨äº†æ„é€ å‡½æ•°çš„åŸå‹ä¸Š
    - æ„é€ å‡½æ•°åŸå‹ä¼šè¢«èµ‹å€¼åˆ°å®ä¾‹çš„[[Prototype]]ç‰¹æ€§ä¸Šï¼Œè¿™ä¸ªç‰¹æ€§å…¶å®å°±æ˜¯`__proto__` å±æ€§ï¼Œæ‰€ä»¥æ‰“å°å®ƒä¼šæ˜¾ç¤ºå®šä¹‰åœ¨å‡½æ•°åŸå‹ä¸Šçš„å±æ€§å’Œæ–¹æ³•
    - å¥ç‚¹è°ƒç”¨å®ä¾‹`p` çš„`sayName()`æ–¹æ³•ï¼Œé¦–å…ˆä¼šåœ¨å®ä¾‹çš„è‡ªæœ‰ï¼ˆ**own**ï¼‰å±æ€§ä¸ŠæŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾ä¸åˆ°å°±åˆ°å®ä¾‹çš„`[[Prototype]]` ç‰¹æ€§ä¸Šæ‰¾ï¼Œæ˜¾ç„¶å¯ä»¥æ‰¾åˆ°ä¹‹å‰å®šä¹‰çš„æ–¹æ³•ï¼›è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ**é€šè¿‡åŸå‹æ¨¡å¼å®šä¹‰çš„å±æ€§å’Œæ–¹æ³•ç”±æ‰€æœ‰å®ä¾‹å…±äº«**çš„åˆ°åŸå› 

## 2.4.2 ç†è§£åŸå‹

- åŸå‹å¯¹è±¡çš„åŸºæœ¬è§„èŒƒ
    - æ— è®ºä½•æ—¶ï¼Œåªè¦åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œå°±ä¼šæŒ‰ç…§ç‰¹å®šçš„è§„åˆ™ä¸ºè¿™ä¸ªå‡½æ•°åˆ›å»ºä¸€ä¸ª`prototype` å±æ€§ï¼Œè¯¥å±æ€§æŒ‡å‘**åŸå‹å¯¹è±¡**
    - é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰åŸå‹å¯¹è±¡è‡ªåŠ¨è·å¾—ä¸€ä¸ªåä¸º`constructor`çš„å±æ€§ï¼ŒæŒ‡å‘ä¸ä¹‹å…³è”çš„æ„é€ å‡½æ•°
    - å› æ„é€ å‡½æ•°çš„å·®å¼‚ï¼Œå¯èƒ½ä¼šç»™åŸå‹å¯¹è±¡æ·»åŠ å…¶ä»–å±æ€§å’Œæ–¹æ³•
- **å®ä¾‹ä¸æ„é€ å‡½æ•°åŸå‹ï¼ˆprototypeï¼‰ä¹‹é—´æœ‰ç›´æ¥è”ç³»ï¼Œä½†å®ä¾‹ä¸æ„é€ å‡½æ•°ä¹‹é—´æ²¡æœ‰**
    - è‡ªå®šä¹‰æ„é€ å‡½æ•°æ—¶ï¼Œå‡½æ•°çš„åŸå‹å¯¹è±¡åªä¼šè·å¾—`constructor` å±æ€§
    - å‡½æ•°çš„åŸå‹çš„å…¶ä»–æ‰€æœ‰æ–¹æ³•éƒ½ç»§æ‰¿è‡ª`Object` , å› ä¸º**åŸå‹å¯¹è±¡**çš„[[Prototype]]ç‰¹æ€§è¢«èµ‹å€¼`Object`æ„é€ å‡½æ•°çš„**åŸå‹**ï¼ˆ**prototype**ï¼‰
    - æ¯æ¬¡è°ƒç”¨æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°å®ä¾‹ï¼Œè¿™ä¸ªå®ä¾‹å†…éƒ¨[[Prototype]]ç‰¹æ€§æŒ‡é’ˆå°±ä¼šè¢«èµ‹å€¼ä¸ºæ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡
    - JavaScriptæ²¡æœ‰è§„èŒƒè¿™ä¸ª[[Prototype]]ç‰¹æ€§æŒ‡é’ˆçš„è®¿é—®æ ‡å‡†æ–¹å¼ï¼Œä½†æ˜¯ç«ç‹ã€Safariã€Chromeéƒ½ä¼šåœ¨æ¯ä¸ªå¯¹è±¡ä¸Šæš´éœ²`__proto__` å±æ€§ï¼Œé€šè¿‡è¿™ä¸ªå±æ€§å¯ä»¥è®¿é—®å¯¹è±¡çš„åŸå‹
- ä»¥ä¸Šé¢çš„[Person](2%20%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1.md)ä¸ºä¾‹å­ï¼Œå¯è§†åŒ–å…¶åŸå‹é“¾
    
    ![åŸå‹é“¾.png](2%20%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1/%25E5%258E%259F%25E5%259E%258B%25E9%2593%25BE.png)
    
    - å£°æ˜æ„é€ å‡½æ•°`Person` åï¼Œå®ƒå°±æœ‰äº†ä¸€ä¸ªä¸ä¹‹å…³è”çš„åŸå‹å¯¹è±¡(**Person Prototype Object**)ï¼Œä½¿ç”¨å±æ€§`Person.prototype` æŒ‡å‘è¿™ä¸ªåŸå‹å¯¹è±¡
    - `Person`å…³è”çš„åŸå‹å¯¹è±¡æœ¬èº«ä¹Ÿæœ‰ä¸€ä¸ª`constructor` å±æ€§å¼•ç”¨æ„é€ å‡½æ•°ï¼Œæ¢å¥è¯è¯´ï¼ŒåŸå‹å¯¹è±¡å’Œæ„é€ å‡½æ•°**å¾ªç¯å¼•ç”¨**
    - å’Œ`Person` ä¸€æ ·ï¼ŒJavaScriptå†…ç½®çš„`Object` æ„é€ å‡½æ•°ä¹Ÿæœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„åŸå‹å¯¹è±¡ï¼ˆ**Object Prototype Object**ï¼‰,ä½¿ç”¨å±æ€§`Object.prototype` æŒ‡å‘`Object`çš„åŸå‹å¯¹è±¡
    - `Object`çš„åŸå‹å¯¹è±¡æœ¬èº«ä¹Ÿæœ‰ä¸€ä¸ª`constructor` å±æ€§å¼•ç”¨`Object`æ„é€ å‡½æ•°
    - `Person` çš„åŸå‹å¯¹è±¡çš„[[Prototype]]ç‰¹æ€§æŒ‡é’ˆæŒ‡å‘`Object` æ„é€ å‡½æ•°å…³è”çš„åŸå‹å¯¹è±¡ï¼ˆ**Object Prototype Object**ï¼‰,æ‰€æœ‰æ­£å¸¸çš„åŸå‹é“¾éƒ½ä¼šç»ˆæ­¢äº`Object` æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ï¼Œè€ŒObjectåŸå‹å¯¹è±¡çš„[[Prototype]] æ˜¯`null`
    - æ„é€ å‡½æ•°ï¼ŒåŸå‹å¯¹è±¡å’Œå®ä¾‹æ˜¯ä¸‰ä¸ªå®Œå…¨ä¸åŒçš„å¯¹è±¡ï¼Œæ„é€ å‡½æ•°é€šè¿‡`prototype` å…³è”å¯¹åº”çš„åŸå‹å¯¹è±¡ï¼Œè€ŒåŸå‹å¯¹è±¡å’Œå®ä¾‹é€šè¿‡[[Prototype]]å…³è”åŸå‹é“¾ä¸Šçš„ä¸‹ä¸€ä¸ªåŸå‹å¯¹è±¡ï¼Œç›´åˆ°Objectçš„åŸå‹å¯¹è±¡ç»ˆæ­¢ï¼Œå› ä¸ºObjectçš„åŸå‹å¯¹è±¡çš„[[Prototype]]æ˜¯`null`
    - `[[Prototype]]` æ˜¯éšè—ç‰¹æ€§ï¼Œåœ¨ä¸€äº›JavaScriptå¼•æ“ä¸­ï¼Œä½¿ç”¨`__proto__` å±æ€§è¡¨ç¤ºå®ƒï¼Œå®ƒé“¾æ¥åˆ°ä¸€ä¸ªåŸå‹å¯¹è±¡ä¸Š
    - **å®ä¾‹ä¸æ„é€ å‡½æ•°æ²¡æœ‰ç›´æ¥è”ç³»ï¼Œä¸åŸå‹å¯¹è±¡æœ‰ç›´æ¥è”ç³»**ï¼Œå®ä¾‹å’Œæ„é€ å‡½æ•°éƒ½é€šè¿‡åŸå‹é“¾é“¾æ¥å¯¹åº”çš„åŸå‹å¯¹è±¡
- ä¾‹å­
    
    ```jsx
    // ç†è§£åŸå‹
    function Person() {}
    // å£°æ˜æ„é€ å‡½æ•°åï¼Œå°±æœ‰äº†ä¸ä¹‹å…³è”çš„åŸå‹å¯¹è±¡
    console.log(typeof Person.prototype); // Object
    console.log(Person.prototype); // {constructor: *f* Person, [[Prototype]]: Object}
    
    // Personå…³è”çš„åŸå‹å¯¹è±¡æœ¬èº«å…·æœ‰constructorå±æ€§å¼•ç”¨æ„é€ å‡½æ•°ï¼ŒäºŒè€…å¾ªç¯å¼•ç”¨
    console.log(Person.prototype.constructor === Person); // true
    // å’ŒPersonä¸€æ ·ï¼Œå†…ç½®çš„Objectå¯¹è±¡ä¹Ÿæœ‰å…³è”çš„åŸå‹å¯¹è±¡ï¼Œä¸”äºŒè€…ä¹Ÿå¾ªç¯å¼•ç”¨
    console.log(Object.prototype.constructor === Object); // true
    
    // Personå…³è”çš„åŸå‹å¯¹è±¡çš„[[Prototype]]ç‰¹æ€§æŒ‡é’ˆæŒ‡å‘Objectå…³è”çš„åŸå‹å¯¹è±¡
    // æ‰€æœ‰æ­£å¸¸çš„åŸå‹é“¾éƒ½ä¼šç»ˆæ­¢äºObjectæ„é€ å‡½æ•°å…³è”çš„åŸå‹å¯¹è±¡ï¼Œå› ä¸ºå®ƒæ˜¯åŸºç±»
    // è€ŒObject åŸå‹å¯¹è±¡çš„[[Prototype]]æ˜¯null
    console.log(Person.prototype.__proto__ === Object.prototype); // true
    console.log(Person.prototype.__proto__.constructor === Object); // true
    console.log(Perosn.prototype.__proto__.__proto__ === null); // true
    
    let person1 = new Person();
    // æ„é€ å‡½æ•°ï¼Œå®ä¾‹ï¼ŒåŸå‹å¯¹è±¡æ˜¯ä¸‰ä¸ªå®Œå…¨ä¸åŒçš„å¯¹è±¡ï¼Œå®ä¾‹é€šè¿‡[[Prototype]]å…³è”åŸå‹å¯¹è±¡
    console.log(person1.__proto__ === Person.prototype); // true
    console.log(person1.__proto__.constructor === Person); // true
    
    let person2 = new Person();
    // åŒä¸€ä¸ªæ„é€ å‡½æ•°çš„å®ä¾‹å…±äº«åŒä¸€ä¸ªåŸå‹å¯¹è±¡
    console.log(person1.__proto__ === person2.__proto__); // true
    
    // instanceofé€šè¿‡æ£€æŸ¥å®ä¾‹çš„åŸå‹é“¾æ˜¯å¦åŒ…å«æŒ‡å®šæ„é€ å‡½æ•°çš„åŸå‹æ¥åˆ¤æ–­æ˜¯å¦æ˜¯è¯¥æ„é€ å‡½æ•°çš„å®ä¾‹
    // é€šè¿‡[[Prototype]]ç‰¹æ€§è·å–åŸå‹å¯¹è±¡ï¼ŒåŸå‹å¯¹è±¡ä¸­çš„constructorå±æ€§æ˜¯åˆ¤æ–­ä¾æ®
    console.log(person1 instanceof Person); // true
    console.log(person1 instanceof Object); // true
    console.log(Peron.prototype instanceof Object); // true
    ```
    

### 2.4.2.1 æ£€æŸ¥å®ä¾‹çš„åŸå‹å¯¹è±¡

- `Object.prototype.isPrototypeOf()` æ–¹æ³•æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å­˜åœ¨äºå…¶å®ƒå¯¹è±¡çš„**åŸå‹é“¾**(**prototype chain**)ä¸Š,é€šå¸¸è°ƒç”¨çš„å¯¹è±¡æ˜¯æŸä¸ªæ„é€ å‡½æ•°ç®¡ç†çš„**åŸå‹å¯¹è±¡**(**prototype object**), è€Œå…¶å®ƒå¯¹è±¡ä¸€èˆ¬ä¸ºå¯¹è±¡å®ä¾‹
- è¯­æ³•
    
    ```jsx
    isPrototypeOf(object);
    ```
    
    - å‚æ•° `object` ï¼Œä¸€ä¸ªè¢«æ£€æŸ¥åŸå‹é“¾çš„å¯¹è±¡
    - è¿”å›å€¼ï¼Œå¸ƒå°”å€¼ï¼Œå¦‚æœè°ƒç”¨å¯¹è±¡ä½äºæŒ‡å®šå¯¹è±¡ï¼ˆ`object`ï¼‰çš„åŸé¡¹é“¾ä¸Šï¼Œåˆ™è¿”å›`true` å¦åˆ™è¿”å›`false`
- **æ³¨æ„**`isPrototypeOf()` ä¸åŒäº`instanceof` æ“ä½œç¬¦ï¼Œ ~~`obj instanceof AFunction` è¡¨è¾¾å¼ä¸­ï¼Œ`instanceof` æ£€æŸ¥å¯¹è±¡åŸå‹é“¾ä¸­æ˜¯å¦æœ‰å‡½æ•°æœ¬èº«è€Œä¸æ˜¯æ˜¯å¦åŒ…å«`AFunction.prototype`~~

> å¤‡æ³¨ï¼šisPrototypeOfä¸instanceOfè¿ç®—ç¬¦ä¸åŒï¼Œåœ¨è¡¨è¾¾å¼â€object instanceOf AFucntionâ€ä¸­ï¼Œobject'çš„åŸå‹é“¾æ˜¯é’ˆå¯¹AFunction.prototypeè¿›è¡Œæ£€æŸ¥çš„ï¼Œè€Œä¸æ˜¯AFunctionæœ¬èº«
> 
- ä¾‹å­
    
    ```jsx
    // æ£€æŸ¥å¯¹è±¡æ˜¯å¦å­˜åœ¨äºå¦ä¸€ä¸ªå¯¹è±¡çš„åŸé¡¹é“¾ä¸Š
    function Person() {}
    
    class Student extends Person {}
    
    const person = new Person();
    const student = new Student();
    console.log(person.__proto__.isPrototypeOf(student)); // true
    console.log(Person.prototype.isPrototypeOf(student)); // true
    console.log(Student.prototype.isPrototypeOf(student)); // true
    console.log(student.__proto__.isPrototypeOf(person)); // false
    console.log(Student.prototype.__proto__.isPrototypeOf(person)); // true
    console.log(Person.prototype.isPrototypeOf(Student.prototype)); // true
    ```
    
    - åŸå‹é“¾æ˜¯è¿™æ ·çš„ï¼š
        
        <aside>
        âšª Student.prototype  â†’ Person.prototype â†’ Object.prototype
        
        â†‘                                  â†‘                               â†‘
        
        student                       person                      objectÂ 
        
        </aside>
        
    - `person.__proto___` ç­‰ä»·äº `Person.prototype` , `student.__proto__` ç­‰ä»·äº `Student.prototype`
    - `Student.prototype.__proto__` ç­‰ä»·äº `Person.prototype`

### 2.4.2.2 è·å–å®ä¾‹å¯¹è±¡çš„åŸå‹é“¾

- `Object.getPrototypeOf()` è¿”å›å‚æ•°çš„å†…éƒ¨ç‰¹æ€§[[Prototype]]çš„å€¼ï¼Œå®ƒå±äºECMAScript è§„èŒƒçš„è·å–åŸå‹é“¾çš„æ ‡å‡†é™æ€æ–¹æ³•ï¼Œåªä¸è¿‡åœ¨ä¸€äº›JavaScriptå¼•æ“ä¸­ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨`__proto__` å±æ€§è·å–å¯¹è±¡çš„åŸå‹é“¾
- è¯­æ³•
    
    ```jsx
    Object.getPrototypeOf(obj)
    ```
    
    - å‚æ•° `obj` éœ€è¦è·å–åŸå‹é“¾çš„å®ä¾‹å¯¹è±¡
    - è¿”å›å€¼ï¼š`obj` çš„[[Prototype]]ç‰¹æ€§çš„å€¼ï¼Œå¯èƒ½ä¸º`null` ï¼ˆåœ¨`obj`æ˜¯`Object`æ„é€ å‡½æ•°å…³è”çš„**prototype object**æ—¶ï¼‰
- ä¾‹å­
    
    ```jsx
    function Person() {}
    const person = new Person();
    console.log(Object.getPrototypeOf(person) === person.__proto__); // true
    console.log(Object.getPrototypeOf(person) === Person.prototype); // true
    console.log(Object.getPrototypeOf(Object.prototype) === null); // true
    ```
    
- ä½¿ç”¨`Object.getPorotypeOf()` æ–¹æ³•å¯ä»¥æ–¹ä¾¿çš„è·å–ä¸€ä¸ªå¯¹è±¡çš„åŸé¡¹é“¾ï¼Œè¿™åœ¨é€šè¿‡åŸå‹å®ç°ç»§æ‰¿æ—¶å°¤ä¸ºé‡è¦

### 2.4.2.3 é‡æ–°è®¾ç½®å®ä¾‹å¯¹è±¡çš„åŸå‹é“¾

- `Object.setPrototypeOf()` æ–¹æ³•å¯ä»¥å‘å®ä¾‹çš„ç§æœ‰ç‰¹æ€§[[Prototype]]å†™å…¥ä¸€ä¸ªæ–°å€¼ï¼Œè¿™æ ·å°±é‡å†™äº†ä¸€ä¸ªå¯¹è±¡çš„åŸå‹ç»§æ‰¿å…³ç³»
- å…³äºä½¿ç”¨`setPrototypeOf()` çš„è­¦å‘Š
    
    <aside>
    âš ï¸ æ ¹æ®ç°ä»£JavaScriptå¼•æ“ä¼˜åŒ–å±æ€§è®¿é—®çš„åº•å±‚å®ç°ï¼Œæ”¹å˜ä¸€ä¸ªå¯¹è±¡çš„[[Prototype]]ç‰¹æ€§å€¼ï¼Œåœ¨æ¯ä¸ªç°ä»£æµè§ˆå™¨å’ŒJavaScriptå¼•æ“ä¸­éƒ½æ˜¯ä¸€ä¸ªéå¸¸ç¼“æ…¢çš„æ“ä½œã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä¸ä»…`Object.setPrototypeOf()`è¯­å¥æ‰§è¡Œä¼šèŠ±è´¹å¾ˆé•¿æ—¶é—´ï¼Œæ”¹å˜ç»§æ‰¿ï¼ˆinheritanceï¼‰çš„å½±å“ä¹Ÿæ˜¯å¾®å¦™ï¼ˆsubtleï¼‰å’Œå¹¿æ³›çš„(far-flung)ï¼Œå®ƒå½±å“åˆ°ä»»ä½•è®¿é—®è¢«æ›´æ”¹åŸå‹é“¾å¯¹è±¡çš„è®¿é—®é€Ÿåº¦ã€‚å…³äºJavaScriptå¼•æ“å±æ€§è®¿é—®ä¼˜åŒ–å¯ä»¥æŸ¥çœ‹[JavaScript engine fundamentals: optimizing prototypes](https://mathiasbynens.be/notes/prototypes) ã€‚
    
    å› ä¸ºè¿™ä¸ªç‰¹æ€§æ˜¯è¯­è¨€çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥JavaScriptå¼•æ“å¼€å‘äººå‘˜ä¾ç„¶æœ‰è´£ä»»å°†è¿™ä¸ªæ¥å£çš„æ€§èƒ½å®ç°åœ°æ›´åŠ ç†æƒ³ã€‚ä½†æ˜¯åœ¨å¼•æ“å¼€å‘è€…è§£å†³è¿™ä¸ªé—®é¢˜å‰ï¼Œå¦‚æœä½ å…³å¿ƒæ€§èƒ½ï¼Œå°±ä¸åº”è¯¥ä½¿ç”¨å®ƒæ¥è®¾ç½®å¯¹è±¡åœ°[[Prototype]]ç‰¹æ€§å€¼
    
    </aside>
    
- è¯­æ³•
    
    ```jsx
    Object.setPrototypeOf(obj, prototype);
    ```
    
    - å‚æ•°
        - `obj` è¢«è®¾ç½®åŸå‹çš„å¯¹è±¡
        - `prototype` ï¼š`obj` å¯¹è±¡çš„æ–°åŸå‹ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–`null`
    - è¿”å›å€¼ï¼Œè¢«è®¾ç½®æŒ‡å®šåŸå‹çš„`obj`
    - æŠ›å‡ºé”™è¯¯`TypeError` çš„æƒ…å†µ
        - å¦‚æœ`obj` æ˜¯**ä¸å¯æ‰©å±•çš„**ï¼ˆ**non-extensible**ï¼‰,æˆ–å®ƒæ˜¯ä¸€ä¸ª**ä¸å¯å˜åŸå‹å¥‡å¼‚å¯¹è±¡**ï¼ˆ**immutable prototype exotic object**ï¼‰ï¼Œä¾‹å¦‚`Object.prototype` æˆ–`window`
        - `prototype` ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–`null`
    - å¦‚æœ`obj` ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œæ˜¯åŸå§‹æ•°æ®ç±»å‹ï¼Œè¿™ä¸ªæ–¹æ³•ä»€ä¹ˆä¹Ÿä¸ä¼šåš
- å®‰å…¨æ€§
    - `Object.setPrototypeOf()` æ˜¯æ ‡å‡†çš„é‡ç½®å¯¹è±¡çš„åŸå‹é“¾çš„æ–¹æ³•ï¼Œè¯·ä¸è¦ä½¿ç”¨`Object.prototype.__proto__` å±æ€§è®¿é—®ä¿®æ”¹å¯¹è±¡çš„[[Prototype]] ï¼Œè¯¥å±æ€§ä¸å†è§„èŒƒå†…
    - ä¸ºäº†å®‰å…¨ï¼Œæœ‰äº›å†…ç½®å¯¹è±¡è¢«è®¾è®¡æ‹¥æœ‰**ä¸å¯å˜åŸå‹**ï¼ˆ**immutable prototype**ï¼‰ã€‚è¿™æ˜¯ä¸ºäº†é˜²æ­¢å¯èƒ½çš„**åŸå‹æ±¡æŸ“æ”»å‡»**ï¼ˆprototype pollution attackï¼‰,ä¾‹å¦‚æµè§ˆå™¨çš„ä»£ç†å®‰å…¨é—®é¢˜ï¼ˆ**[Proxy-related security](https://github.com/tc39/ecma262/issues/272)**ï¼‰
        - JavaScriptæ ¸å¿ƒè¯­è¨€åªä¼šè®¾è®¡`Object.prototype` æ˜¯ä¸€ä¸ª**ä¸å¯å˜åŸå‹å¥‡å¼‚å¯¹è±¡**ï¼Œå®ƒçš„åŸå‹æ€»æ˜¯`null`
        - åœ¨æµè§ˆå™¨ä¸­ï¼Œ`window` å’Œ`location` ä¹Ÿæ˜¯**ä¸å¯å˜åŸå‹å¥‡å¼‚å¯¹è±¡**
- ä¾‹å­
    
    ```jsx
    	function Person(age, name) {
      this.age = age;
      this.name = name;
    }
    
    Person.prototype.sayName = function () {
      console.log(this.name);
    };
    
    const person1 = new Person(23, "wumang");
    const person2 = new Person(22, "mangwu");
    
    console.log(person1);
    console.log(person2);
    Object.setPrototypeOf(person1, person2);
    console.log(person1);
    console.log(person2);
    console.log(person2.isPrototypeOf(person1)); // true
    ```
    
    - åˆå§‹æ—¶ï¼Œ`person1`, `person2`æ‹¥æœ‰ç›¸åŒçš„ç»“æ„ï¼š
        
        ![Untitled](2%20%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1/Untitled%204.png)
        
        - å’Œä¹‹å‰çš„å¯è§†åŒ–[åŸå‹é“¾.png](2%20%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1.md) ç±»ä¼¼ï¼Œå®ä¾‹[[Prototype]]ç‰¹æ€§æŒ‡å‘`Person.prototype` åŸå‹å¯¹è±¡ï¼Œ`Person.prototype` å¯¹è±¡çš„[[Prototype]]ç‰¹æ€§æŒ‡å‘`Object.prototype` åŸå‹å¯¹è±¡
    - æ‰§è¡Œ`Object.setPrototypeOf(person1, person2);` è¡¨ç¤ºå°†`person1` çš„[[Prototype]]èµ‹å€¼ä¸º`person2` ,`person2` ä¸ä¼šå‘ç”Ÿæ”¹å˜ï¼Œè€Œ`person1` çš„åŸå‹é“¾ä¼šå‘ç”Ÿæ”¹å˜ï¼š
        
        ![Untitled](2%20%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1/Untitled%205.png)
        
        - `person1` çš„[[Prototype]]è¢«ç›´æ¥èµ‹å€¼`person2` æ‰€ä»¥`person1.__proto__=== person2` æˆç«‹ï¼Œè¿›è€Œ`person2` çš„[[Prototype]]æ›´å‡†ç¡®çš„æ˜¯`Person`ç±»å‹

### 2.4.2.4 åˆå§‹è®¾ç½®å¯¹è±¡å®ä¾‹çš„åŸå‹é“¾

- ä¸ºäº†é¿å…`Object.setPrototypeOf()` å¯èƒ½é€ æˆçš„æ€§èƒ½ä¸‹é™ï¼Œå¯ä»¥é€šè¿‡`Object`çš„å¦å¤–ä¸€ä¸ªé™æ€æ–¹æ³•`Object.create()` åˆ›é€ ä¸€ä¸ªæ–°å¯¹è±¡çš„åŒæ—¶æŒ‡å®šåŸå‹
- `Object.create()` ä½¿ç”¨ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å¯¹è±¡ä½œä¸ºåˆ›å»ºçš„æ–°å¯¹è±¡çš„åŸå‹ï¼ˆ`prototype`ï¼‰ï¼Œ`Object.create(Object.prototype)` é€»è¾‘ç­‰ä»·äº `{}`
- è¯­æ³•
    
    ```jsx
    Object.create(proto);
    Object.create(proto, propertiesObject);
    ```
    
    - å‚æ•°
        - `proto` : ä½œä¸ºæ–°åˆ›å»ºçš„å¯¹è±¡çš„[[Prototype]]ç‰¹æ€§å€¼ï¼Œå¯ä»¥æ˜¯`null`
        - `propertiesObject` : å±æ€§æè¿°ç¬¦é›†åˆï¼Œå¯é€‰ï¼Œä¸ºæ–°åˆ›å»ºå¯¹è±¡æ·»åŠ **è‡ªæœ‰ï¼ˆownï¼‰**çš„å±æ€§ï¼Œè¿™ä¸ªå±æ€§å’Œ`Object.defineProperties()` çš„ç¬¬äºŒä¸ªå‚æ•°ä¸€æ ·çš„ç»“æ„ï¼Œè¯¦æƒ…æŸ¥çœ‹[1.3 å®šä¹‰å¤šä¸ªå±æ€§](1%20%E7%90%86%E8%A7%A3%E5%AF%B9%E8%B1%A1.md)
    - è¿”å›å€¼
        - è¿”å›ä¸€ä¸ªæŒ‡å®šåŸå‹å’Œå±æ€§çš„æ–°å¯¹è±¡
    - å¯èƒ½æŠ›å‡ºçš„`TypeError`é”™è¯¯
        - `proto` å¯ä»¥æ˜¯å¯¹è±¡æˆ–`null`
        - `proto` ä¸èƒ½æ˜¯åŸå§‹æ•°æ®ç±»å‹ï¼Œæˆ–**åŸå‹åŒ…è£…ç±»å‹**ï¼ˆ**primitive wrapper objects**ï¼‰,å¦‚`new String("123")`
- **çº¯å‡€å¯¹è±¡ï¼šåŸå‹æ˜¯ç©ºçš„å¯¹è±¡ï¼Œ**å¯ä»¥é€šè¿‡`Object.create(null)`æ–¹å¼åˆ›å»ºï¼Œä¸‹é¢é¡µé¢æ˜¯å¯¹å…¶çš„ä»‹ç»
    
    [Object with `null` prototype](2%20%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1/Object%20with%20null%20prototype.md)
    
- ä¾‹å­
    
    ```jsx
    function Person(age, name) {
      this.age = age;
      this.name = name;
    }
    Person.prototype.sayName = function () {
      console.log(this.name);
    };
    const person = new Person(22, "mangwu");
    
    // åŸºäºpersonåˆ›å»ºæ–°å¯¹è±¡
    const student = Object.create(person);
    student.university = "wh university";
    console.log(person);
    console.log(student);
    console.log(Object.getPrototypeOf(student) === person); // true
    console.log(person.isPrototypeOf(student)); // true
    ```
    
    - `person`æ‰“å°
        
        ![Untitled](2%20%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1/Untitled%206.png)
        
    - `student` æ‰“å°
        
        ![Untitled](2%20%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1/Untitled%207.png)
        
    - å¯ä»¥å‘ç°ï¼Œå’Œ`Object.setPrototypeOf()` æ–¹æ³•çš„åŠŸèƒ½æ˜¯ç±»ä¼¼çš„ï¼Œä½†æ˜¯åªä½¿ç”¨`Object.create()` æ²¡æœ‰æ€§èƒ½çš„é—®é¢˜

## 2.4.3 åŸå‹å±‚çº§

### 2.4.3.1 è®¿é—®å¯¹è±¡å±æ€§çš„åŸç†

1. é€šè¿‡å¯¹è±¡è®¿é—®å±æ€§ï¼Œä¼šæŒ‰ç…§å±æ€§çš„åç§°è¿›è¡Œæœç´¢
2. æœç´¢å¼€å§‹äºå¯¹è±¡å®ä¾‹æœ¬èº«ï¼ˆæœç´¢è‡ªæœ‰å±æ€§ï¼‰
3. å¦‚æœåœ¨è¿™ä¸ªç¤ºä¾‹ä¸Šå‘ç°äº†ç»™å®šçš„åç§°ï¼Œåˆ™ä¼šè¿”å›å¯¹åº”çš„å€¼
4. å¦‚æœæ²¡æœ‰æœç´¢åˆ°ï¼Œä¼šæ²¿ç€æŒ‡é’ˆè¿›å…¥åˆ°å¯¹è±¡çš„[[Prototype]]ç‰¹æ€§çš„åŸå‹å¯¹è±¡ä¸­
5. å¦‚æœåœ¨åŸå‹å¯¹è±¡ä¸Šæ‰¾åˆ°å±æ€§ï¼Œå°±è¿”å›è¯¥å±æ€§å€¼ï¼Œå¦åˆ™æ²¿ç€æŒ‡é’ˆè¿›å…¥åˆ°åŸå‹å¯¹è±¡çš„[[Prototype]]ç‰¹æ€§çš„åŸå‹å¯¹è±¡ä¸Š
6. ç›´åˆ°æ‰¾åˆ°æœ€åº•å±‚`Object` æ„é€ å‡½æ•°å…³è”çš„åŸå‹å¯¹è±¡ `Object.prototype` ï¼Œ[å› ä¸º`Object.prototype.__proto__` å›ºå®šä¸º`null`](2%20%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1.md) 
7. å¦‚æœæ‰¾åˆ°åº•å±‚éƒ½æ²¡æœ‰æ‰¾åˆ°è¯¥å±æ€§ï¼Œåˆ™è¿”å›`undefined`
- ä¸Šè¿°è®¿é—®å¯¹è±¡å±æ€§çš„åŸç†ä¹Ÿæ˜¯**åŸå‹ç”¨äºåœ¨å¤šä¸ªå¯¹è±¡å®ä¾‹ä¹‹é—´å…±äº«å±æ€§å’Œæ–¹æ³•çš„åŸå› **

### 2.4.3.2 é®è”½ï¼ˆshadowï¼‰åŸå‹å±æ€§

- è™½ç„¶å¯ä»¥é€šè¿‡å®ä¾‹è¯»å–åŸå‹é“¾ä¸Šçš„å€¼ï¼Œä½†æ˜¯**ä¸èƒ½**é€šè¿‡å®ä¾‹é‡å†™è¿™äº›å€¼
    - é€šè¿‡`Object.getPrototypeOf()` æˆ–æœ‰äº›å¼•æ“å®ç°çš„`__proto__` å±æ€§å¯ä»¥è½»æ¾è®¿é—®å¹¶æ›´æ”¹å®ä¾‹åŸå‹é“¾ä¸Šçš„å±æ€§ï¼Œè¿™é‡Œè¯´çš„ä¸èƒ½**ä¸æ˜¯æŒ‡**ä¸èƒ½å®ç°ï¼Œè€Œæ˜¯æŒ‡è¿™æ ·åšæ˜¯ä¸å’Œé€»è¾‘çš„ï¼Œéæ³•çš„
    - å› ä¸ºé€šè¿‡ä¸€ä¸ªå®ä¾‹ä¿®æ”¹äº†åŸå‹é“¾ä¸Šçš„å±æ€§åï¼Œå…¶å®ƒç»§æ‰¿äº†è¯¥åŸå‹å¯¹è±¡çš„å®ä¾‹çš„è¡Œä¸ºä¹Ÿä¼šå‘ç”Ÿæ”¹å˜ï¼Œä½¿å¾—ç»§æ‰¿è¿™ä¸ªåŸå‹å¯¹è±¡çš„å®ä¾‹ä¸å¯é¢„æµ‹ï¼Œå¯èƒ½é€ æˆç¾éš¾æ€§é”™è¯¯
        
        ```jsx
        function Person(age, name) {
          this.age = age;
          this.name = name;
        }
        Person.prototype.sayName = function () {
          console.log(this.name);
        };
        
        const person1 = new Person(22, "mangwu");
        const person2 = new Person(23, "wumang");
        person1.sayName(); // mangwu
        person2.sayName(); // wumang
        // é€šè¿‡__proto__è·å–åŸå‹å¯¹è±¡
        person1.__proto__.sayName = function () {
          console.log(`I'${this.name} and I'm ${this.age} years old.`);
        };
        
        person1.sayName(); // I'mangwu and I'm 22 years old.
        person2.sayName(); // I'wumang and I'm 23 years old.
        ```
        
- **é®è”½**ï¼ˆ**shadow**ï¼‰åŸå‹å±æ€§æŒ‡åœ¨å¯¹è±¡å®ä¾‹ä¸Šæ·»åŠ ä¸€ä¸ªäºåŸå‹å¯¹è±¡**åŒå**çš„**è‡ªæœ‰**å±æ€§ï¼Œé‚£ä¹ˆè¿™ä¸ªè‡ªæœ‰å±æ€§ä¼šé®ä½åŸå‹å¯¹è±¡ä¸Šçš„å±æ€§
    - æ ¹æ®[2.4.3.1 è®¿é—®å¯¹è±¡å±æ€§çš„åŸç†](2%20%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1.md) é¦–å…ˆè®¿é—®å¯¹è±¡çš„è‡ªæœ‰å±æ€§ï¼Œç„¶åå†åœ¨åŸå‹é“¾ä¸Šè¿›è¡Œæœç´¢
    - æ‰€ä»¥å®šä¹‰**åŒå**çš„**è‡ªæœ‰**å±æ€§å¯ä»¥å±è”½å¯¹åŸå‹é“¾ä¸Šçš„å±æ€§çš„è®¿é—®ï¼Œå³ä½¿åœ¨å®ä¾‹ä¸ŠæŠŠè¿™ä¸ªå±æ€§è®¾ç½®æˆ`null`
    
    ```jsx
    // é®è”½
    person1.constructor = Object; // constructoræ˜¯Person.prototypeåŸå‹çš„ä¸€ä¸ªå±æ€§ï¼Œå¾ªç¯å¼•ç”¨Person
    console.log(person2.constructor); // [Function: Person]
    console.log(person1.constructor); // [Function: Object]
    console.log(person1); // { age: 22, name: 'mangwu', constructor: [Function: Object] }
    console.log(person2); // Person { age: 23, name: 'wumang' }
    ```
    
    - `person1.constructor = Object` å¹¶ä¸æ˜¯ä¿®æ”¹äº†åŸå‹ä¸Šçš„`constructor`å±æ€§ï¼Œè€Œæ˜¯åœ¨`person1`å¯¹è±¡ä¸Šå¢åŠ äº†ä¸€ä¸ªè‡ªæœ‰å±æ€§`constructor`
    - ä»`person1`å’Œ`person2` çš„æ‰“å°ç›´åˆ°ï¼Œ`person1` æ–°å¢çš„`constructor` å±æ€§**é®è”½**(**shadow**)äº†åŸå‹ä¸Šçš„åŒåå±æ€§
    - å®é™…ä¸Š`Person.prototype` åŸå‹ä¸Šçš„è‡ªæœ‰å±æ€§`constructor` ä¹Ÿé®è”½äº†`Object.prototype` åŸå‹ä¸Šçš„è‡ªæœ‰åŒåå±æ€§`constructor` ï¼Œå› ä¸º`Person.prototype.__proto__ === Object.prototype` ï¼Œå¯¹è±¡å®ä¾‹ä¸Šçš„åŸå‹å¯¹è±¡æ„æˆçš„åŸå‹é“¾å…·æœ‰ä¸€å®šé¡ºåºï¼Œæœ€ç»ˆæ˜¯ä»¥`Object`æ„é€ å‡½æ•°å…³è”çš„åŸå‹å¯¹è±¡ç»“æŸï¼Œå…ˆè®¿é—®åˆ°çš„
- è§£é™¤**é®è”½**(**shadow**)çš„æ–¹æ³•ï¼šä½¿ç”¨`delete` æ“ä½œç¬¦å¯ä»¥å®Œå…¨åˆ é™¤å®ä¾‹ä¸Šçš„**è‡ªæœ‰**å±æ€§ï¼Œä»è€Œè®©æ ‡è¯†ç¬¦è§£æè¿‡ç¨‹èƒ½ç»§ç»­æœç´¢åŸå‹é“¾
    - é™¤éåœ¨å®ä¾‹ä¸Šå®šä¹‰è‡ªæœ‰å±æ€§æ—¶è®¾ç½®[[Configurable]]ç‰¹æ€§æ˜¯`false`ï¼Œå³[ä¸å¯é…ç½®](1%20%E7%90%86%E8%A7%A3%E5%AF%B9%E8%B1%A1.md)
    - å¦‚æœæƒ³è¦é€šè¿‡å®ä¾‹ç›´æ¥è®¿é—®åœ¨åŸå‹é“¾ä¸Šé¡ºåºä¸Šè¾ƒåçš„å±æ€§ï¼Œå¯ä»¥å°†åŸå‹é“¾ä¸Šè¾ƒå‰çš„å±æ€§åˆ é™¤ï¼ŒåŒæ—¶éœ€è¦è·å–åˆ°ç›¸åº”çš„åŸå‹å¯¹è±¡åä½¿ç”¨`delete` æ“ä½œç¬¦ï¼Œå› ä¸º`delete` åªèƒ½åˆ é™¤**è‡ªæœ‰**å±æ€§
    
    ```jsx
    person1.constructor = Object;
    console.log(person2.constructor); // [Function: Person]
    console.log(person1.constructor); // [Function: Object]
    console.log(person1); // { age: 22, name: 'mangwu', constructor: [Function: Object] }
    console.log(person2); // Person { age: 23, name: 'wumang' }
    
    delete person1.constructor;
    console.log(person1); // Person { age: 22, name: 'mangwu' }
    console.log(person1.constructor); // [Function: Person]
    
    // åˆ é™¤ç¬¬ä¸€ä¸ªåŸå‹å¯¹è±¡ä¸Šçš„constructor
    delete person1.__proto__.constructor; 
    console.log(person1); // { age: 22, name: 'mangwu' }
    console.log(person1.constructor); // [Function: Object]
    console.log(person1 instanceof Person); // false
    ```
    
    - å¯ä»¥çœ‹åˆ°è™½ç„¶åˆ é™¤äº†`person1` ä¸Šçš„ç¬¬ä¸€ä¸ª`constructor` ä½†æ˜¯ä»ç„¶æ˜¯Personç±»å‹ï¼Œ**å³`instanceof`ä¸ä¾é `constructor`åˆ¤æ–­å¯¹è±¡ç±»å‹**
- æœ‰æ—¶å€™ä¸€ä¸ªå¯¹è±¡å®ä¾‹ä¸­çš„æŸä¸€ä¸ªå±æ€§æ˜¯å¦æ˜¯**è‡ªæœ‰**å±æ€§ä¸æ¸…æ¥šï¼Œè¿™ä¸ªæ—¶å€™å°±èƒ½ä½¿ç”¨`hasOwnProperty()`æ–¹æ³•è¿›è¡Œåˆ¤æ–­äº†
    
    [Obejct.prototype.hasOwnProperty()](2%20%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1/Obejct%20prototype%20hasOwnProperty().md)
    

## 2.4.4 åŸå‹å’Œ`in`æ“ä½œç¬¦

- æœ‰ä¸¤ç§æ–¹å¼ä½¿ç”¨`in`æ“ä½œç¬¦

### 2.4.4.1 å•ç‹¬ä½¿ç”¨`in`æ“ä½œç¬¦

- å•ç‹¬ä½¿ç”¨æ—¶ï¼Œ`in` æ“ä½œç¬¦å¯ä»¥é€šè¿‡å¯¹è±¡è®¿é—®æŒ‡å®šå±æ€§æ—¶è¿”å›`true`
    - æ— è®ºå±æ€§æ˜¯åœ¨å®ä¾‹ä¸Šè¿˜æ˜¯åœ¨åŸå‹ä¸Š
    - æ— è®ºå±æ€§æ˜¯è®¿é—®å™¨å±æ€§è¿˜æ˜¯æ•°æ®å±æ€§
    - æ— è®ºå±æ€§æ˜¯å¯æšä¸¾çš„è¿˜æ˜¯ä¸å¯æšä¸¾çš„
    - æ— è®ºå±æ€§æ˜¯å¯é…ç½®çš„è¿˜æ˜¯ä¸å¯é…ç½®çš„
    - æ— è®ºå±æ€§æ˜¯ç¬¦å·å±æ€§è¿˜æ˜¯å­—ç¬¦ä¸²å±æ€§
    - `in` æ“ä½œç¬¦éƒ½èƒ½åˆ¤æ–­å¯¹è±¡æ˜¯å¦èƒ½è®¿é—®æŒ‡å®šå±æ€§
- ä¾‹å¦‚
    
    ```jsx
    const obj = {
      name_: "mangwu",
      get name() {
        return this.name_;
      },
      set name(val) {
        this.name_ = val;
      },
    };
    Object.defineProperties(obj, {
      // ä¸å¯æšä¸¾ï¼Œä¸å¯é…ç½®
      age_: {
        value: 22,
      },
      // ä¸å¯æšä¸¾ä¸å¯é…ç½®çš„è®¿é—®å™¨å±æ€§
      age: {
        get() {
          return this.age_;
        },
      },
    });
    // å¯é…ç½®å¯æšä¸¾çš„æ•°æ®å±æ€§
    Object.prototype.sayName = function () {
      console.log(this.name);
    };
    
    Object.defineProperties(obj.__proto__, {
      // ä¸å¯é…ç½®å¯æšä¸¾çš„åŸå‹é“¾ä¸Šçš„è®¿é—®å™¨å±æ€§
      constructor_: {
        get() {
          return this.constructor;
        },
        enumerable: true,
        configurable: true,
      },
    });
    
    console.log("name_" in obj); // true
    console.log("age_" in obj); // true
    console.log("name" in obj); // true
    console.log("age" in obj); // true
    console.log("age" in obj); // true
    console.log("constructor_" in obj); // true
    console.log("constructor" in obj); // true
    ```
    
- å¦‚æœè¦ç¡®å®šæŸä¸ªå±æ€§æ˜¯å¦åœ¨åŸå‹é“¾ä¸Šè€Œ**ä¸æ˜¯**è‡ªæœ‰å±æ€§ï¼Œå¯ä»¥é…åˆ`Object.prototype.hasOwnProperty()`
    
    ```jsx
    function hasPrototypeProperty(obj, prop) {
      return !obj.hasOwnProperty(prop) && prop in obj;
    }
    console.log(hasPrototypeProperty(obj, "constructor_")); // true
    console.log(hasPrototypeProperty(obj, "name")); // false
    console.log(hasPrototypeProperty(obj, "age")); // false
    console.log(hasPrototypeProperty(obj, "hasOwnProperty")); // true
    ```
    

### 2.4.4.3 `forâ€¦in`

- åœ¨`forâ€¦in` å¾ªç¯ä¸­ä½¿ç”¨`in`æ“ä½œç¬¦ï¼Œå¯ä»¥é€šè¿‡å¯¹è±¡è®¿é—®ä¸”å¯ä»¥è¢«**æšä¸¾**çš„å±æ€§éƒ½ä¼šè¢«è¿”å›ï¼ŒåŒ…æ‹¬å®ä¾‹å±æ€§å’ŒåŸå‹å±æ€§
- å› ä¸ºç°åœ¨`Object.prototype` åŸå‹å¯¹è±¡ä¸Šçš„å±æ€§éƒ½æ˜¯ä¸å¯æšä¸¾çš„ï¼Œæ‰€ä»¥ä½¿ç”¨`forâ€¦in` å¾ªç¯è·å–ä¸åˆ°`Object`åŸå‹å¯¹è±¡çš„ä»»ä½•å±æ€§
- ä½¿ç”¨`Object.defineProperty()` å®šä¹‰åœ¨å¯¹è±¡ä¸Šçš„è‡ªæœ‰å±æ€§å¯ä»¥è®¾ç½®[[Enumerable]]ç‰¹æ€§å€¼ï¼Œå¦‚æœè®¾ç½®æˆ`false`ï¼Œé‚£ä¹ˆè¯¥å±æ€§å°±æ˜¯ä¸å¯æšä¸¾å±æ€§ï¼Œ`forâ€¦in` æ— æ³•è·å–ï¼Œå¦åˆ™æ˜¯å¯æšä¸¾å±æ€§ï¼Œå¯ä»¥å¾ªç¯è·å–åˆ°
- ä¾‹å­
    
    ```jsx
    function Person(age, name) {
      this.age = age;
      this.name = name;
    }
    Person.prototype.sayName = function () {
      console.log(this.name);
    };
    
    const person = new Person(22, "mangwu");
    
    Object.defineProperties(Object.prototype, {
      constructor: {
        enumerable: true,
        configurable: true,
      },
      hasOwnProperty: {
        enumerable: true,
        configurable: true,
      },
    });
    
    for (const key in person) {
      console.log(key);
      if (key === "hasOwnProperty") {
        console.log(person[key]("name"));
      }
    }
    // æ‰“å°ç»“æœ
    age
    name
    sayName
    hasOwnProperty
    true
    
    Person.prototype.hasOwnProperty = function () {
      return false;
    };
    for (const key in person) {
      console.log(key);
      if (key === "hasOwnProperty") {
        console.log(person[key]("name"));
      }
    }
    // æ‰“å°ç»“æœ
    age
    name
    sayName
    hasOwnProperty
    false
    ```
    
    - ä½¿ç”¨`Object.defineProperties()` å°†`Object` åŸå‹å¯¹è±¡ä¸Šçš„å±æ€§è®¾ç½®ä¸ºå¯æšä¸¾çš„ï¼Œæµ‹éªŒ`forâ€¦in` åªèƒ½è·å–å¯æšä¸¾çš„å±æ€§
    - åœ¨`Person` çš„åŸå‹å¯¹è±¡ä¸Šå®šä¹‰åŒåçš„`hasOwnProperty` å±æ€§ï¼Œå®ƒä¼š**é®è”½** `Object`åŸå‹å¯¹è±¡çš„åŒåå±æ€§ï¼Œè¿™ç§**é®è”½** ä¸ä»…ä»…æ˜¯è®¿é—®å±æ€§æ—¶çš„ï¼Œåœ¨ä½¿ç”¨`for â€¦ in` å¾ªç¯è·å–å¯¹è±¡å±æ€§æ—¶ï¼Œ`Obejct`åŸå‹å¯¹è±¡ä¸Šçš„`hasOwnProperty` å±æ€§ä¸ä¼šè¢«æšä¸¾å‡ºæ¥äº†ï¼Œåªä¼šæšä¸¾`Person`ä¸Šçš„`hasOwnProperty` å±æ€§

## 2.4.5 å…¶å®ƒè·å–å®ä¾‹å±æ€§çš„æ–¹æ³•

- é™¤äº†`forâ€¦in` å¯ä»¥å¾ªç¯éå†å®ä¾‹å¯¹è±¡çš„æ‰€æœ‰å¯æšä¸¾å±æ€§å¤–ï¼Œè¿˜æœ‰ä¸‰ä¸ªæ–¹æ³•å¯ä»¥è·å–å¯¹è±¡çš„å±æ€§ï¼Œåªæ˜¯é™åˆ¶ä¸åŒ
    - `Object.keys()` è·å–å¯¹è±¡**è‡ªæœ‰å¯æšä¸¾**å±æ€§æ„æˆçš„æ•°ç»„
    - `Object.getOwnPropertyNames()` è·å–å¯¹è±¡çš„**è‡ªæœ‰æ™®é€šå±æ€§** æ„æˆçš„æ•°ç»„
    - `Object.getOwnPropertySymbols()` ES6æ–°å¢ç¬¦å·ç±»å‹åæ–°å¢æ–¹æ³•ï¼Œè·å–å¯¹è±¡çš„è‡ªæœ‰ç¬¦å·å±æ€§æ„æˆçš„æ•°ç»„
- æ³¨æ„é™¤äº†`Object.getOwnPropertySymbols()` å’Œ `in` çš„å‰©ä¸‹çš„ä¸‰ç§æ–¹æ³•éƒ½æ˜¯é’ˆå¯¹éç¬¦å·å±æ€§çš„ï¼Œ`Object.keys()` ,`forâ€¦in` ï¼Œ`Object.getOwnPropertyNames()` éƒ½åªèƒ½è·å–å­—ç¬¦ä¸²æˆ–æ•°å­—å±æ€§

### 2.4.5.1 `Object.keys()`

- `Object.keys()` é™æ€æ–¹æ³•ç”¨äºè·å–å¯¹è±¡çš„**è‡ªæœ‰ï¼ˆownï¼‰å¯æšä¸¾ï¼ˆenumerableï¼‰éç¬¦å·ï¼ˆnot-symbolï¼‰**å±æ€§**åç§°ï¼ˆnamesï¼‰** ï¼Œå®ƒä»¬ä¼šè¢«æŒ‰ç…§`for...in` è·å–å±æ€§ä¸€æ ·çš„é¡ºåºæ„æˆä¸€ä¸ªæ•°ç»„ç”¨äºè¿”å›
- è¯­æ³•
    
    ```jsx
    Object.keys(obj)
    ```
    
    - å‚æ•° `obj` è¢«è·å–è‡ªæœ‰å¯æšä¸¾å±æ€§çš„å¯¹è±¡
    - è¿”å›å€¼ï¼š ç”±è‡ªæœ‰å¯æšä¸¾å±æ€§**åç§°**ç»„æˆçš„**å­—ç¬¦ä¸²æ•°ç»„**
- æ³¨æ„ï¼Œå‚æ•°`obj` å¹¶éå¼ºåˆ¶è¦æ˜¯å¯¹è±¡
    - åœ¨ES5åŠä¹‹å‰ï¼Œä¼ å…¥åŸå§‹æ•°æ®ç±»å‹ä¼šæŠ¥é”™ï¼ˆ`TypeError`ï¼‰
    - åœ¨ES2015ä¹‹åï¼Œå¯ä»¥ä¼ é€’åŸå‹æ•°æ®ç±»å‹ï¼Œå®ƒä»¬ä¼šè¢«å¼ºåˆ¶è½¬æ¢æˆå¯¹è±¡ï¼Œä½†ä¸€èˆ¬åªæœ‰å­—ç¬¦ä¸²å¯¹è±¡æœ‰è‡ªæœ‰å¯æšä¸¾å±æ€§ï¼ˆç´¢å¼•ï¼‰
- ä¾‹å­
    
    ```jsx
    let sym = Symbol("123");
    function Person(age, name) {
      this.age = age;
      this.name = name;
      this[1] = 3;
      this[sym] = "123";
      this.sayName = function () {
        console.log(this.name);
      };
    }
    Person.prototype.sayName = function () {
      console.log(this.name);
    };
    
    const person = new Person(22, "mangwu");
    Object.defineProperties(Object.prototype, {
      constructor: {
        enumerable: true,
        configurable: true,
      },
      hasOwnProperty: {
        enumerable: true,
        configurable: true,
      },
    });
    console.log(sym in person); // true
    for (const key of Object.keys(person)) {
      console.log(key); // age name sayName
    }
    console.log(Object.keys(sym)); // []
    console.log(Object.keys("123")); // ['0', '1', '2']
    console.log(Object.keys(123)); // []
    ```
    

### 2.4.5.2 `Object.getOwnPropertyNames()`

- `Object.getOwnPropertyNames()` é™æ€æ–¹æ³•è·å–å¯¹è±¡å®ä¾‹çš„**è‡ªæœ‰(own)éç¬¦å·(not-symbol)**å±æ€§
- è¯­æ³•
    
    ```jsx
    Object.getOwnPropertyNames(obj)
    ```
    
    - å‚æ•°ï¼Œ`obj` è¢«è·å–è‡ªæœ‰éç¬¦å·å±æ€§çš„å¯¹è±¡
    - è¿”å›å€¼ï¼š è¿”å›`obj` ä¸­è‡ªæœ‰éç¬¦å·å±æ€§**åç§°ï¼ˆnamesï¼‰**æ„æˆçš„**å­—ç¬¦ä¸²æ•°ç»„**
- æ³¨æ„ï¼Œå‚æ•°`obj` å¹¶éä¸€å®šè¦æ˜¯å¯¹è±¡ï¼Œå¯ä»¥æ˜¯**[åŸå§‹æ•°æ®ç±»å‹](2%20%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1.md)**
- ä¾‹å­ï¼šè§£é‡Šå±æ€§æ’åºçš„é—®é¢˜ï¼Œå­—ç¬¦ä¸²å±æ€§æŒ‰ç…§æ’å…¥é¡ºåºæ’åºï¼Œæ•°å­—å±æ€§æŒ‰ç…§å¤§å°æ’åºåæ”¾åœ¨å­—ç¬¦ä¸²å±æ€§å‰é¢
    
    ```jsx
    // è·å–å¯¹è±¡çš„è‡ªæœ‰éç¬¦å·å±æ€§æ„æˆçš„å­—ç¬¦ä¸²æ•°ç»„
    let sym = Symbol("custom");
    const obj = {};
    Object.defineProperties(obj, {
      12: {
        value: "12",
        enumerable: false,
      },
      name: {
        value: "mangwu",
        enumerable: false,
      },
      age: {
        value: 22,
        enumerable: true,
      },
      job: {
        value: "software",
        enumerable: false,
      },
      0: {
        enumerable: true,
        value: "0",
      },
      [3]: {
        enumerable: false,
        value: "3",
      },
      "7": {
        enumerable: true,
        value: 7,
      },
      [sym]: {
        enumerable: false,
        value: sym,
      },
      [10]: {
        value: 10,
        enumerable: true,
      },
    });
    
    console.log(Object.getOwnPropertyNames(obj));
    // æ‰“å°
    ['0','3','7','10','12','name','age','job']
    ```
    
- ä¾‹å­2ï¼šè·å–**ä¸å¯æšä¸¾çš„è‡ªæœ‰éç¬¦å·å±æ€§**çš„æ–¹å¼ï¼Œå…ˆè·å–æ‰€æœ‰è‡ªæœ‰å±æ€§ï¼Œå†é€šè¿‡`Object.keys()` è·å–å¯æšä¸¾çš„è‡ªæœ‰çš„éç¬¦å·å±æ€§ï¼Œç„¶åä½¿ç”¨`filter` å’Œ`Set` è¿›è¡Œè¿‡æ»¤
    
    ```jsx
    // è·å–è‡ªæœ‰ä¸å¯æšä¸¾çš„éç¬¦å·å±æ€§
    const enumOwnPro = Object.keys(obj); // ä»ç„¶ä½¿ç”¨ä¸Šé¢ä¾‹å­çš„obj
    const enumOwnProSet = new Set(enumOwnPro);
    const allOwnPro = Object.getOwnPropertyNames(obj);
    const nonEnumOwnPro = allOwnPro.filter((v) => !enumOwnProSet.has(v));
    console.log(nonEnumOwnPro); // [ '3', '12', 'name', 'job' ]
    ```
    

### 3.4.5.3 `Object.getOwnPropertySymbols()`

- `Object.getOwnPropertySymbols()` è·å–æ‰€æœ‰**è‡ªæœ‰çš„ç¬¦å·å±æ€§**
- è¯­æ³•
    
    ```jsx
    Object.getOwnPropertySymbols(obj)
    ```
    
    - å‚æ•°ï¼š`obj` è¢«è·å–è‡ªæœ‰ç¬¦å·å±æ€§çš„å¯¹è±¡
    - è¿”å›å€¼ï¼šåŒ…å«`obj` æ‰€æœ‰è‡ªæœ‰ç¬¦å·å±æ€§çš„æ•°ç»„
- [æ³¨æ„ï¼Œå‚æ•°`obj` å¹¶éä¸€å®šè¦æ˜¯å¯¹è±¡ï¼Œå¯ä»¥æ˜¯**[åŸå§‹æ•°æ®ç±»å‹](2%20%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1.md)**](2%20%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1.md) åŸå§‹ç±»å‹è½¬æ¢æˆåŒ…è£…ç±»å‹çš„ä¸å­˜åœ¨è‡ªæœ‰çš„ç¬¦å·å±æ€§ï¼Œæ‰€ä»¥ä¼ é€’åŸå§‹æ•°æ®ç±»å‹ä¹Ÿæ²¡æœ‰æ„ä¹‰
- ä¾‹å­
    
    ```jsx
    // è·å–æ‰€æœ‰çš„è‡ªæœ‰ç¬¦å·å±æ€§
    let sym1 = Symbol("sym1");
    let sym2 = Symbol("sym2");
    
    console.log(Object.getOwnPropertySymbols(sym1));
    console.log(Object.getOwnPropertySymbols("123456"));
    
    const obj = {};
    Object.defineProperties(obj, {
      [sym1]: {
        enumerable: true,
        value: "sym1",
      },
      [sym2]: {
        enumerable: false,
        value: "sym1",
      },
    });
    console.log(obj); // { [Symbol(sym1)]: 'sym1' }
    console.log(Object.getOwnPropertySymbols(obj)); // [ Symbol(sym1), Symbol(sym2) ]
    ```
    

## 2.4.6 å±æ€§æšä¸¾é¡ºåº

> â€for-in å¾ªç¯Object.keys()çš„æšä¸¾é¡ºåºæ˜¯ä¸ç¡®å®šçš„ï¼Œå–å†³äºJavaScriptå¼•æ“ï¼Œå¯èƒ½å› æµè§ˆå™¨è€Œå¼‚â€œ
> 
> 
> â€”â€”ã€ŠJavaScripté«˜çº§ç¨‹åºç¨‹åºè®¾è®¡ç¬¬å››ç‰ˆã€‹
> 
- å…³äº`for-in` å¾ªç¯å¯»æšä¸¾å±æ€§çš„é¡ºåºï¼ŒMDNå…¶å®ç»™å‡ºäº†[è§£é‡Š](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...in)
    
    <aside>
    ğŸ’¡ ç°ä»£ECMAScriptè§„èŒƒçš„éå†é¡ºåºæ˜¯ï¼Œåœ¨æ¯ä¸ªå®ç°ï¼ˆimplementationsï¼‰ä¹‹é—´å®šä¹‰è‰¯å¥½ä¸”ä¸€è‡´ï¼ˆconsistentï¼‰ã€‚åœ¨åŸå‹é“¾çš„æ¯ä¸ªç»„ä»¶ï¼ˆcomponent è¿™é‡Œå¯ä»¥æŒ‡æ¯ä¸ªåŸå‹å¯¹è±¡ï¼‰ä¸­ï¼Œæ‰€æœ‰éè´Ÿçš„æ•´æ•°é”®ï¼ˆå¯ä»¥æ˜¯æ•°ç»„çš„ç´¢å¼•ï¼‰å°†é¦–å…ˆæŒ‰ç…§å‡åºéå†ï¼Œç„¶åæŒ‰å±æ€§åˆ›å»ºçš„æ—¶é—´å‡åºéå†å…¶ä»–çš„å­—ç¬¦ä¸²é”®
    
    </aside>
    
- Object.keys()ä¹‹å‰è§£é‡Šè¿‡ï¼Œ[å®ƒä»¬ä¼šè¢«æŒ‰ç…§`for...in` è·å–å±æ€§ä¸€æ ·çš„é¡ºåºæ„æˆä¸€ä¸ªæ•°ç»„ç”¨äºè¿”å›](2%20%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1.md)
- å®é™…ä¸ŠMDNåªç»™å‡ºäº†`for in`åœ¨æ¯ä¸ªåŸå‹å¯¹è±¡ä¸­å±æ€§çš„éå†æ–¹å¼ï¼Œæ²¡æœ‰è¯´æ˜å±äºä¸åŒåŸå‹é“¾ä¹‹é—´çš„å±æ€§çš„éå†è§„åˆ™ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå…·ä½“çš„éå†é¡ºåºä»ç„¶è¦çœ‹JavaScriptå¼•æ“çš„å®ç°ï¼Œåªè¦åœ¨æ¯ä¸ªå¯¹è±¡ä¸­ä¿æŒä¸€è‡´å³å¯

---

- `Object.getOwnPropertyNames()` ã€`Object.getOwnPropertySymbols()` å’Œ`Object.assign()` çš„æšä¸¾é¡ºåºæ˜¯ç¡®å®šçš„
    - å› ä¸ºå®ƒä»¬éƒ½åªéå†å¯¹è±¡çš„**è‡ªæœ‰**å±æ€§ï¼Œ`Object.assign()` åœ¨åˆå¹¶å±æ€§æ—¶ä¹Ÿæ˜¯é¡ºåºéå†æ¯ä¸ªå¯¹è±¡çš„å¯æšä¸¾è‡ªæœ‰å±æ€§çš„
    - éå†é¡ºåºï¼šå…ˆä»¥å‡åºæšä¸¾æ•°å€¼ï¼ˆéè´Ÿæ•´æ•°ï¼‰é”®ï¼Œç„¶åä»¥æ’å…¥é¡ºåºæšä¸¾å­—ç¬¦ä¸²å’Œç¬¦å·é”®
- ä¾‹å­
    
    ```jsx
    const obj = {
      1: 1,
      first: "first",
      [Symbol("sym1")]: "sym1",
      second: "second",
      3: 3,
    };
    Object.defineProperties(obj.__proto__, {
      abc: {
        value: 0,
        enumerable: "abc",
      },
      5: {
        value: 5,
        enumerable: true,
        writable: true,
      },
      3: {
        value: 3,
        enumerable: true,
        writable: true,
      },
      0: {
        value: 0,
        enumerable: true,
        writable: true,
      },
    });
    obj[2] = 2;
    obj[Symbol("sym2")] = "sym2";
    obj.third = "third";
    console.log(Object.getOwnPropertyNames(obj)); // [ '1', '2', '3', 'first', 'second', 'third' ]
    console.log(Object.getOwnPropertySymbols(obj)); // [ Symbol(sym1), Symbol(sym2) ]
    for (const key in obj) {
      console.log(key); // 1 2 3 first second third 0 5 abc
    }
    ```
    
    - ä»`forâ€¦in` å¾ªç¯åªå¯ä»¥çœ‹åˆ°ï¼Œnode(v18.9.0)ç¯å¢ƒä¸‹
        - å±æ€§éå†çš„å¤§é¡ºåºæ˜¯ï¼šè‡ªæœ‰å±æ€§â€”â†’åŸå‹å¯¹è±¡å±æ€§â€”â†’åŸå‹å¯¹è±¡çš„åŸå‹å¯¹è±¡å±æ€§â€¦
        - åœ¨æ¯ä¸ªç»„ä»¶ï¼ˆè‡ªæœ‰å±æ€§å’ŒåŸå‹å¯¹è±¡ï¼‰ä¸­çš„é¡ºåºå’Œè§„èŒƒä¸€æ ·[éå†é¡ºåºï¼šå…ˆä»¥å‡åºæšä¸¾æ•°å€¼ï¼ˆéè´Ÿæ•´æ•°ï¼‰é”®ï¼Œç„¶åä»¥æ’å…¥é¡ºåºæšä¸¾å­—ç¬¦ä¸²å’Œç¬¦å·é”®](2%20%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1.md)
    - æ‰€ä»¥`0ï¼Œ5`å‡ºç°åœ¨è‡ªæœ‰å±æ€§éå†å®Œæ¯•åä½†åœ¨`abc`ä¹‹å‰ï¼Œå¹¶ä¸”åŸå‹å¯¹è±¡ä¸­çš„`3` å› ä¸ºé®è”½ï¼ˆshadowï¼‰æ— æ³•è¢«éå†åˆ°

## 2.4.7 å¯¹è±¡è¿­ä»£

- å¯¹è±¡çš„è¿­ä»£å°±æ˜¯å¯¹å¯¹è±¡ä¸­é”®å€¼å¯¹çš„éå†ï¼Œå®é™…ä¸Šä¹‹å‰ä»‹ç»çš„`Object.keys()` ä¾¿æ˜¯ä¸€ä¸ªå¯¹å¯¹è±¡çš„å±æ€§è¿›è¡Œè¿­ä»£çš„é™æ€æ–¹æ³•
- ECMAScript 2017æ–°å¢äº†ä¸¤ä¸ªé™æ€æ–¹æ³•ç”¨ä»¥æ›´å¥½çš„è¿­ä»£é”®å€¼å¯¹ï¼Œå®ƒä»¬ä¾æ®å¯¹è±¡å†…å®¹ç”Ÿæˆæˆå¯åºåˆ—åŒ–çš„æ•°ç»„ï¼Œåˆ†åˆ«æ˜¯`Object.values()` å’Œ`Object.entries()`
- å¯¹è±¡é»˜è®¤ä¸æ˜¯å¯è¿­ä»£å¯¹è±¡ï¼Œå†…ç½®å¯¹è±¡çš„`entries()`æ–¹æ³•ä½œä¸ºå¯è¿­ä»£å¯¹è±¡çš„é»˜è®¤è¿­ä»£å™¨ï¼Œè¿”å›è¿­ä»£å™¨ä¾›`forâ€¦of` ä½¿ç”¨ï¼Œä½†æ™®é€šå¯¹è±¡çš„`entries()` (åŒ…æ‹¬`values`å’Œ`keys()`) éƒ½æ˜¯è¿”å›å¯è¿­ä»£çš„æ•°ç»„

### 2.4.7.1 Object.entries()

- `Object.entries()` è¿”å›ç»™å®šå¯¹è±¡çš„**è‡ªæœ‰å¯æšä¸¾å­—ç¬¦ä¸²å±æ€§çš„[key, value]å¯¹æ„æˆçš„æ•°ç»„**ã€‚è¿™å’Œ`forâ€¦in`å¾ªç¯æ˜¯ç±»ä¼¼çš„ï¼Œåªæ˜¯`for...in` å¾ªç¯ä¼šéå†åŸå‹é“¾ä¸Šçš„å¯æšä¸¾å±æ€§
- `Object.entries()` çš„éå†é¡ºåºå’Œ`forâ€¦in` ä¸€æ ·ï¼ˆè¿™å°±è¡¨ç¤ºå’Œ`Object.keys()` æ˜¯ç›¸åŒé¡ºåºï¼‰ï¼›å¦‚æœéœ€è¦ä¸åŒçš„é¡ºåºï¼Œåªéœ€è¦å°†è¿”å›çš„æ•°ç»„ä½¿ç”¨`sort()` æ–¹æ³•è¿›è¡Œæ’åºå³å¯ï¼Œå¦‚`Object.entries(obj).sort((a, b) => a[0].localeCompare(b[0]));`
- è¯­æ³•
    
    ```jsx
    Object.entries(obj)
    ```
    
- ä¾‹å­
    
    ```jsx
    const obj = {
      a: 1,
      e: 3,
      2: 2,
      1: 1,
    };
    Object.defineProperties(obj, {
      [Symbol("123")]: {
        value: 123,
        enumerable: true,
        configurable: true,
      },
      18: {
        enumerable: false,
        value: 18,
      },
    });
    console.log(Object.entries(obj)); // [ [ '1', 1 ], [ '2', 2 ], [ 'a', 1 ], [ 'e', 3 ] ]
    ```
    
    - æ•°å€¼å±æ€§ä¼šè¢«è½¬æ¢ä¸ºå­—ç¬¦ä¸²è¾“å‡ºï¼Œä¸è·å–ç¬¦å·å±æ€§

### 2.4.7.2 Object.values()

- `Object.values()` è·å–å¯¹è±¡æ‰€æœ‰**è‡ªæœ‰çš„å¯æšä¸¾çš„**éç¬¦å·å±æ€§çš„**å±æ€§å€¼ï¼Œ**ç„¶åæ„æˆæ•°ç»„ï¼Œæ•°ç»„åŸå‹ï¼ˆå±æ€§å€¼ï¼‰é¡ºåºå’Œ`forâ€¦in` éå†å±æ€§çš„é¡ºåºä¸€æ ·ï¼ˆå’Œ`Object.keys()`, `Object.entries()` é¡ºåºä¸€æ ·ï¼‰,ä¸`Object.entries()` çš„æœ€å¤§åŒºåˆ«å°±æ˜¯ä¸è·å–å±æ€§ï¼Œè€Œæ˜¯åªè·å–å±æ€§å€¼
- è¯­æ³•
    
    ```jsx
    Object.values(obj)
    ```
    
    - å‚æ•°ï¼š`obj` è¢«è·å–è‡ªæœ‰å¯æšä¸¾çš„éç¬¦å·å±æ€§å€¼çš„å¯¹è±¡
    - è¿”å›å€¼ï¼š`obj` å¯¹è±¡çš„è‡ªæœ‰å¯æšä¸¾çš„éç¬¦å·å±æ€§å€¼ç»„æˆçš„æ•°ç»„
- ä¾‹å­
    
    ```jsx
    const obj = {
      bar: {
        0: "0",
      },
      10: 10,
      foo: 3,
      2: 2,
    };
    const values = Object.values(obj);
    console.log(values);
    console.log(values[2] === obj.bar);
    ```
    
    - æ³¨æ„`Object.entries()` å’Œ`Object.values()` è·å–åˆ°çš„å±æ€§å€¼éƒ½æ˜¯æµ…å¤åˆ¶çš„

## 2.4.8 å…¶å®ƒåŸå‹è¯­æ³•

å…³äºåŸå‹é“¾å†™æ³•çš„ä¸€äº›è¡¥å……

### 2.4.8.1 é‡å†™åŸå‹é“¾

- åœ¨ç»™æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡æ·»åŠ ä¸€äº›å±æ€§æˆ–æ–¹æ³•æ—¶ï¼Œä¸€èˆ¬åšæ³•å¦‚ä¸‹
    
    ```jsx
    XXX.prototype.propx = val;
    XXX.prototype.methodx = function() {
    	// åŸé¡¹å¯¹è±¡æ–¹æ³•
    }
    ```
    
    - è¿™ç§åšæ³•æ²¡å®šä¹‰ä¸€ä¸ªå±æ€§æˆ–æ–¹æ³•éƒ½ä¼šé‡å†™ä¸€é`XXX.prototype`
    - è™½ç„¶ä»£ç å†—ä½™ï¼Œä½†å¥½å¤„æ˜¯åŸå‹å¯¹è±¡æ²¡æœ‰æ”¹å˜ï¼Œåªæ˜¯ä¿®æ”¹äº†åŸå‹å¯¹è±¡ä¸­çš„å±æ€§å’Œæ–¹æ³•
- ä¸ºäº†å‡å°‘å†—ä½™ï¼Œç›´æ¥é€šè¿‡ä¸€ä¸ªåŒ…å«æ‰€æœ‰å±æ€§å’Œæ–¹æ³•çš„å¯¹è±¡å­—é¢é‡æ¥**é‡å†™åŸå‹**æ˜¯ä¸€ç§å¸¸è§æ–¹æ³•
    
    ```jsx
    function Person() {}
    Person.prototype = {
      name: "mangwu",
      age: 123,
      job: "Software Engineer",
      sayName: function () {
        console.log(this.name);
      },
    };
    ```
    
    - `Person.prototype` è¢«è®¾ç½®ä¸ºä¸€ä¸ªé€šè¿‡å¯¹è±¡å­—é¢é‡åˆ›å»ºçš„**æ–°å¯¹è±¡**
- å’Œåˆ†åˆ«æ·»åŠ ç›¸æ¯”ï¼Œä½¿ç”¨å±æ€§å’Œæ–¹æ³•æ˜¯ä¸€æ ·çš„ï¼Œä½†æœ‰ä¸€ä¸ªé—®é¢˜
    - é‡å†™åï¼Œ`Person.prototype` åŸå‹å¯¹è±¡å˜æˆäº†ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œ`**contructor` å±æ€§ä¸æŒ‡å‘`Person`** äº†ï¼ˆæ²¡æœ‰`constructor`å±æ€§ï¼‰
    - åœ¨åˆ›å»ºå‡½æ•°æ—¶ï¼Œä¹Ÿä¼šåˆ›å»ºå‡½æ•°çš„åŸå‹å¯¹è±¡ï¼ŒåŒæ—¶è‡ªåŠ¨ç»™åŸå‹å¯¹è±¡æ·»åŠ `constructor` å±æ€§å¹¶èµ‹å€¼å‡½æ•°æœ¬èº«
    - è€Œé€šè¿‡å­—é¢é‡åˆ›å»ºçš„æ–°å¯¹è±¡æ˜¯ä¸åŒ…å«`constructor`å±æ€§çš„ï¼Œè®¿é—®åŸå‹å¯¹è±¡çš„`constructor` ä¼šè¿”å›`Object` å…³è”çš„åŸå‹å¯¹è±¡çš„`contructor` ï¼ˆå³`Object`ï¼‰
    - è™½ç„¶`instanceof` æ“ä½œç¬¦ä»ç„¶èƒ½å¯é åœ°åˆ¤æ–­`Person` å®ä¾‹çš„ç±»å‹ï¼Œä½†æ˜¯å¼€å‘è€…ä¸èƒ½é€šè¿‡æ‰“å°ä¾é `constructor` å±æ€§æ¥åˆ¤æ–­è¯†åˆ«ç±»å‹äº†
- è§£å†³æ–¹æ³•æ˜¯åœ¨**é‡å†™åŸå‹**æ—¶ï¼Œä¸“é—¨è®¾ç½®ä¸€ä¸‹`constructor`å±æ€§å’Œå®ƒçš„å€¼
    
    ```jsx
    const person = new Person();
    
    Person.prototype = {
      **constructor: Person,**
      name: "mangwu",
      age: 123,
      job: "Software Engineer",
      sayName: function () {
        console.log(this.name);
      },
    };
    const person2 = new Person();
    console.log(Person.prototype.constructor === Person); // true
    console.log(Person.prototype.constructor === Object); // false
    console.log(person instanceof Person); // fasle
    console.log(person2 instanceof Person); // true
    ```
    
    - `person` è¢«åˆ¤æ–­ä¸æ˜¯`Person`ç±»å‹ï¼Œå› ä¸º`person`çš„[[Prototype]]å’Œå½“å‰`Person.prototype` ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œå³åœ¨`person` åœ¨`Person` é‡å†™åŸå‹å‰è¢«å£°æ˜ï¼Œ`**person` çš„[[Prototype]]æŒ‡å‘è¢«é‡å†™å‰çš„åŸå‹**
- è¿™ç§æ–¹å¼è¿˜æœ‰ä¸€ä¸ªå°é—®é¢˜ï¼Œé€šè¿‡å­—é¢é‡å®šä¹‰çš„`constructor` å±æ€§ç‰¹æ€§[[Enumerable]]æ˜¯`true` ï¼Œè€ŒåŸç”Ÿçš„`constructor` å±æ€§é»˜è®¤æ˜¯ä¸å¯æšä¸¾çš„ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨`Object.defineProperty()`æ–¹æ³•å®šä¹‰`constructor`
    
    ```jsx
    Person.prototype = {
      name: "mangwu",
      age: 123,
      job: "Software Engineer",
      sayName: function () {
        console.log(this.name);
      },
    };
    // æ¢å¤constructor
    Object.defineProperty(Person.prototype, "constrcutor", {
      value: Person,
      enumerable: false,
      writable: true,
      configurable: true,
    });
    ```
    

### 2.4.8.2 åŸå‹åŠ¨æ€æ€§

- åŸå‹åŠ¨æ€æ€§æŒ‡ä»»ä½•æ—¶å€™å¯¹åŸå‹å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•è¿›è¡Œçš„ä¿®æ”¹éƒ½ä¼š**åŠ¨æ€åœ°**åœ¨å®ä¾‹ä¸Šååº”å‡ºæ¥
- è¿™ç§ä¿®æ”¹ä¸æ˜¯é‡å†™åŸå‹å¯¹è±¡ï¼Œè€Œæ˜¯åœ¨åŸå‹å¯¹è±¡ä¸Šè¿›è¡Œå±æ€§æˆ–æ–¹æ³•çš„å¢åˆ æ”¹
    
    ```jsx
    function Person() {}
    // æ­¤æ—¶personæ²¡æœ‰ä»Personçš„åŸå‹ä¸Šç»§æ‰¿ä»»ä½•æ–¹æ³•
    const person = new Person();
    
    try {
      person.sayHi();
    } catch (error) {
      console.log(error.message); // person.sayHi is not a function
    }
    
    Person.prototype.sayHi = function () {
      console.log("Hi");
    };
    person.sayHi(); // Hi
    ```
    
    - `person`å®ä¾‹æ˜¯åœ¨`sayHi` å£°æ˜å‰åˆ›å»ºçš„
    - åœ¨`sayHi` å£°æ˜åï¼Œ`person` å®ä¾‹å°±ä½¿ç”¨å®ƒäº†ï¼Œè¿™å°±æ˜¯åŸå‹çš„åŠ¨æ€æ€§ä½“ç°
- åŸå‹å¯¹è±¡ä¸Šå±æ€§å¢åˆ æ”¹åŠ¨æ€ååº”åœ¨å®ä¾‹ä¸Šçš„åŸå› åœ¨äº
    - **å®ä¾‹ä¸åŸå‹ä¹‹é—´æ¾æ•£çš„å…³ç³»**
    - å®ä¾‹å’ŒåŸå‹ä¹‹é—´çš„é“¾æ¥å°±æ˜¯ç®€å•çš„**æŒ‡é’ˆ**ï¼Œè€Œ**ä¸æ˜¯**ä¿å­˜çš„å‰¯æœ¬
- å¯¹åŸå‹å¯¹è±¡çš„å¢åˆ æ”¹å’Œ[é‡å†™æ•´ä¸ªåŸå‹](2%20%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1.md)æ˜¯ä¸¤å›äº‹
    - å®ä¾‹çš„[[Prototype]]æŒ‡é’ˆæ˜¯åœ¨è°ƒç”¨æ„é€ å‡½æ•°æ—¶è‡ªåŠ¨èµ‹å€¼çš„ï¼Œè¿™ä¸ªæŒ‡é’ˆå³ä½¿æŠŠå‡½æ•°çš„åŸå‹ä¿®æ”¹ä¸ºä¸åŒçš„å¯¹è±¡ä¹Ÿä¸ä¼šå˜ï¼ˆé™¤éä½¿ç”¨`Object.setPrototypeOf()` ä¸»åŠ¨è®¾ç½®å®ä¾‹åŸå‹ï¼‰
    - é‡å†™æ•´ä¸ªåŸå‹ä¼šåˆ‡æ–­æœ€åˆåŸå‹å’Œæ„é€ å‡½æ•°çš„è”ç³»ï¼Œä½†å®ä¾‹å¼•ç”¨çš„ä»ç„¶æ˜¯æœ€åˆçš„åŸå‹
    - è¿™ä¹ŸéªŒè¯ä¹‹å‰è¯´è¿‡çš„[**å®ä¾‹ä¸æ„é€ å‡½æ•°æ²¡æœ‰ç›´æ¥è”ç³»ï¼Œä¸åŸå‹å¯¹è±¡æœ‰ç›´æ¥è”ç³»**ï¼Œå®ä¾‹å’Œæ„é€ å‡½æ•°éƒ½é€šè¿‡åŸå‹é“¾é“¾æ¥å¯¹åº”çš„åŸå‹å¯¹è±¡](2%20%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1.md)
- ä¾‹å­ï¼šé‡å†™æ„é€ å‡½æ•°åŸå‹å¯¹è±¡çš„å¯è§†åŒ–è¿‡ç¨‹
    
    ```jsx
    function Person() {}
    let friend = new Person();
    
    Person.prototype = {
      constructor: Person,
      name: "mangwu",
      age: 22,
      sayName() {
        console.log(this.name);
      },
    };
    
    console.log(friend.name);
    try {
      friend.sayName();
    } catch (error) {
      console.log(error.message);
    }
    ```
    
    ![é‡å†™åŸå‹.png](2%20%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1/%25E9%2587%258D%25E5%2586%2599%25E5%258E%259F%25E5%259E%258B.png)
    

### 2.4.8.3 åŸç”Ÿå¯¹è±¡åŸå‹ï¼ˆå†…ç½®å¯¹è±¡åŸå‹ï¼‰

- **åŸå‹æ¨¡å¼æ˜¯å®ç°JavaScriptä¸­æ‰€æœ‰åŸå‹å¼•ç”¨ç±»å‹çš„æ¨¡å¼**
- æ‰€æœ‰åŸç”Ÿå¼•ç”¨ç±»å‹çš„æ„é€ å‡½æ•°ï¼Œå¦‚`Object`, `Array`, `String`ç­‰éƒ½åœ¨éƒ½åœ¨åŸå‹ä¸Šå®šä¹‰äº†å®ä¾‹æ–¹æ³•ï¼Œä¾‹å¦‚
    - `[Object.prototype.isPrototypeOf()](2%20%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1.md)`
    - `[Object.prototype.hasOwnProperty()](2%20%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1/Obejct%20prototype%20hasOwnProperty().md)`
    - `[Array.prototype.sort()`](../6%20%E9%9B%86%E5%90%88%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B/2%20Array.md)
    - â€¦æ›´å¤šå®šä¹‰åœ¨`Array`åŸå‹å¯¹è±¡ä¸Šçš„æ–¹æ³•å¯ä»¥æŸ¥çœ‹é›†åˆå¼•ç”¨ç±»å‹[2. Array](../6%20%E9%9B%86%E5%90%88%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B/2%20Array.md)
    - `[String.prototype.charCodeAt()](../5%20%E5%9F%BA%E6%9C%AC%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B/3%203%20String.md)`
    - `[String.prototype.split()](../5%20%E5%9F%BA%E6%9C%AC%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B/3%203%20String.md)`
    - â€¦æ›´å¤šå®šä¹‰åœ¨`String` åŸå‹å¯¹è±¡ä¸Šçš„æ–¹æ³•å¯ä»¥æŸ¥çœ‹åŒ…è£…å¼•ç”¨ç±»å‹[3.3 String](../5%20%E5%9F%BA%E6%9C%AC%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B/3%203%20String.md)
- é€šè¿‡åŸç”Ÿå¯¹è±¡çš„åŸå‹å¯ä»¥è·å–æ‰€æœ‰é»˜è®¤æ–¹æ³•çš„å¼•ç”¨ï¼Œä¹Ÿå¯ä»¥ç»™åŸç”Ÿç±»å‹çš„å®ä¾‹å®šä¹‰æ–°çš„æ–¹æ³•
    - å¯ä»¥å‘è‡ªå®šä¹‰å¯¹è±¡åŸå‹ä¸€æ ·ä¿®æ”¹åŸç”Ÿå¯¹è±¡åŸå‹ï¼Œåœ¨åŸç”Ÿå¯¹è±¡åŸå‹ä¸Šè¿›è¡Œå¢åˆ æ”¹
    - ä½†æ˜¯**ä¸è¦é‡å†™**åŸç”Ÿå¯¹è±¡åŸå‹ï¼Œå¯èƒ½é€ æˆä¸å¯é€†çš„åæœ
    
    ```jsx
    console.log(String.prototype.startsWith); // [Function: startsWith]
    console.log(Array.prototype.push); // [Function: push]
    String.prototype.isPalindrome = function () {
      for (let i = 0; i < this.length / 2; i++) {
        if (this[i] !== this[this.length - i - 1]) {
          return false;
        }
      }
      return true;
    };
    console.log("12a3a21".isPalindrome()); // true
    console.log("abssbaa".isPalindrome()); // false
    ```
    
    - åœ¨`String` åŸå‹ä¸Šæ·»åŠ äº†ä¸€ä¸ªåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯å›æ–‡å­—ç¬¦ä¸²çš„æ–¹æ³•ï¼Œå½“å‰ç¯å¢ƒä¸‹æ‰€æœ‰å­—ç¬¦ä¸²éƒ½å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•
    - åé¢ä¸¤ä¸ªå­—ç¬¦ä¸²åœ¨è¯»å–`isPalindrome` å±æ€§æ—¶ï¼Œåå°è‡ªåŠ¨åˆ›å»º`String`åŒ…è£…å®ä¾‹ï¼Œä»è€Œæ‰¾åˆ°å¹¶è°ƒç”¨`isPalindrome()`
- **æ³¨æ„**
    - å¹¶ä¸æ¨èåœ¨åŸç”Ÿå¯¹è±¡åŸå‹ä¸Šè¿›è¡Œå¢åˆ æ”¹ï¼Œå³ä½¿æ˜¯ç®€å•æ·»åŠ ä¸€ä¸ªè‡ªå®šä¹‰æ–¹æ³•ä¹Ÿä¸æ¨è
    - å› ä¸ºè¿™æ ·å¯èƒ½å¼•å‘å‘½åå†²çªï¼Œå¦‚ä¸€ä¸ªåç§°åœ¨ä¸€ä¸ªæµè§ˆå™¨ä¸­ä¸å­˜åœ¨è€Œåœ¨å¦ä¸€ä¸ªæµè§ˆå™¨ä¸­å­˜åœ¨
    - å¦å¤–è¿˜å¯èƒ½æ„å¤–é‡å†™åŸç”Ÿæ–¹æ³•ï¼Œå› ä¸ºå¼€å‘è€…å¯èƒ½å¹¶ä¸çŸ¥é“æœ‰äº›å¥½ç”¨çš„æ–¹æ³•å·²è¢«JavaScriptå¼•æ“å®ç°äº†
- æ¨èçš„åšæ³•
    - åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ç±»ï¼Œç»§æ‰¿åŸç”Ÿç±»å‹ï¼Œå°±åƒ`[XSet](../6%20%E9%9B%86%E5%90%88%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B/6%20Set.md)`

### 2.4.8.4 åŸå‹çš„é—®é¢˜

- åŸå‹**æ¬¡è¦**é—®é¢˜æ˜¯å¼±åŒ–äº†å‘æ„é€ å‡½æ•°ä¼ é€’åˆå§‹åŒ–å‚æ•°çš„èƒ½åŠ›ï¼Œä¼šå¯¼è‡´æ‰€æœ‰å®ä¾‹é»˜è®¤éƒ½å–å¾—ç›¸åŒçš„å±æ€§å€¼ï¼ˆè¿™ä¸ªé—®é¢˜å¾ˆå¥½è§£å†³ï¼Œå°†ä¸€äº›å±æ€§å®šä¹‰ä¸ºè‡ªæœ‰å±æ€§å³å¯ï¼‰
- åŸå‹**æœ€å¤§**çš„é—®é¢˜æºè‡ªå®ƒçš„**å…±äº«ç‰¹æ€§**
    - åŸå‹ä¸Šæ‰€æœ‰å±æ€§å®ä¾‹å…±äº«ï¼Œè¿™å¯¹å‡½æ•°è€Œå·²æ¯”è¾ƒåˆé€‚
    - å¯¹åŒ…å«åŸå§‹å€¼çš„å±æ€§ä¹Ÿè¿˜å¥½ï¼Œå¯ä»¥é€šè¿‡åœ¨å®ä¾‹ä¸Šæ·»åŠ åŒåå±æ€§æ¥ç®€å•é®è”½åŸå‹ä¸Šçš„å±æ€§
    - çœŸæ­£çš„é—®é¢˜æ˜¯æ¥è‡ªåŒ…å«å¼•ç”¨å€¼çš„å±æ€§
        
        ```jsx
        function Person() {}
        Person.prototype = {
          constructor: Person,
          name: "mangwu",
          age: 22,
          job: "Software",
          friends: ["wumang", "mangmang"],
        };
        const person1 = new Person();
        const person2 = new Person();
        person1.friends.push("wuwu");
        console.log(person2.friends); // [ 'wumang', 'mangmang', 'wuwu' ]
        console.log(person1.friends); // [ 'wumang', 'mangmang', 'wuwu' ]
        console.log(person1.friends === person2.friends); // true
        ```
        
        - `Person.prototype` æœ‰ä¸€ä¸ªåä¸º`friends` çš„å±æ€§ï¼ŒåŒ…å«ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„
        - åˆ›å»ºä¸¤ä¸ªå®ä¾‹ï¼Œå‘å…¶ä¸­ä¸€ä¸ªå®ä¾‹çš„`friends` å±æ€§ä¸­æ·»åŠ ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç”±äºè¿™ä¸ª`friends` å±æ€§å­˜åœ¨äº`Person.prototype` ä¸Šï¼Œæ–°åŠ çš„å­—ç¬¦ä¸²ä¹Ÿä¼šåœ¨å¦ä¸€ä¸ªå®ä¾‹çš„`friends` åæ˜ å‡ºæ¥ï¼ˆ[åŸå‹çš„åŠ¨æ€æ€§](2%20%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1.md)ï¼‰
        - å¦‚æœæ˜¯æœ‰æ„åœ¨å¤šä¸ªå®ä¾‹é—´å…±äº«æ•°ç»„ï¼Œæ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†ä¸€èˆ¬è€Œè¨€ä¸åŒå®ä¾‹åº”è¯¥æ‹¥æœ‰å±äºè‡ªå·±çš„å±æ€§å‰¯æœ¬

æ³¨æ„ï¼šJavaScripté«˜çº§ç¨‹åºè®¾è®¡ï¼ˆç¬¬4ç‰ˆï¼‰åœ¨è¿™çš„è®ºè¿°å…¶å®**åªèƒ½è¯´æ˜æœ‰äº›å±æ€§ä¸é€‚åˆæ”¾åœ¨åŸå‹é‡Œ**ï¼Œæ›´é€‚åˆä½œä¸ºå®ä¾‹çš„è‡ªæœ‰å±æ€§ï¼Œåœ¨æ„é€ å‡½æ•°é‡Œå®šä¹‰