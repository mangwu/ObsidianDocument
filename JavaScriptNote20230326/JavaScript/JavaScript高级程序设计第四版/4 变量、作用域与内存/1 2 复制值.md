# 1.2 复制值

ECMAScript对原始值和引用值在通过变量复制时，使用不同的方案。

# 1.2.1 原始值的复制

## 描述

- 通过变量把一个原始值复制给另外一个变量时，**原始值会被复制到新变量的位置**
- 例如
    
    ```jsx
    let num1 = 5;
    let num2 = num1;
    ```
    
    - num1包含数值5，使用字面量进行定义
    - 在初始化num2时，num2会得到数值5，**这个值和num1中的5完全独立**，它是那个值的副本

## 原理

- 原始值通过变量复制得到的是复制保存的新原始值，两个变量相互独立，互不干扰
- 原始值复制原理可以如图所示
    
    
    | 复制前的变量对象 |  |
    | --- | --- |
    |  |  |
    | num1 | 5(number类型) |
    
    | 复制后的变量对象 |  |
    | --- | --- |
    | num2 | 5(number类型) |
    | num1 | 5(number类型) |

# 1.2.2 引用值的复制

## 描述

- 引用值通过变量复制给另一个变量时，存储在变量中的值也会被复制到新变量所在的区域
- 区别在于
    - 引用值变量中保存的是指向实际值的**引用（reference），**或者称为**指针**
    - 指针指向存储在**堆内存中的对象**
    - 所以复制变量相当于复制指针
    - 操作完成后两个变量都是引用值，指向同一个在**堆内存中的对象**

## 原理

- 由于引用值通过变量复制的是变量中保存的指针，所以**堆内存中的对象**并没有被复制
- 动态属性性质，改变其中一个引用值变量的属性值，另一个引用值变量的属性值也会改变，因为本质上修改的是同一个对象
- 这两个引用值变量完全一致，可以通过它们两个访问到堆内存中的同一个实际对象
- 原理如图所示：
    
    [https://www.figma.com/file/s8cK7lRAiBs9l51YxlHK5J/JavaScript-referenceValue-copyvalue](https://www.figma.com/file/s8cK7lRAiBs9l51YxlHK5J/JavaScript-referenceValue-copyvalue)
    

## 例子

```jsx
let obj1 = {
  name: "manwu",
  age: 23,
};
// 通过变量复制
const obj2 = obj1;
obj2.name = "wumang";

console.log(obj1); // 指向同一个对象，所以打印出obj的name属性也是变化后的
// 打印结果
{ name: 'wumang', age: 23 }
```