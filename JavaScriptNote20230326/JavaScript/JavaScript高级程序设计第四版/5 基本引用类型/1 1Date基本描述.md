# 1.1Date基本描述

# 1.1.1 简介

- ECMScript中的Date引用类型参考Java早期版本的`java.util.Date`
- Date类型能表示的时期范围为：
    - 以**协调世界时**（UTC,Universal Time Coordinated），**1970.01.01午夜（零时）**为零时
    - 之前到公元前**271 821**年4月20号零点（UTC时间）
    - 之后到**285 646**年的日期(JavaScript高级程序设计的说法)
    - 即是1970年1月1日0点前后的各**1亿天**。
- UTC，称为世界协调时，也称世界标准时间、世界统一时间
    - UTC+8就是中国标准时间，因为中国时差与UTC时差为+8小时
- Date类型保存的日期格式为
    - 自协调世界时1970.01.01午夜（零时）至今所有经过的**毫秒**数，即**时间戳**
    - 如果时期为自协调世界时之前的日期，**时间戳**是负数
    - 谷歌浏览器经测试能表示的有效时间戳为`[-864e13, 864e13]`

# 1.1.2 新建日期对象

## 默认日期

- 使用`new Date()` 创建默认日期对象
    
    ```jsx
    const now = new Date();
    ```
    
- 不给构造函数Date()传递参数的情况下，创建的对象保存当前（创建时）的日期后时间
- 将now打印出来，node环境和浏览器环境的打印结果不同
    - node: `2022-06-27T03:13:25.341Z`
    - 谷歌浏览器 `Mon Jun 27 2022 11:13:46 GMT+0800 (中国标准时间)`
    
    ---
    
    - node环境打印的是标准时间(ISO标准)表示，选择的是GMT+00(UTC)时区
    - 谷歌浏览器根据用户所在时区打印了**所在时区**的标准时间

## 指定日期

- Date()构造函数接受一个参数
    - **时间戳：**以毫秒为单位的数字类型，UNIX纪元1970.01.01午夜之后的毫秒数
    - 其它日期对象
- 为了获得毫秒数的**时间戳，**引用类型Date提供了两个辅助方法

### Date.parse()

- Date.parse()函数接受字符串参数，并返回**时间戳**
- ECMAScript5规范了Date.parse()函数接受的字符串应该支持的日期格式
    - “月/日/年”,如”6/27/2022“
    - ”月名 日, 年“,如”May 23, 2019”
    
    - ”周几 月名 日 年 时:分:秒 时区“，如"Tue May 23 2019 00:00:00 GMT-0700"
        - 常用作`toString()` 的基本输出格式
    - ISO 8601 扩展格式”YYYY-MM-DDTHH:mm:ss.sssZ”, 例如”2019-05-23T00:00:00”
- 不同的浏览器引擎还实现了不同的日期格式，如谷歌浏览器支持 “06-27-2022 15:23:34”的日期格式
- 如果日期格式不能识别，Date.parse()函数会返回NaN

---

- 推荐使用如下格式新建日期对象
    
    ```jsx
    const date = new Date(Date.parse("2022-06-27 13:56:35.222 GMT+0800"))
    ```
    
    - 实际上就是依据单位大小从**年月日 时秒分毫秒 时区** 的顺序
    - 其中所有的日期都使用阿拉伯数字，不使用英文单词
    - 分为三个部分，每个部分使用空格隔开；年月日使用-隔开，时秒分使用:隔开最后用点连接三位毫秒， 最后一部分为时区GMT+XXXX 表示中国北京时区
    - GMT表示**格林尼治标准时间，**在不精确到秒的情况下，GMT和UTC视为等同
        - 但是UTC以原子时计算，是一种均匀的时间，更加精准
        - GMT根据地理位置将地球划为24个时区，其中零时区就是伦敦的格林尼治天文台处，而东八区就是北京时间，使用GMT+08表示；西五区就是美东（华盛顿）时区，使用GMT-05表示
        - 详情[csdn-GMT与UTC的区别](https://blog.csdn.net/weixin_53341042/article/details/114693547)
- 也推荐使用**ISO 8601** 表示日期格式
    
    ```jsx
    const date = new Date(Date.parse("2022-06-27T12:25:23.123+08:00"))
    ```
    
    - 在ISO 8601日期标准格式中，最后一位可以使用`Z` 表示UTC时间
    - 也可以根据时区的时差使用”+时差”进行表示，如上面的`+08:00` 表示的就是中国标准时间
- 上面的两种格式中
    - 如果**不加时区，默认以UTC时间为基准进行初始化（默认时区为GMT+0000）**
    - 如果只有日期，没有时分秒，则使用`00:00:00` 初始化
    - 必须给出日期

---

- 对于构造函数Date()，可以直接把表示日期的字符串作为参数传递给构造函数
    
    ```jsx
    const date = new Date("2022-02-28T12:45:12.452+08:00");
    ```
    
    - Date()构造函数会在后台调用`Date.parse()`

---

- 不同浏览器环境对处理越界日期的情况有所不同
    
    ```jsx
    const date4 = new Date("2022-06-31 08:00:00.000 GMT+0800");
    console.log(date4.toUTCString());
    ```
    
    - node环境和谷歌浏览器(102.0.5005.115)环境下解释为7月1号，如下
        
        `Fri, 01 Jul 2022 00:00:00 GMT`
        
    - opera浏览器会使用当前日期代替给出的日期
    - firefox浏览器会非法日期的提示：`Invalid Date`

### Date.UTC()

- Date.UTC()函数也返回日期（距离自协调世界时）的毫秒表示，但是接受的参数不是字符串的日期格式，语法如下
    
    ```jsx
    Date.UTC(year:number, month:number[, date[,hrs[,min[,sec[,ms]]]]]);
    ```
    
    - year: **1900 年后的某一年份（**MDN上的说明，实际上可以传递100之后的整数值**），**必须传递，如果年份被传递为0到99之间的数，会自动转换为20世纪的一个年份（1900 + year），如传递95，年份就是1995
    - month:0 11 之间的某一个整数，表示月份，从0开始，必须传递
    - date：1 31之间的某一个整数，表示某月中的第几天，可选，默认为1
    - hrs: 0 23之间的某一个整数，表示小时，可选，默认为0
    - min: 0 59之间的某一个整数，表示分钟，可选，默认为0
    - sec: 0 59 之间的某一个整数，表示秒，可选，默认为0
    - ms: 0 999 之间的某一个整数，表示毫秒，可选，默认为0
    - 默认使用UTC标准，所以不考虑传入时区
- Date.UTC()函数创建是默认使用GMT+00的时区，必须传递年和月
    
    ```jsx
    const date = new Date(Date.UTC(2022,5,27));
    ```
    
    - GMT时间2022 6月27零点 ，注意月份从0开始

---

- Date.UTC()也会被构造函数Date()隐式的调用
    - 但是这种**隐式调用和非隐式调用使用的时区是有区别**的
        
        ```jsx
        const date1 = new Date(Date.UTC(2022,0,1)); // 2022-1-1 00:00:00 GMT+0000
        const date2 = new Date(2022,0,1); // 2021-12-31 16:00:00 GMT+0000; 
        ```
        
    - 使用Date.UTC()显示调用，会使用UTC标准时间
    - 而直接依据UTC参数格式传递给Date，会使用所在地时区（例如东八区GMT+0800），这一点和parse()不指定时区时是**不一样**的，parse()不指定时区，默认使用GMT日期

### Date.now()

- Date.now()函数返回当前的时间戳
    
    ```jsx
    // 使用Date.now()获取当前时间戳
    const now = new Date();
    console.log(now.toUTCString());
    const date9 = new Date(Date.now());
    console.log(date9.toUTCString());
    console.log(date9 - now);
    ```
    
    - 可以用来计算一段代码块的执行时间
    - 直接相减可得到以毫秒为单位的数值